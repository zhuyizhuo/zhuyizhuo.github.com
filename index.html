<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/ico/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/ico/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/ico/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.zhuyizhuo.online","root":"/","images":"/images","scheme":"Pisces","version":"8.7.1","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="ä¸€å“çš„ä¸ªäººåšå®¢">
<meta property="og:url" content="https://blog.zhuyizhuo.online/index.html">
<meta property="og:site_name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
<meta property="og:description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ä¸€å“">
<meta property="article:tag" content="åç«¯,java,javascript,å¼€å‘è€…,ç¼–ç¨‹,ä»£ç ,å¼€æº,ITç½‘ç«™,Developer,Programmer,Coder,ç”¨æˆ·ä½“éªŒ">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.zhuyizhuo.online/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ä¸€å“çš„ä¸ªäººåšå®¢ - é•¿æœŸç»´æŠ¤ï¼Œéšç¼˜æ›´æ–°ã€‚</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="ä¸€å“çš„ä¸ªäººåšå®¢" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">ä¸€å“çš„ä¸ªäººåšå®¢</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">é•¿æœŸç»´æŠ¤ï¼Œéšç¼˜æ›´æ–°ã€‚</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ä¸€å“"
      src="/assets/img/avatar.png">
  <p class="site-author-name" itemprop="name">ä¸€å“</p>
  <div class="site-description" itemprop="description">å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">77</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3podXlpemh1bw==" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;zhuyizhuo"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly94LmNvbS96aHV5aXpodW8=" title="X â†’ https:&#x2F;&#x2F;x.com&#x2F;zhuyizhuo"><i class="fab fa-twitter fa-fw"></i>X</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnpodXlpemh1bzIwMTlAZ21haWwuY29t" title="E-Mail â†’ mailto:zhuyizhuo2019@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS â†’ &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <span class="exturl" data-url="aHR0cDovL3podXlpemh1by5naXRodWIuaW8vY29kZS1nZW5lcmF0b3ItZG9jLw==" title="http:&#x2F;&#x2F;zhuyizhuo.github.io&#x2F;code-generator-doc&#x2F;">ä»£ç ç”Ÿæˆå™¨</span>
        </li>
    </ul>
  </div>

          </div>
        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="è¿”å›é¡¶éƒ¨">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL3podXlpemh1bw==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2025/08/25/security/2025-java-application-security/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/25/security/2025-java-application-security/" class="post-title-link" itemprop="url">Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»º</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-25 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-25T00:00:00+08:00">2025-08-25</time>
    </span>

  
    <span id="/2025/08/25/security/2025-java-application-security/" class="post-meta-item leancloud_visitors" data-flag-title="Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»º" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>29k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>27 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»º-ğŸ›¡ï¸"><a href="#Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»º-ğŸ›¡ï¸" class="headerlink" title="Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»º ğŸ›¡ï¸"></a>Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»º ğŸ›¡ï¸</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ åœ¨å½“ä»Šæ•°å­—åŒ–æ—¶ä»£ï¼Œåº”ç”¨å®‰å…¨å·²ç»æˆä¸ºä¼ä¸šå‘å±•çš„é‡ä¸­ä¹‹é‡ã€‚éšç€ç½‘ç»œæ”»å‡»æ‰‹æ®µçš„ä¸æ–­æ¼”è¿›å’Œå¤æ‚åŒ–ï¼Œæ„å»ºä¸€ä¸ªå…¨é¢ã€å¯é çš„Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»å˜å¾—å°¤ä¸ºé‡è¦ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å’Œå¤§å®¶åˆ†äº«Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»ºçš„æœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ æ‰“é€ å›ºè‹¥é‡‘æ±¤çš„Javaåº”ç”¨å®‰å…¨é˜²çº¿ã€‚</p>
<h2 id="ä¸€ã€Javaåº”ç”¨å®‰å…¨å¨èƒå…¨æ™¯åˆ†æ-ğŸ”"><a href="#ä¸€ã€Javaåº”ç”¨å®‰å…¨å¨èƒå…¨æ™¯åˆ†æ-ğŸ”" class="headerlink" title="ä¸€ã€Javaåº”ç”¨å®‰å…¨å¨èƒå…¨æ™¯åˆ†æ ğŸ”"></a>ä¸€ã€Javaåº”ç”¨å®‰å…¨å¨èƒå…¨æ™¯åˆ†æ ğŸ”</h2><h3 id="1-å½“å‰Javaåº”ç”¨é¢ä¸´çš„ä¸»è¦å®‰å…¨å¨èƒ"><a href="#1-å½“å‰Javaåº”ç”¨é¢ä¸´çš„ä¸»è¦å®‰å…¨å¨èƒ" class="headerlink" title="1. å½“å‰Javaåº”ç”¨é¢ä¸´çš„ä¸»è¦å®‰å…¨å¨èƒ"></a>1. å½“å‰Javaåº”ç”¨é¢ä¸´çš„ä¸»è¦å®‰å…¨å¨èƒ</h3><p>Javaä½œä¸ºä¼ä¸šçº§åº”ç”¨å¼€å‘çš„ä¸»æµè¯­è¨€ï¼Œé¢ä¸´ç€å„ç§å®‰å…¨å¨èƒï¼š</p>
<ul>
<li><strong>æ³¨å…¥æ”»å‡»</strong>ï¼šSQLæ³¨å…¥ã€å‘½ä»¤æ³¨å…¥ã€LDAPæ³¨å…¥ç­‰</li>
<li><strong>èº«ä»½éªŒè¯å’Œæˆæƒé—®é¢˜</strong>ï¼šå¼±å¯†ç ã€ä¼šè¯å›ºå®šã€æœªæˆæƒè®¿é—®ç­‰</li>
<li><strong>æ•æ„Ÿæ•°æ®æ³„éœ²</strong>ï¼šæ˜æ–‡å­˜å‚¨å¯†ç ã€ä¸å®‰å…¨çš„åŠ å¯†ç®—æ³•ç­‰</li>
<li><strong>è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰</strong>ï¼šå­˜å‚¨å‹XSSã€åå°„å‹XSSã€DOMå‹XSS</li>
<li><strong>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰</strong>ï¼šè¯±å¯¼ç”¨æˆ·æ‰§è¡Œéé¢„æœŸæ“ä½œ</li>
<li><strong>ä¸å®‰å…¨çš„ç›´æ¥å¯¹è±¡å¼•ç”¨</strong>ï¼šæœªéªŒè¯çš„ç”¨æˆ·è¾“å…¥ç›´æ¥ç”¨äºè®¿é—®å¯¹è±¡</li>
<li><strong>å®‰å…¨é…ç½®é”™è¯¯</strong>ï¼šé»˜è®¤é…ç½®ã€æœªç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½ç­‰</li>
<li><strong>ç»„ä»¶æ¼æ´</strong>ï¼šç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶çš„å·²çŸ¥æ¼æ´</li>
<li><strong>ååºåˆ—åŒ–æ¼æ´</strong>ï¼šJavaååºåˆ—åŒ–æ¼æ´å¦‚GhostCatã€Fastjsonç­‰</li>
<li><strong>DDoSæ”»å‡»</strong>ï¼šåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»</li>
</ul>
<h3 id="2-Javaå®‰å…¨æ¼æ´è¶‹åŠ¿åˆ†æ"><a href="#2-Javaå®‰å…¨æ¼æ´è¶‹åŠ¿åˆ†æ" class="headerlink" title="2. Javaå®‰å…¨æ¼æ´è¶‹åŠ¿åˆ†æ"></a>2. Javaå®‰å…¨æ¼æ´è¶‹åŠ¿åˆ†æ</h3><p>æ ¹æ®OWASPå’ŒCVEçš„ç»Ÿè®¡æ•°æ®ï¼ŒJavaåº”ç”¨å®‰å…¨æ¼æ´å‘ˆç°ä»¥ä¸‹è¶‹åŠ¿ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸‰æ–¹ç»„ä»¶æ¼æ´å æ¯”é«˜</strong>ï¼šè¶…è¿‡60%çš„Javaåº”ç”¨å®‰å…¨æ¼æ´æ¥è‡ªç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶</li>
<li><strong>APIå®‰å…¨é—®é¢˜æ—¥ç›Šçªå‡º</strong>ï¼šéšç€å¾®æœåŠ¡å’ŒAPIç»æµçš„å‘å±•ï¼ŒAPIå®‰å…¨æ¼æ´æ•°é‡å¿«é€Ÿå¢é•¿</li>
<li><strong>ä¾›åº”é“¾æ”»å‡»æˆä¸ºæ–°å¨èƒ</strong>ï¼šæ”»å‡»è€…è¶Šæ¥è¶Šå¤šåœ°é€šè¿‡ä¾›åº”é“¾æ³¨å…¥æ¶æ„ä»£ç </li>
<li><strong>å†…å­˜å®‰å…¨é—®é¢˜ä¾ç„¶å­˜åœ¨</strong>ï¼šå°½ç®¡Javaæœ‰å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œä½†å†…å­˜æ³„æ¼ã€å †æº¢å‡ºç­‰é—®é¢˜ä»æ—¶æœ‰å‘ç”Ÿ</li>
<li><strong>åŠ å¯†ç®—æ³•è¿‡æ—¶é£é™©</strong>ï¼šæ—§çš„åŠ å¯†ç®—æ³•å¦‚SHA-1ã€MD5ç­‰é€æ¸è¢«ç ´è§£ï¼Œéœ€è¦å‡çº§åˆ°æ›´å®‰å…¨çš„ç®—æ³•</li>
</ul>
<h3 id="3-å®‰å…¨åˆè§„è¦æ±‚å¯¹Javaåº”ç”¨çš„å½±å“"><a href="#3-å®‰å…¨åˆè§„è¦æ±‚å¯¹Javaåº”ç”¨çš„å½±å“" class="headerlink" title="3. å®‰å…¨åˆè§„è¦æ±‚å¯¹Javaåº”ç”¨çš„å½±å“"></a>3. å®‰å…¨åˆè§„è¦æ±‚å¯¹Javaåº”ç”¨çš„å½±å“</h3><p>å„ç§å®‰å…¨åˆè§„è¦æ±‚ä¹Ÿå¯¹Javaåº”ç”¨æå‡ºäº†æ›´é«˜çš„å®‰å…¨æ ‡å‡†ï¼š</p>
<ul>
<li><strong>GDPR</strong>ï¼šæ¬§ç›Ÿã€Šé€šç”¨æ•°æ®ä¿æŠ¤æ¡ä¾‹ã€‹ï¼Œè¦æ±‚ä¿æŠ¤ä¸ªäººæ•°æ®å’Œéšç§</li>
<li><strong>CCPA/CPRA</strong>ï¼šåŠ å·æ¶ˆè´¹è€…éšç§æ³•æ¡ˆï¼ŒåŠ å¼ºäº†å¯¹æ¶ˆè´¹è€…æ•°æ®çš„ä¿æŠ¤</li>
<li><strong>PCI DSS</strong>ï¼šæ”¯ä»˜å¡è¡Œä¸šæ•°æ®å®‰å…¨æ ‡å‡†ï¼Œé€‚ç”¨äºå¤„ç†ä¿¡ç”¨å¡ä¿¡æ¯çš„åº”ç”¨</li>
<li><strong>ISO 27001</strong>ï¼šä¿¡æ¯å®‰å…¨ç®¡ç†ä½“ç³»æ ‡å‡†ï¼Œæä¾›äº†å…¨é¢çš„ä¿¡æ¯å®‰å…¨æ¡†æ¶</li>
<li><strong>ç­‰ä¿2.0</strong>ï¼šä¸­å›½ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤åˆ¶åº¦ï¼Œè¦æ±‚ä¸åŒç­‰çº§çš„ä¿¡æ¯ç³»ç»Ÿé‡‡å–ç›¸åº”çš„å®‰å…¨æªæ–½</li>
<li><strong>HIPAA</strong>ï¼šå¥åº·ä¿é™©ä¾¿æºæ€§å’Œè´£ä»»æ³•æ¡ˆï¼Œé€‚ç”¨äºåŒ»ç–—å¥åº·è¡Œä¸š</li>
</ul>
<h2 id="äºŒã€Javaåº”ç”¨å®‰å…¨æ¶æ„è®¾è®¡åŸåˆ™-ğŸ—ï¸"><a href="#äºŒã€Javaåº”ç”¨å®‰å…¨æ¶æ„è®¾è®¡åŸåˆ™-ğŸ—ï¸" class="headerlink" title="äºŒã€Javaåº”ç”¨å®‰å…¨æ¶æ„è®¾è®¡åŸåˆ™ ğŸ—ï¸"></a>äºŒã€Javaåº”ç”¨å®‰å…¨æ¶æ„è®¾è®¡åŸåˆ™ ğŸ—ï¸</h2><h3 id="1-åˆ†å±‚å®‰å…¨æ¶æ„è®¾è®¡"><a href="#1-åˆ†å±‚å®‰å…¨æ¶æ„è®¾è®¡" class="headerlink" title="1. åˆ†å±‚å®‰å…¨æ¶æ„è®¾è®¡"></a>1. åˆ†å±‚å®‰å…¨æ¶æ„è®¾è®¡</h3><p>æ„å»ºJavaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»ï¼Œåº”é‡‡ç”¨åˆ†å±‚å®‰å…¨æ¶æ„è®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li><strong>ç½‘ç»œå±‚å®‰å…¨</strong>ï¼šé˜²ç«å¢™ã€WAFã€DDoSé˜²æŠ¤ã€TLSåŠ å¯†é€šä¿¡ç­‰</li>
<li><strong>åº”ç”¨å±‚å®‰å…¨</strong>ï¼šèº«ä»½éªŒè¯ã€æˆæƒã€ä¼šè¯ç®¡ç†ã€è¾“å…¥éªŒè¯ç­‰</li>
<li><strong>æ•°æ®å±‚å®‰å…¨</strong>ï¼šæ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶ã€æ•°æ®è„±æ•ã€å¤‡ä»½æ¢å¤ç­‰</li>
<li><strong>åŸºç¡€è®¾æ–½å®‰å…¨</strong>ï¼šæ“ä½œç³»ç»Ÿå®‰å…¨ã€å®¹å™¨å®‰å…¨ã€è™šæ‹ŸåŒ–å®‰å…¨ç­‰</li>
<li><strong>è¿ç»´å®‰å…¨</strong>ï¼šæ—¥å¿—å®¡è®¡ã€æ¼æ´æ‰«æã€å®‰å…¨ç›‘æ§ã€åº”æ€¥å“åº”ç­‰</li>
<li><strong>å¼€å‘å®‰å…¨</strong>ï¼šå®‰å…¨ç¼–ç ã€ä»£ç å®¡æŸ¥ã€å®‰å…¨æµ‹è¯•ã€DevSecOpsç­‰</li>
</ul>
<h3 id="2-çºµæ·±é˜²å¾¡ç­–ç•¥"><a href="#2-çºµæ·±é˜²å¾¡ç­–ç•¥" class="headerlink" title="2. çºµæ·±é˜²å¾¡ç­–ç•¥"></a>2. çºµæ·±é˜²å¾¡ç­–ç•¥</h3><p>çºµæ·±é˜²å¾¡æ˜¯ä¸€ç§å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤ç­–ç•¥ï¼Œé€šè¿‡åœ¨ä¸åŒå±‚æ¬¡è®¾ç½®å®‰å…¨é˜²çº¿ï¼Œæé«˜ç³»ç»Ÿçš„æ•´ä½“å®‰å…¨æ€§ï¼š</p>
<ol>
<li><strong>ç‰©ç†å±‚å®‰å…¨</strong>ï¼šæ•°æ®ä¸­å¿ƒã€æœåŠ¡å™¨ç­‰ç‰©ç†è®¾æ–½çš„å®‰å…¨</li>
<li><strong>ç½‘ç»œå±‚å®‰å…¨</strong>ï¼šç½‘ç»œéš”ç¦»ã€è®¿é—®æ§åˆ¶ã€æµé‡ç›‘æ§ç­‰</li>
<li><strong>ç³»ç»Ÿå±‚å®‰å…¨</strong>ï¼šæ“ä½œç³»ç»ŸåŠ å›ºã€è¡¥ä¸ç®¡ç†ã€é˜²ç—…æ¯’è½¯ä»¶ç­‰</li>
<li><strong>åº”ç”¨å±‚å®‰å…¨</strong>ï¼šèº«ä»½éªŒè¯ã€æˆæƒã€è¾“å…¥éªŒè¯ã€è¾“å‡ºç¼–ç ç­‰</li>
<li><strong>æ•°æ®å±‚å®‰å…¨</strong>ï¼šæ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶ã€æ•°æ®è„±æ•ç­‰</li>
<li><strong>ç®¡ç†å±‚å®‰å…¨</strong>ï¼šå®‰å…¨ç­–ç•¥ã€å®‰å…¨åŸ¹è®­ã€å®‰å…¨å®¡è®¡ç­‰</li>
</ol>
<h3 id="3-æœ€å°æƒé™åŸåˆ™"><a href="#3-æœ€å°æƒé™åŸåˆ™" class="headerlink" title="3. æœ€å°æƒé™åŸåˆ™"></a>3. æœ€å°æƒé™åŸåˆ™</h3><p>æœ€å°æƒé™åŸåˆ™æ˜¯æŒ‡ç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·ã€è¿›ç¨‹å’ŒæœåŠ¡éƒ½åº”è¯¥æ‹¥æœ‰å®Œæˆå…¶ä»»åŠ¡æ‰€éœ€çš„æœ€å°æƒé™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°æœ€å°æƒé™åŸåˆ™çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ™®é€šç”¨æˆ·åªèƒ½è¯»å–è‡ªå·±çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;#id == authentication.principal.id&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findById(id)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> ResourceNotFoundException(<span class="string">&quot;User not found&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç®¡ç†å‘˜å¯ä»¥è¯»å–æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getAllUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åªæœ‰ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">createUser</span><span class="params">(UserDTO userDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (userRepository.existsByUsername(userDTO.getUsername())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BadRequestException(<span class="string">&quot;Username already exists&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–°ç”¨æˆ·</span></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(userDTO.getUsername());</span><br><span class="line">        user.setPassword(passwordEncoder.encode(userDTO.getPassword()));</span><br><span class="line">        user.setEmail(userDTO.getEmail());</span><br><span class="line">        user.setRoles(Collections.singletonList(Role.ROLE_USER));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€èº«ä»½è®¤è¯ä¸è®¿é—®æ§åˆ¶å®‰å…¨å®è·µ-ğŸ”‘"><a href="#ä¸‰ã€èº«ä»½è®¤è¯ä¸è®¿é—®æ§åˆ¶å®‰å…¨å®è·µ-ğŸ”‘" class="headerlink" title="ä¸‰ã€èº«ä»½è®¤è¯ä¸è®¿é—®æ§åˆ¶å®‰å…¨å®è·µ ğŸ”‘"></a>ä¸‰ã€èº«ä»½è®¤è¯ä¸è®¿é—®æ§åˆ¶å®‰å…¨å®è·µ ğŸ”‘</h2><h3 id="1-ç°ä»£èº«ä»½è®¤è¯æ–¹æ¡ˆ"><a href="#1-ç°ä»£èº«ä»½è®¤è¯æ–¹æ¡ˆ" class="headerlink" title="1. ç°ä»£èº«ä»½è®¤è¯æ–¹æ¡ˆ"></a>1. ç°ä»£èº«ä»½è®¤è¯æ–¹æ¡ˆ</h3><p>ä¼ ç»Ÿçš„ç”¨æˆ·åå¯†ç è®¤è¯æ–¹å¼å­˜åœ¨è¯¸å¤šå®‰å…¨éšæ‚£ï¼Œç°ä»£åº”ç”¨åº”é‡‡ç”¨æ›´å®‰å…¨çš„èº«ä»½è®¤è¯æ–¹æ¡ˆï¼š</p>
<h4 id="1-1-å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰"><a href="#1-1-å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰" class="headerlink" title="1.1 å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰"></a>1.1 å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰</h4><p>å¤šå› ç´ è®¤è¯è¦æ±‚ç”¨æˆ·æä¾›ä¸¤ç§æˆ–æ›´å¤šçš„éªŒè¯å› ç´ ï¼Œæ˜¾è‘—æé«˜äº†è´¦æˆ·å®‰å…¨æ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MfaService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TotpService totpService;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç”ŸæˆMFAå¯†é’¥å’ŒäºŒç»´ç </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MfaSetupResponse <span class="title">setupMfa</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        User user = userRepository.findByUsername(username)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> UserNotFoundException(<span class="string">&quot;User not found&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç”ŸæˆTOTPå¯†é’¥</span></span><br><span class="line">        String secretKey = totpService.generateSecretKey();</span><br><span class="line">        user.setMfaSecretKey(secretKey);</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç”ŸæˆQRç URL</span></span><br><span class="line">        String qrCodeUrl = totpService.generateQrCodeUrl(username, secretKey);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MfaSetupResponse(secretKey, qrCodeUrl);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// éªŒè¯MFAä»£ç </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyMfa</span><span class="params">(String username, String code)</span> </span>&#123;</span><br><span class="line">        User user = userRepository.findByUsername(username)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> UserNotFoundException(<span class="string">&quot;User not found&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> totpService.verifyCode(user.getMfaSecretKey(), code);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-OAuth2-0ä¸OpenID-Connect"><a href="#1-2-OAuth2-0ä¸OpenID-Connect" class="headerlink" title="1.2 OAuth2.0ä¸OpenID Connect"></a>1.2 OAuth2.0ä¸OpenID Connect</h4><p>OAuth2.0æ˜¯ä¸€ç§æˆæƒæ¡†æ¶ï¼ŒOpenID Connectæ˜¯åŸºäºOAuth2.0çš„èº«ä»½è®¤è¯åè®®ï¼Œå®ƒä»¬å¯ä»¥å®ç°ç¬¬ä¸‰æ–¹ç™»å½•å’Œæˆæƒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="meta">@EnableMethodSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityFilterChain <span class="title">filterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http</span><br><span class="line">            .authorizeHttpRequests(authorize -&gt; authorize</span><br><span class="line">                .requestMatchers(<span class="string">&quot;/public/**&quot;</span>).permitAll()</span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">            )</span><br><span class="line">            .oauth2ResourceServer(oauth2 -&gt; oauth2</span><br><span class="line">                .jwt(jwt -&gt; jwt</span><br><span class="line">                    .decoder(jwtDecoder())</span><br><span class="line">                    .jwtAuthenticationConverter(jwtAuthenticationConverter())</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">            .sessionManagement(session -&gt; session</span><br><span class="line">                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)</span><br><span class="line">            );</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JwtDecoder <span class="title">jwtDecoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é…ç½®JWTè§£ç å™¨</span></span><br><span class="line">        <span class="keyword">return</span> NimbusJwtDecoder.withPublicKey(rsaPublicKey()).build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JwtAuthenticationConverter <span class="title">jwtAuthenticationConverter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é…ç½®JWTè®¤è¯è½¬æ¢å™¨</span></span><br><span class="line">        JwtGrantedAuthoritiesConverter grantedAuthoritiesConverter = <span class="keyword">new</span> JwtGrantedAuthoritiesConverter();</span><br><span class="line">        grantedAuthoritiesConverter.setAuthoritiesClaimName(<span class="string">&quot;roles&quot;</span>);</span><br><span class="line">        grantedAuthoritiesConverter.setAuthorityPrefix(<span class="string">&quot;ROLE_&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        JwtAuthenticationConverter jwtAuthenticationConverter = <span class="keyword">new</span> JwtAuthenticationConverter();</span><br><span class="line">        jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(grantedAuthoritiesConverter);</span><br><span class="line">        <span class="keyword">return</span> jwtAuthenticationConverter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-ç»†ç²’åº¦æˆæƒæ§åˆ¶"><a href="#2-ç»†ç²’åº¦æˆæƒæ§åˆ¶" class="headerlink" title="2. ç»†ç²’åº¦æˆæƒæ§åˆ¶"></a>2. ç»†ç²’åº¦æˆæƒæ§åˆ¶</h3><p>ç»†ç²’åº¦æˆæƒæ§åˆ¶å¯ä»¥å®ç°å¯¹èµ„æºçš„ç²¾ç¡®è®¿é—®æ§åˆ¶ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®å…¶è¢«æˆæƒçš„èµ„æºï¼š</p>
<h4 id="2-1-åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰"><a href="#2-1-åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰" class="headerlink" title="2.1 åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰"></a>2.1 åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰</h4><p>RBACé€šè¿‡å°†æƒé™åˆ†é…ç»™è§’è‰²ï¼Œå†å°†è§’è‰²åˆ†é…ç»™ç”¨æˆ·ï¼Œå®ç°äº†æƒé™çš„é›†ä¸­ç®¡ç†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableMethodSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodSecurityConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¯ç”¨æ–¹æ³•çº§å®‰å…¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DocumentService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åªæœ‰æ–‡æ¡£æ‰€æœ‰è€…æˆ–ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ–‡æ¡£</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@documentSecurityService.isOwner(#documentId, authentication.principal.id) or hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">getDocument</span><span class="params">(Long documentId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–æ–‡æ¡£é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åªæœ‰æ–‡æ¡£æ‰€æœ‰è€…æˆ–ç®¡ç†å‘˜å¯ä»¥ç¼–è¾‘æ–‡æ¡£</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@documentSecurityService.isOwner(#documentId, authentication.principal.id) or hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">updateDocument</span><span class="params">(Long documentId, DocumentDTO documentDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ–‡æ¡£é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åªæœ‰ç®¡ç†å‘˜å¯ä»¥åˆ é™¤æ–‡æ¡£</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteDocument</span><span class="params">(Long documentId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æ–‡æ¡£é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component(&quot;documentSecurityService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DocumentSecurityService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DocumentRepository documentRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ˜¯æ–‡æ¡£æ‰€æœ‰è€…</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isOwner</span><span class="params">(Long documentId, Long userId)</span> </span>&#123;</span><br><span class="line">        Document document = documentRepository.findById(documentId)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> ResourceNotFoundException(<span class="string">&quot;Document not found&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> document.getOwnerId().equals(userId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰"><a href="#2-2-åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰" class="headerlink" title="2.2 åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰"></a>2.2 åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆABACï¼‰</h4><p>ABACåŸºäºç”¨æˆ·ã€èµ„æºã€ç¯å¢ƒç­‰å±æ€§è¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œæä¾›äº†æ›´çµæ´»çš„æˆæƒæœºåˆ¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DocumentService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AbacService abacService;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Document <span class="title">getDocument</span><span class="params">(Long documentId, User user)</span> </span>&#123;</span><br><span class="line">        Document document = documentRepository.findById(documentId)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> ResourceNotFoundException(<span class="string">&quot;Document not found&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ„å»ºè®¿é—®æ§åˆ¶ä¸Šä¸‹æ–‡</span></span><br><span class="line">        AccessContext context = AccessContext.builder()</span><br><span class="line">                .user(user)</span><br><span class="line">                .resource(document)</span><br><span class="line">                .action(<span class="string">&quot;read&quot;</span>)</span><br><span class="line">                .environment(<span class="string">&quot;production&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥è®¿é—®æƒé™</span></span><br><span class="line">        <span class="keyword">if</span> (!abacService.checkAccess(context)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> AccessDeniedException(<span class="string">&quot;Access denied&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> document;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbacService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PolicyEngine policyEngine;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æŸ¥è®¿é—®æƒé™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkAccess</span><span class="params">(AccessContext context)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åŠ è½½ç­–ç•¥</span></span><br><span class="line">        List&lt;Policy&gt; policies = policyRepository.findByResourceType(context.getResource().getClass().getSimpleName());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¯„ä¼°ç­–ç•¥</span></span><br><span class="line">        <span class="keyword">return</span> policyEngine.evaluate(policies, context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-ä¼šè¯ç®¡ç†å®‰å…¨"><a href="#3-ä¼šè¯ç®¡ç†å®‰å…¨" class="headerlink" title="3. ä¼šè¯ç®¡ç†å®‰å…¨"></a>3. ä¼šè¯ç®¡ç†å®‰å…¨</h3><p>å®‰å…¨çš„ä¼šè¯ç®¡ç†å¯¹äºé˜²æ­¢ä¼šè¯å›ºå®šã€ä¼šè¯åŠ«æŒç­‰æ”»å‡»è‡³å…³é‡è¦ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HttpSessionIdResolver <span class="title">httpSessionIdResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨Headeræ–¹å¼ä¼ é€’ä¼šè¯IDï¼Œè€Œä¸æ˜¯Cookie</span></span><br><span class="line">        HeaderHttpSessionIdResolver resolver = <span class="keyword">new</span> HeaderHttpSessionIdResolver(<span class="string">&quot;X-Auth-Token&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> resolver;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityFilterChain <span class="title">filterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http</span><br><span class="line">            .sessionManagement(session -&gt; session</span><br><span class="line">                .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)</span><br><span class="line">                .sessionFixation().migrateSession() <span class="comment">// é˜²æ­¢ä¼šè¯å›ºå®šæ”»å‡»</span></span><br><span class="line">                .maximumSessions(<span class="number">1</span>) <span class="comment">// é™åˆ¶æ¯ä¸ªç”¨æˆ·åªèƒ½æœ‰ä¸€ä¸ªæ´»åŠ¨ä¼šè¯</span></span><br><span class="line">                .maxSessionsPreventsLogin(<span class="keyword">true</span>) <span class="comment">// è¾¾åˆ°æœ€å¤§ä¼šè¯æ•°æ—¶é˜»æ­¢æ–°çš„ç™»å½•</span></span><br><span class="line">                .sessionRegistry(sessionRegistry())</span><br><span class="line">            );</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SessionRegistry <span class="title">sessionRegistry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SessionRegistryImpl();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean&lt;HttpSessionEventPublisher&gt; <span class="title">httpSessionEventPublisher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServletListenerRegistrationBean&lt;&gt;(<span class="keyword">new</span> HttpSessionEventPublisher());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€è¾“å…¥éªŒè¯ä¸è¾“å‡ºç¼–ç é˜²æŠ¤-ğŸ›¡ï¸"><a href="#å››ã€è¾“å…¥éªŒè¯ä¸è¾“å‡ºç¼–ç é˜²æŠ¤-ğŸ›¡ï¸" class="headerlink" title="å››ã€è¾“å…¥éªŒè¯ä¸è¾“å‡ºç¼–ç é˜²æŠ¤ ğŸ›¡ï¸"></a>å››ã€è¾“å…¥éªŒè¯ä¸è¾“å‡ºç¼–ç é˜²æŠ¤ ğŸ›¡ï¸</h2><h3 id="1-è¾“å…¥éªŒè¯æœ€ä½³å®è·µ"><a href="#1-è¾“å…¥éªŒè¯æœ€ä½³å®è·µ" class="headerlink" title="1. è¾“å…¥éªŒè¯æœ€ä½³å®è·µ"></a>1. è¾“å…¥éªŒè¯æœ€ä½³å®è·µ</h3><p>è¾“å…¥éªŒè¯æ˜¯é˜²æ­¢æ³¨å…¥æ”»å‡»ã€è·¨ç«™è„šæœ¬ç­‰å®‰å…¨é—®é¢˜çš„ç¬¬ä¸€é“é˜²çº¿ï¼š</p>
<h4 id="1-1-å‚æ•°éªŒè¯"><a href="#1-1-å‚æ•°éªŒè¯" class="headerlink" title="1.1 å‚æ•°éªŒè¯"></a>1.1 å‚æ•°éªŒè¯</h4><p>ä½¿ç”¨Spring Validationæ¡†æ¶è¿›è¡Œå‚æ•°éªŒè¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;User&gt; <span class="title">createUser</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> UserDTO userDTO)</span> </span>&#123;</span><br><span class="line">        User user = userService.createUser(userDTO);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(user, HttpStatus.CREATED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDTO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;Username is required&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 3, max = 50, message = &quot;Username must be between 3 and 50 characters&quot;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^[a-zA-Z0-9_]+$&quot;, message = &quot;Username can only contain letters, numbers and underscores&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;Password is required&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 8, message = &quot;Password must be at least 8 characters long&quot;)</span></span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&amp;])[A-Za-z\\d@$!%*?&amp;]&#123;8,&#125;$&quot;, </span></span><br><span class="line"><span class="meta">             message = &quot;Password must contain at least one uppercase letter, one lowercase letter, one number and one special character&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;Email is required&quot;)</span></span><br><span class="line">    <span class="meta">@Email(message = &quot;Email format is invalid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-è‡ªå®šä¹‰éªŒè¯å™¨"><a href="#1-2-è‡ªå®šä¹‰éªŒè¯å™¨" class="headerlink" title="1.2 è‡ªå®šä¹‰éªŒè¯å™¨"></a>1.2 è‡ªå®šä¹‰éªŒè¯å™¨</h4><p>å¯¹äºå¤æ‚çš„éªŒè¯é€»è¾‘ï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰éªŒè¯å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PasswordStrengthValidator</span> <span class="keyword">implements</span> <span class="title">ConstraintValidator</span>&lt;<span class="title">PasswordStrength</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(PasswordStrength constraintAnnotation)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–éªŒè¯å™¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String password, ConstraintValidatorContext context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (password == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ£€æŸ¥å¯†ç å¼ºåº¦</span></span><br><span class="line">        <span class="keyword">boolean</span> hasUppercase = !password.equals(password.toLowerCase());</span><br><span class="line">        <span class="keyword">boolean</span> hasLowercase = !password.equals(password.toUpperCase());</span><br><span class="line">        <span class="keyword">boolean</span> hasDigit = password.matches(<span class="string">&quot;.*\\d.*&quot;</span>);</span><br><span class="line">        <span class="keyword">boolean</span> hasSpecialChar = password.matches(<span class="string">&quot;.*[!@#$%^&amp;*(),.?\&quot;:&#123;&#125;|&lt;&gt;].*&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!hasUppercase || !hasLowercase || !hasDigit || !hasSpecialChar) &#123;</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line">            context.disableDefaultConstraintViolation();</span><br><span class="line">            context.buildConstraintViolationWithTemplate(<span class="string">&quot;Password must contain at least one uppercase letter, one lowercase letter, one number and one special character&quot;</span>)</span><br><span class="line">                   .addConstraintViolation();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è‡ªå®šä¹‰éªŒè¯å™¨</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDTO</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å…¶ä»–å­—æ®µ</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;Password is required&quot;)</span></span><br><span class="line">    <span class="meta">@Size(min = 8, message = &quot;Password must be at least 8 characters long&quot;)</span></span><br><span class="line">    <span class="meta">@PasswordStrength</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-è¾“å‡ºç¼–ç ä¸XSSé˜²æŠ¤"><a href="#2-è¾“å‡ºç¼–ç ä¸XSSé˜²æŠ¤" class="headerlink" title="2. è¾“å‡ºç¼–ç ä¸XSSé˜²æŠ¤"></a>2. è¾“å‡ºç¼–ç ä¸XSSé˜²æŠ¤</h3><p>è¾“å‡ºç¼–ç æ˜¯é˜²æ­¢XSSæ”»å‡»çš„æœ‰æ•ˆæ‰‹æ®µï¼Œå®ƒç¡®ä¿ç”¨æˆ·è¾“å…¥çš„å†…å®¹åœ¨æ˜¾ç¤ºæ—¶ä¸ä¼šè¢«æµè§ˆå™¨è§£é‡Šä¸ºä»£ç ï¼š</p>
<h4 id="2-1-HTMLç¼–ç "><a href="#2-1-HTMLç¼–ç " class="headerlink" title="2.1 HTMLç¼–ç "></a>2.1 HTMLç¼–ç </h4><p>åœ¨è¾“å‡ºHTMLå†…å®¹æ—¶ï¼Œå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒHTMLç¼–ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContentService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> HtmlUtils htmlUtils;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sanitizeHtml</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (input == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿›è¡ŒHTMLç¼–ç </span></span><br><span class="line">        <span class="keyword">return</span> htmlUtils.htmlEscape(input);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sanitizeRichText</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (input == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä½¿ç”¨OWASP Java HTML Sanitizerè¿›è¡Œå¯Œæ–‡æœ¬æ¸…ç†</span></span><br><span class="line">        PolicyFactory policy = Sanitizers.FORMATTING.and(Sanitizers.BLOCKS).and(Sanitizers.LINKS);</span><br><span class="line">        <span class="keyword">return</span> policy.sanitize(input);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/comments&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommentController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CommentService commentService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ContentService contentService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;Comment&gt; <span class="title">createComment</span><span class="params">(<span class="meta">@RequestBody</span> CommentDTO commentDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ¸…ç†ç”¨æˆ·è¾“å…¥</span></span><br><span class="line">        String sanitizedContent = contentService.sanitizeRichText(commentDTO.getContent());</span><br><span class="line">        commentDTO.setContent(sanitizedContent);</span><br><span class="line">        </span><br><span class="line">        Comment comment = commentService.createComment(commentDTO);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(comment, HttpStatus.CREATED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-JavaScriptç¼–ç "><a href="#2-2-JavaScriptç¼–ç " class="headerlink" title="2.2 JavaScriptç¼–ç "></a>2.2 JavaScriptç¼–ç </h4><p>åœ¨è¾“å‡ºJavaScriptå†…å®¹æ—¶ï¼Œå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒJavaScriptç¼–ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScriptService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sanitizeJavaScript</span><span class="params">(String input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (input == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿›è¡ŒJavaScriptç¼–ç </span></span><br><span class="line">        <span class="keyword">return</span> JavaScriptUtils.javaScriptEscape(input);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰"><a href="#2-3-ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰" class="headerlink" title="2.3 ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰"></a>2.3 ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</h4><p>å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œå¯ä»¥é˜²æ­¢XSSæ”»å‡»å’Œæ•°æ®æ³¨å…¥æ”»å‡»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SecurityFilterChain <span class="title">filterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http</span><br><span class="line">            .headers(headers -&gt; headers</span><br><span class="line">                .contentSecurityPolicy(csp -&gt; csp</span><br><span class="line">                    .policyDirectives(<span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; &#x27;unsafe-inline&#x27;; img-src &#x27;self&#x27; data:; font-src &#x27;self&#x27;; frame-src &#x27;none&#x27;; object-src &#x27;none&#x27;&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">                .frameOptions(frameOptions -&gt; frameOptions.deny())</span><br><span class="line">                .httpStrictTransportSecurity(hsts -&gt; hsts</span><br><span class="line">                    .includeSubDomains(<span class="keyword">true</span>)</span><br><span class="line">                    .preload(<span class="keyword">true</span>)</span><br><span class="line">                    .maxAgeInSeconds(<span class="number">31536000</span>)</span><br><span class="line">                )</span><br><span class="line">            );</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€Javaåº”ç”¨æ•°æ®å®‰å…¨é˜²æŠ¤-ğŸ”’"><a href="#äº”ã€Javaåº”ç”¨æ•°æ®å®‰å…¨é˜²æŠ¤-ğŸ”’" class="headerlink" title="äº”ã€Javaåº”ç”¨æ•°æ®å®‰å…¨é˜²æŠ¤ ğŸ”’"></a>äº”ã€Javaåº”ç”¨æ•°æ®å®‰å…¨é˜²æŠ¤ ğŸ”’</h2><h3 id="1-æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨"><a href="#1-æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨" class="headerlink" title="1. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨"></a>1. æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨</h3><p>æ•æ„Ÿæ•°æ®å¦‚å¯†ç ã€èº«ä»½è¯å·ã€é“¶è¡Œå¡å·ç­‰åº”è¿›è¡ŒåŠ å¯†å­˜å‚¨ï¼š</p>
<h4 id="1-1-å¯†ç åŠ å¯†"><a href="#1-1-å¯†ç åŠ å¯†" class="headerlink" title="1.1 å¯†ç åŠ å¯†"></a>1.1 å¯†ç åŠ å¯†</h4><p>ä½¿ç”¨Spring Securityæä¾›çš„å¯†ç ç¼–ç å™¨è¿›è¡Œå¯†ç åŠ å¯†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PasswordEncoderConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨BCryptå¯†ç ç¼–ç å™¨ï¼Œè‡ªåŠ¨ç”Ÿæˆéšæœºç›å€¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder(<span class="number">12</span>); <span class="comment">// å·¥ä½œå› å­è®¾ä¸º12</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PasswordEncoder passwordEncoder;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">createUser</span><span class="params">(UserDTO userDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> (userRepository.existsByUsername(userDTO.getUsername())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BadRequestException(<span class="string">&quot;Username already exists&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ›å»ºæ–°ç”¨æˆ·å¹¶åŠ å¯†å¯†ç </span></span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(userDTO.getUsername());</span><br><span class="line">        user.setPassword(passwordEncoder.encode(userDTO.getPassword())); <span class="comment">// åŠ å¯†å¯†ç </span></span><br><span class="line">        user.setEmail(userDTO.getEmail());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">authenticate</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        User user = userRepository.findByUsername(username)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> UserNotFoundException(<span class="string">&quot;User not found&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éªŒè¯å¯†ç </span></span><br><span class="line">        <span class="keyword">return</span> passwordEncoder.matches(password, user.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-æ•æ„Ÿæ•°æ®åŠ å¯†"><a href="#1-2-æ•æ„Ÿæ•°æ®åŠ å¯†" class="headerlink" title="1.2 æ•æ„Ÿæ•°æ®åŠ å¯†"></a>1.2 æ•æ„Ÿæ•°æ®åŠ å¯†</h4><p>å¯¹äºå…¶ä»–æ•æ„Ÿæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨AESç­‰å¯¹ç§°åŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncryptionService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SecretKey secretKey;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Cipher cipher;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">EncryptionService</span><span class="params">(<span class="meta">@Value(&quot;$&#123;encryption.key&#125;&quot;)</span> String secretKeyString)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// ä»é…ç½®ä¸­è·å–å¯†é’¥</span></span><br><span class="line">        <span class="keyword">byte</span>[] keyBytes = Base64.getDecoder().decode(secretKeyString);</span><br><span class="line">        <span class="keyword">this</span>.secretKey = <span class="keyword">new</span> SecretKeySpec(keyBytes, <span class="string">&quot;AES&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.cipher = Cipher.getInstance(<span class="string">&quot;AES/GCM/NoPadding&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åŠ å¯†æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">encrypt</span><span class="params">(String plainText)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (plainText == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç”ŸæˆéšæœºIV</span></span><br><span class="line">        <span class="keyword">byte</span>[] iv = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">12</span>];</span><br><span class="line">        <span class="keyword">new</span> SecureRandom().nextBytes(iv);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–åŠ å¯†å™¨</span></span><br><span class="line">        GCMParameterSpec parameterSpec = <span class="keyword">new</span> GCMParameterSpec(<span class="number">128</span>, iv);</span><br><span class="line">        cipher.init(Cipher.ENCRYPT_MODE, secretKey, parameterSpec);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åŠ å¯†æ•°æ®</span></span><br><span class="line">        <span class="keyword">byte</span>[] encryptedData = cipher.doFinal(plainText.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç»„åˆIVå’ŒåŠ å¯†æ•°æ®</span></span><br><span class="line">        ByteBuffer byteBuffer = ByteBuffer.allocate(iv.length + encryptedData.length);</span><br><span class="line">        byteBuffer.put(iv);</span><br><span class="line">        byteBuffer.put(encryptedData);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿”å›Base64ç¼–ç çš„åŠ å¯†æ•°æ®</span></span><br><span class="line">        <span class="keyword">return</span> Base64.getEncoder().encodeToString(byteBuffer.array());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è§£å¯†æ•°æ®</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">decrypt</span><span class="params">(String encryptedText)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (encryptedText == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è§£ç Base64åŠ å¯†æ•°æ®</span></span><br><span class="line">        <span class="keyword">byte</span>[] encryptedData = Base64.getDecoder().decode(encryptedText);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ†ç¦»IVå’ŒåŠ å¯†æ•°æ®</span></span><br><span class="line">        ByteBuffer byteBuffer = ByteBuffer.wrap(encryptedData);</span><br><span class="line">        <span class="keyword">byte</span>[] iv = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">12</span>];</span><br><span class="line">        byteBuffer.get(iv);</span><br><span class="line">        <span class="keyword">byte</span>[] cipherText = <span class="keyword">new</span> <span class="keyword">byte</span>[byteBuffer.remaining()];</span><br><span class="line">        byteBuffer.get(cipherText);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–è§£å¯†å™¨</span></span><br><span class="line">        GCMParameterSpec parameterSpec = <span class="keyword">new</span> GCMParameterSpec(<span class="number">128</span>, iv);</span><br><span class="line">        cipher.init(Cipher.DECRYPT_MODE, secretKey, parameterSpec);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è§£å¯†æ•°æ®</span></span><br><span class="line">        <span class="keyword">byte</span>[] decryptedData = cipher.doFinal(cipherText);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿”å›è§£å¯†åçš„æ˜æ–‡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(decryptedData, StandardCharsets.UTF_8);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentServiceImpl</span> <span class="keyword">implements</span> <span class="title">PaymentService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PaymentRepository paymentRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EncryptionService encryptionService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Payment <span class="title">createPayment</span><span class="params">(PaymentDTO paymentDTO)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºæ”¯ä»˜è®°å½•</span></span><br><span class="line">        Payment payment = <span class="keyword">new</span> Payment();</span><br><span class="line">        payment.setUserId(paymentDTO.getUserId());</span><br><span class="line">        payment.setAmount(paymentDTO.getAmount());</span><br><span class="line">        payment.setCurrency(paymentDTO.getCurrency());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åŠ å¯†é“¶è¡Œå¡å·</span></span><br><span class="line">        String encryptedCardNumber = encryptionService.encrypt(paymentDTO.getCardNumber());</span><br><span class="line">        payment.setCardNumber(encryptedCardNumber);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¿å­˜æ”¯ä»˜è®°å½•</span></span><br><span class="line">        <span class="keyword">return</span> paymentRepository.save(payment);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(readOnly = true)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Payment <span class="title">getPaymentById</span><span class="params">(Long id)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Payment payment = paymentRepository.findById(id)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> ResourceNotFoundException(<span class="string">&quot;Payment not found&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸éœ€è¦è§£å¯†æ•æ„Ÿæ•°æ®</span></span><br><span class="line">        <span class="keyword">return</span> payment;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional(readOnly = true)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Payment <span class="title">getPaymentDetailsById</span><span class="params">(Long id)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Payment payment = paymentRepository.findById(id)</span><br><span class="line">                .orElseThrow(() -&gt; <span class="keyword">new</span> ResourceNotFoundException(<span class="string">&quot;Payment not found&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åªæœ‰æˆæƒç”¨æˆ·æ‰èƒ½æŸ¥çœ‹è§£å¯†åçš„æ•æ„Ÿæ•°æ®</span></span><br><span class="line">        <span class="comment">// åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ·»åŠ æƒé™æ£€æŸ¥</span></span><br><span class="line">        String decryptedCardNumber = encryptionService.decrypt(payment.getCardNumber());</span><br><span class="line">        payment.setCardNumber(decryptedCardNumber);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> payment;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ•°æ®è„±æ•ä¸æ©ç "><a href="#2-æ•°æ®è„±æ•ä¸æ©ç " class="headerlink" title="2. æ•°æ®è„±æ•ä¸æ©ç "></a>2. æ•°æ®è„±æ•ä¸æ©ç </h3><p>å¯¹äºä¸éœ€è¦å®Œæ•´æ˜¾ç¤ºçš„æ•æ„Ÿæ•°æ®ï¼Œå¯ä»¥è¿›è¡Œè„±æ•æˆ–æ©ç å¤„ç†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataMaskingService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ©ç å¤„ç†é“¶è¡Œå¡å·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">maskCreditCard</span><span class="params">(String cardNumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (cardNumber == <span class="keyword">null</span> || cardNumber.length() &lt; <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> cardNumber;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> length = cardNumber.length();</span><br><span class="line">        <span class="keyword">int</span> startLength = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">int</span> endLength = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">int</span> maskLength = length - startLength - endLength;</span><br><span class="line">        </span><br><span class="line">        StringBuilder masked = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        masked.append(cardNumber.substring(<span class="number">0</span>, startLength));</span><br><span class="line">        masked.append(<span class="string">&quot;*&quot;</span>.repeat(maskLength));</span><br><span class="line">        masked.append(cardNumber.substring(length - endLength));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> masked.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ©ç å¤„ç†æ‰‹æœºå·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">maskPhoneNumber</span><span class="params">(String phoneNumber)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (phoneNumber == <span class="keyword">null</span> || phoneNumber.length() &lt; <span class="number">7</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> phoneNumber;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> length = phoneNumber.length();</span><br><span class="line">        <span class="keyword">int</span> startLength = <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">int</span> endLength = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">int</span> maskLength = length - startLength - endLength;</span><br><span class="line">        </span><br><span class="line">        StringBuilder masked = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        masked.append(phoneNumber.substring(<span class="number">0</span>, startLength));</span><br><span class="line">        masked.append(<span class="string">&quot;*&quot;</span>.repeat(maskLength));</span><br><span class="line">        masked.append(phoneNumber.substring(length - endLength));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> masked.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ©ç å¤„ç†é‚®ç®±</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">maskEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (email == <span class="keyword">null</span> || !email.contains(<span class="string">&quot;@&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> email;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        String[] parts = email.split(<span class="string">&quot;@&quot;</span>);</span><br><span class="line">        String username = parts[<span class="number">0</span>];</span><br><span class="line">        String domain = parts[<span class="number">1</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (username.length() &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> email;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> maskLength = Math.max(<span class="number">1</span>, username.length() - <span class="number">2</span>);</span><br><span class="line">        StringBuilder maskedUsername = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        maskedUsername.append(username.substring(<span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line">        maskedUsername.append(<span class="string">&quot;*&quot;</span>.repeat(maskLength));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> maskedUsername + <span class="string">&quot;@&quot;</span> + domain;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataMaskingService dataMaskingService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;UserResponseDTO&gt; <span class="title">getUserById</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> </span>&#123;</span><br><span class="line">        User user = userService.getUserById(id);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ›å»ºå“åº”DTOå¹¶è¿›è¡Œæ•°æ®è„±æ•</span></span><br><span class="line">        UserResponseDTO response = <span class="keyword">new</span> UserResponseDTO();</span><br><span class="line">        response.setId(user.getId());</span><br><span class="line">        response.setUsername(user.getUsername());</span><br><span class="line">        response.setEmail(dataMaskingService.maskEmail(user.getEmail()));</span><br><span class="line">        response.setPhoneNumber(dataMaskingService.maskPhoneNumber(user.getPhoneNumber()));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok(response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-å®‰å…¨çš„æ•°æ®åº“è®¿é—®"><a href="#3-å®‰å…¨çš„æ•°æ®åº“è®¿é—®" class="headerlink" title="3. å®‰å…¨çš„æ•°æ®åº“è®¿é—®"></a>3. å®‰å…¨çš„æ•°æ®åº“è®¿é—®</h3><p>ç¡®ä¿æ•°æ®åº“è®¿é—®çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢SQLæ³¨å…¥ç­‰æ”»å‡»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Order&gt; <span class="title">findOrdersByUserIdAndStatus</span><span class="params">(Long userId, String status)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢SQLæ³¨å…¥</span></span><br><span class="line">        String sql = <span class="string">&quot;SELECT * FROM orders WHERE user_id = ? AND status = ?&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, <span class="keyword">new</span> Object[]&#123;userId, status&#125;, <span class="keyword">new</span> OrderRowMapper());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Order&gt; <span class="title">searchOrders</span><span class="params">(String keyword)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å³ä½¿æ˜¯LIKEæŸ¥è¯¢ï¼Œä¹Ÿåº”ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</span></span><br><span class="line">        String sql = <span class="string">&quot;SELECT * FROM orders WHERE order_no LIKE ? OR customer_name LIKE ?&quot;</span>;</span><br><span class="line">        String likeKeyword = <span class="string">&quot;%&quot;</span> + keyword + <span class="string">&quot;%&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate.query(sql, <span class="keyword">new</span> Object[]&#123;likeKeyword, likeKeyword&#125;, <span class="keyword">new</span> OrderRowMapper());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨MyBatisè¿›è¡Œå‚æ•°åŒ–æŸ¥è¯¢</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨#&#123;&#125;å ä½ç¬¦ï¼ŒMyBatisä¼šè‡ªåŠ¨è¿›è¡Œå‚æ•°åŒ–å¤„ç†</span></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM users WHERE username = #&#123;username&#125; AND status = #&#123;status&#125;&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findByUsernameAndStatus</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;status&quot;)</span> String status)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åŠ¨æ€SQLä¹Ÿä½¿ç”¨#&#123;&#125;å ä½ç¬¦</span></span><br><span class="line">    <span class="meta">@Select(&quot;&lt;script&gt;SELECT * FROM users WHERE 1=1&quot; +</span></span><br><span class="line"><span class="meta">            &quot;&lt;if test=&#x27;username != null&#x27;&gt; AND username like CONCAT(&#x27;%&#x27;, #&#123;username&#125;, &#x27;%&#x27;)&lt;/if&gt;&quot; +</span></span><br><span class="line"><span class="meta">            &quot;&lt;if test=&#x27;status != null&#x27;&gt; AND status = #&#123;status&#125;&lt;/if&gt;&quot; +</span></span><br><span class="line"><span class="meta">            &quot;&lt;/script&gt;&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">searchUsers</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;status&quot;)</span> String status)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€Javaåº”ç”¨å®‰å…¨ç›‘æ§ä¸å®¡è®¡-ğŸ“Š"><a href="#å…­ã€Javaåº”ç”¨å®‰å…¨ç›‘æ§ä¸å®¡è®¡-ğŸ“Š" class="headerlink" title="å…­ã€Javaåº”ç”¨å®‰å…¨ç›‘æ§ä¸å®¡è®¡ ğŸ“Š"></a>å…­ã€Javaåº”ç”¨å®‰å…¨ç›‘æ§ä¸å®¡è®¡ ğŸ“Š</h2><h3 id="1-å®‰å…¨äº‹ä»¶æ—¥å¿—è®°å½•"><a href="#1-å®‰å…¨äº‹ä»¶æ—¥å¿—è®°å½•" class="headerlink" title="1. å®‰å…¨äº‹ä»¶æ—¥å¿—è®°å½•"></a>1. å®‰å…¨äº‹ä»¶æ—¥å¿—è®°å½•</h3><p>è®°å½•å®‰å…¨äº‹ä»¶æ—¥å¿—å¯¹äºå®‰å…¨å®¡è®¡å’Œé—®é¢˜æ’æŸ¥è‡³å…³é‡è¦ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityAuditAspect</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger auditLogger = LoggerFactory.getLogger(<span class="string">&quot;security-audit&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.example.controller.AuthController.login(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginPointcut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.example.controller.AuthController.logout(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logoutPointcut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.example.controller.AdminController.*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">adminOperationPointcut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@AfterReturning(pointcut = &quot;loginPointcut()&quot;, returning = &quot;result&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logSuccessfulLogin</span><span class="params">(JoinPoint joinPoint, Object result)</span> </span>&#123;</span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span> &amp;&amp; args[<span class="number">0</span>] <span class="keyword">instanceof</span> LoginRequest) &#123;</span><br><span class="line">            LoginRequest loginRequest = (LoginRequest) args[<span class="number">0</span>];</span><br><span class="line">            auditLogger.info(<span class="string">&quot;User login successful: username=&#123;&#125;, ip=&#123;&#125;&quot;</span>, </span><br><span class="line">                            loginRequest.getUsername(),</span><br><span class="line">                            getClientIp());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@AfterThrowing(pointcut = &quot;loginPointcut()&quot;, throwing = &quot;ex&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logFailedLogin</span><span class="params">(JoinPoint joinPoint, Exception ex)</span> </span>&#123;</span><br><span class="line">        Object[] args = joinPoint.getArgs();</span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span> &amp;&amp; args[<span class="number">0</span>] <span class="keyword">instanceof</span> LoginRequest) &#123;</span><br><span class="line">            LoginRequest loginRequest = (LoginRequest) args[<span class="number">0</span>];</span><br><span class="line">            auditLogger.warn(<span class="string">&quot;User login failed: username=&#123;&#125;, ip=&#123;&#125;, reason=&#123;&#125;&quot;</span>, </span><br><span class="line">                            loginRequest.getUsername(),</span><br><span class="line">                            getClientIp(),</span><br><span class="line">                            ex.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Around(&quot;adminOperationPointcut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">logAdminOperation</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        String username = authentication.getName();</span><br><span class="line">        String operation = joinPoint.getSignature().getName();</span><br><span class="line">        </span><br><span class="line">        auditLogger.info(<span class="string">&quot;Admin operation started: user=&#123;&#125;, operation=&#123;&#125;, params=&#123;&#125;, ip=&#123;&#125;&quot;</span>, </span><br><span class="line">                        username,</span><br><span class="line">                        operation,</span><br><span class="line">                        Arrays.toString(joinPoint.getArgs()),</span><br><span class="line">                        getClientIp());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Object result = joinPoint.proceed();</span><br><span class="line">            auditLogger.info(<span class="string">&quot;Admin operation completed: user=&#123;&#125;, operation=&#123;&#125;, ip=&#123;&#125;&quot;</span>, </span><br><span class="line">                            username,</span><br><span class="line">                            operation,</span><br><span class="line">                            getClientIp());</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            auditLogger.error(<span class="string">&quot;Admin operation failed: user=&#123;&#125;, operation=&#123;&#125;, ip=&#123;&#125;, error=&#123;&#125;&quot;</span>, </span><br><span class="line">                            username,</span><br><span class="line">                            operation,</span><br><span class="line">                            getClientIp(),</span><br><span class="line">                            e.getMessage());</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getClientIp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–å®¢æˆ·ç«¯IPåœ°å€</span></span><br><span class="line">        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();</span><br><span class="line">        String ip = request.getHeader(<span class="string">&quot;X-Forwarded-For&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="keyword">null</span> || ip.isEmpty() || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">&quot;Proxy-Client-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="keyword">null</span> || ip.isEmpty() || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            ip = request.getHeader(<span class="string">&quot;WL-Proxy-Client-IP&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ip == <span class="keyword">null</span> || ip.isEmpty() || <span class="string">&quot;unknown&quot;</span>.equalsIgnoreCase(ip)) &#123;</span><br><span class="line">            ip = request.getRemoteAddr();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ip;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-å¼‚å¸¸å¤„ç†ä¸å®‰å…¨å“åº”"><a href="#2-å¼‚å¸¸å¤„ç†ä¸å®‰å…¨å“åº”" class="headerlink" title="2. å¼‚å¸¸å¤„ç†ä¸å®‰å…¨å“åº”"></a>2. å¼‚å¸¸å¤„ç†ä¸å®‰å…¨å“åº”</h3><p>åˆç†çš„å¼‚å¸¸å¤„ç†å’Œå®‰å…¨å“åº”å¯ä»¥é˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†æœªæˆæƒè®¿é—®å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(AccessDeniedException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title">handleAccessDeniedException</span><span class="params">(AccessDeniedException ex)</span> </span>&#123;</span><br><span class="line">        logger.warn(<span class="string">&quot;Access denied: &#123;&#125;&quot;</span>, ex.getMessage());</span><br><span class="line">        ErrorResponse error = <span class="keyword">new</span> ErrorResponse(<span class="string">&quot;ACCESS_DENIED&quot;</span>, <span class="string">&quot;You do not have permission to access this resource&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(error, HttpStatus.FORBIDDEN);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†è®¤è¯å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(AuthenticationException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title">handleAuthenticationException</span><span class="params">(AuthenticationException ex)</span> </span>&#123;</span><br><span class="line">        logger.warn(<span class="string">&quot;Authentication failed: &#123;&#125;&quot;</span>, ex.getMessage());</span><br><span class="line">        ErrorResponse error = <span class="keyword">new</span> ErrorResponse(<span class="string">&quot;AUTHENTICATION_FAILED&quot;</span>, <span class="string">&quot;Authentication failed, please check your credentials&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(error, HttpStatus.UNAUTHORIZED);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†èµ„æºæœªæ‰¾åˆ°å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ResourceNotFoundException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title">handleResourceNotFoundException</span><span class="params">(ResourceNotFoundException ex)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Resource not found: &#123;&#125;&quot;</span>, ex.getMessage());</span><br><span class="line">        ErrorResponse error = <span class="keyword">new</span> ErrorResponse(<span class="string">&quot;RESOURCE_NOT_FOUND&quot;</span>, <span class="string">&quot;The requested resource could not be found&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(error, HttpStatus.NOT_FOUND);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†æ— æ•ˆè¯·æ±‚å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(BadRequestException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title">handleBadRequestException</span><span class="params">(BadRequestException ex)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Bad request: &#123;&#125;&quot;</span>, ex.getMessage());</span><br><span class="line">        ErrorResponse error = <span class="keyword">new</span> ErrorResponse(<span class="string">&quot;BAD_REQUEST&quot;</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(error, HttpStatus.BAD_REQUEST);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†æ‰€æœ‰å…¶ä»–å¼‚å¸¸ï¼Œä½†ä¸æš´éœ²è¯¦ç»†é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseEntity&lt;ErrorResponse&gt; <span class="title">handleGenericException</span><span class="params">(Exception ex)</span> </span>&#123;</span><br><span class="line">        logger.error(<span class="string">&quot;Unexpected error: &#123;&#125;&quot;</span>, ex.getMessage(), ex);</span><br><span class="line">        ErrorResponse error = <span class="keyword">new</span> ErrorResponse(<span class="string">&quot;INTERNAL_ERROR&quot;</span>, <span class="string">&quot;An unexpected error occurred, please try again later&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;&gt;(error, HttpStatus.INTERNAL_SERVER_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorResponse</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ErrorResponse</span><span class="params">(String code, String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-å®‰å…¨æ¼æ´æ‰«æä¸è‡ªåŠ¨åŒ–æ£€æµ‹"><a href="#3-å®‰å…¨æ¼æ´æ‰«æä¸è‡ªåŠ¨åŒ–æ£€æµ‹" class="headerlink" title="3. å®‰å…¨æ¼æ´æ‰«æä¸è‡ªåŠ¨åŒ–æ£€æµ‹"></a>3. å®‰å…¨æ¼æ´æ‰«æä¸è‡ªåŠ¨åŒ–æ£€æµ‹</h3><p>å®šæœŸè¿›è¡Œå®‰å…¨æ¼æ´æ‰«æå’Œè‡ªåŠ¨åŒ–æ£€æµ‹å¯ä»¥åŠæ—¶å‘ç°å’Œä¿®å¤å®‰å…¨é—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityScannerScheduler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SecurityScannerService securityScannerService;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œå®‰å…¨æ‰«æ</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 2 * * ?&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleSecurityScan</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        securityScannerService.performSecurityScan();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityScannerService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(SecurityScannerService.class);</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VulnerabilityRepository vulnerabilityRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmailService emailService;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰§è¡Œå®‰å…¨æ‰«æ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">performSecurityScan</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Starting scheduled security scan&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// æ‰§è¡Œä¾èµ–æ¼æ´æ‰«æ</span></span><br><span class="line">            List&lt;Vulnerability&gt; vulnerabilities = scanDependencies();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// è®°å½•æ¼æ´</span></span><br><span class="line">            <span class="keyword">for</span> (Vulnerability vuln : vulnerabilities) &#123;</span><br><span class="line">                vulnerabilityRepository.save(vuln);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¦‚æœå‘ç°é«˜é£é™©æ¼æ´ï¼Œå‘é€é‚®ä»¶å‘Šè­¦</span></span><br><span class="line">            List&lt;Vulnerability&gt; highRiskVulnerabilities = vulnerabilities.stream()</span><br><span class="line">                    .filter(v -&gt; <span class="string">&quot;HIGH&quot;</span>.equals(v.getSeverity()) || <span class="string">&quot;CRITICAL&quot;</span>.equals(v.getSeverity()))</span><br><span class="line">                    .collect(Collectors.toList());</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (!highRiskVulnerabilities.isEmpty()) &#123;</span><br><span class="line">                emailService.sendSecurityAlertEmail(highRiskVulnerabilities);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            logger.info(<span class="string">&quot;Security scan completed. Found &#123;&#125; vulnerabilities&quot;</span>, vulnerabilities.size());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;Security scan failed: &#123;&#125;&quot;</span>, e.getMessage(), e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰«æä¾èµ–æ¼æ´</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;Vulnerability&gt; <span class="title">scanDependencies</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Vulnerability&gt; vulnerabilities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨OWASP Dependency Checkæˆ–å…¶ä»–æ¼æ´æ‰«æå·¥å…·</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œä¸ºäº†ç¤ºä¾‹ï¼Œè¿”å›æ¨¡æ‹Ÿæ•°æ®</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿå‘ç°çš„æ¼æ´</span></span><br><span class="line">        vulnerabilities.add(<span class="keyword">new</span> Vulnerability(<span class="string">&quot;log4j-core&quot;</span>, <span class="string">&quot;2.14.1&quot;</span>, <span class="string">&quot;CVE-2021-44228&quot;</span>, <span class="string">&quot;CRITICAL&quot;</span>, <span class="string">&quot;Remote Code Execution&quot;</span>, <span class="string">&quot;Update to version 2.17.0 or later&quot;</span>));</span><br><span class="line">        vulnerabilities.add(<span class="keyword">new</span> Vulnerability(<span class="string">&quot;spring-security&quot;</span>, <span class="string">&quot;5.5.1&quot;</span>, <span class="string">&quot;CVE-2022-22965&quot;</span>, <span class="string">&quot;HIGH&quot;</span>, <span class="string">&quot;Remote Code Execution&quot;</span>, <span class="string">&quot;Update to version 5.6.3 or later&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> vulnerabilities;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€æ€»ç»“ä¸æœªæ¥å®‰å…¨è¶‹åŠ¿å±•æœ›-ğŸ“"><a href="#ä¸ƒã€æ€»ç»“ä¸æœªæ¥å®‰å…¨è¶‹åŠ¿å±•æœ›-ğŸ“" class="headerlink" title="ä¸ƒã€æ€»ç»“ä¸æœªæ¥å®‰å…¨è¶‹åŠ¿å±•æœ› ğŸ“"></a>ä¸ƒã€æ€»ç»“ä¸æœªæ¥å®‰å…¨è¶‹åŠ¿å±•æœ› ğŸ“</h2><p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£äº†Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ„å»ºçš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬èº«ä»½è®¤è¯ä¸è®¿é—®æ§åˆ¶ã€è¾“å…¥éªŒè¯ä¸è¾“å‡ºç¼–ç ã€æ•°æ®å®‰å…¨é˜²æŠ¤ã€å®‰å…¨ç›‘æ§ä¸å®¡è®¡ç­‰æ–¹é¢çš„å†…å®¹ã€‚</p>
<p>Javaåº”ç”¨å®‰å…¨çš„æœªæ¥å‘å±•è¶‹åŠ¿ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>é›¶ä¿¡ä»»æ¶æ„</strong>ï¼šé›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹å°†æˆä¸ºä¸»æµï¼Œå¼ºè°ƒâ€æ°¸ä¸ä¿¡ä»»ï¼Œå§‹ç»ˆéªŒè¯â€</li>
<li><strong>AIé©±åŠ¨çš„å®‰å…¨</strong>ï¼šäººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ æŠ€æœ¯å°†è¢«æ›´å¹¿æ³›åœ°åº”ç”¨äºå®‰å…¨å¨èƒæ£€æµ‹å’Œå“åº”</li>
<li><strong>DevSecOpsæ·±åŒ–</strong>ï¼šå®‰å…¨å°†æ›´æ·±å…¥åœ°é›†æˆåˆ°å¼€å‘å’Œè¿ç»´æµç¨‹ä¸­ï¼Œå®ç°â€å®‰å…¨å·¦ç§»â€</li>
<li><strong>å®¹å™¨å®‰å…¨ä¸äº‘åŸç”Ÿå®‰å…¨</strong>ï¼šéšç€å®¹å™¨åŒ–å’Œäº‘åŸç”ŸæŠ€æœ¯çš„æ™®åŠï¼Œå®¹å™¨å®‰å…¨å’Œäº‘åŸç”Ÿå®‰å…¨å°†å˜å¾—è¶Šæ¥è¶Šé‡è¦</li>
<li><strong>ä¾›åº”é“¾å®‰å…¨</strong>ï¼šè½¯ä»¶ä¾›åº”é“¾å®‰å…¨å°†å—åˆ°æ›´å¤šå…³æ³¨ï¼Œé˜²æ­¢ä¾›åº”é“¾æ”»å‡»</li>
<li><strong>éšç§è®¡ç®—</strong>ï¼šåœ¨ä¿æŠ¤æ•°æ®éšç§çš„å‰æä¸‹è¿›è¡Œæ•°æ®å¤„ç†å’Œåˆ†æçš„æŠ€æœ¯å°†å¾—åˆ°å‘å±•</li>
</ol>
<p>æ„å»ºä¸€ä¸ªå…¨é¢çš„Javaåº”ç”¨å®‰å…¨é˜²æŠ¤ä½“ç³»æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°å­¦ä¹ ã€å®è·µå’Œæ”¹è¿›ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿä¸ºä½ æä¾›ä¸€äº›æœ‰ç”¨çš„æŒ‡å¯¼å’Œå¯å‘ï¼Œå¸®åŠ©ä½ æ„å»ºæ›´å®‰å…¨çš„Javaåº”ç”¨ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ˜Š</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2025/05/20/cloud-native/2025-java-cloud-native-best-practices/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/05/20/cloud-native/2025-java-cloud-native-best-practices/" class="post-title-link" itemprop="url">Javaäº‘åŸç”Ÿåº”ç”¨æœ€ä½³å®è·µ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-05-20 00:00:00" itemprop="dateCreated datePublished" datetime="2025-05-20T00:00:00+08:00">2025-05-20</time>
    </span>

  
    <span id="/2025/05/20/cloud-native/2025-java-cloud-native-best-practices/" class="post-meta-item leancloud_visitors" data-flag-title="Javaäº‘åŸç”Ÿåº”ç”¨æœ€ä½³å®è·µ" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>17k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>15 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Javaäº‘åŸç”Ÿåº”ç”¨æœ€ä½³å®è·µ-â˜ï¸"><a href="#Javaäº‘åŸç”Ÿåº”ç”¨æœ€ä½³å®è·µ-â˜ï¸" class="headerlink" title="Javaäº‘åŸç”Ÿåº”ç”¨æœ€ä½³å®è·µ â˜ï¸"></a>Javaäº‘åŸç”Ÿåº”ç”¨æœ€ä½³å®è·µ â˜ï¸</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ åœ¨å½“ä»Šçš„äº‘è®¡ç®—æ—¶ä»£ï¼Œäº‘åŸç”Ÿå·²ç»æˆä¸ºæ„å»ºç°ä»£åŒ–åº”ç”¨çš„ä¸»æµèŒƒå¼ã€‚å¯¹äºJavaå¼€å‘è€…æ¥è¯´ï¼Œå¦‚ä½•å°†ä¼ ç»Ÿçš„Javaåº”ç”¨è½¬å˜ä¸ºäº‘åŸç”Ÿåº”ç”¨ï¼Œå……åˆ†åˆ©ç”¨äº‘å¹³å°çš„å¼¹æ€§å’Œæ‰©å±•æ€§ï¼Œæ˜¯ä¸€ä¸ªé‡è¦çš„è¯¾é¢˜ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å’Œå¤§å®¶åˆ†äº«Javaäº‘åŸç”Ÿåº”ç”¨çš„æœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ æ„å»ºæ›´é«˜æ•ˆã€æ›´å¯é ã€æ›´æ˜“äºç»´æŠ¤çš„äº‘åŸç”ŸJavaåº”ç”¨ã€‚</p>
<h2 id="ä¸€ã€äº‘åŸç”Ÿåº”ç”¨çš„æ ¸å¿ƒæ¦‚å¿µä¸åŸåˆ™-ğŸ“š"><a href="#ä¸€ã€äº‘åŸç”Ÿåº”ç”¨çš„æ ¸å¿ƒæ¦‚å¿µä¸åŸåˆ™-ğŸ“š" class="headerlink" title="ä¸€ã€äº‘åŸç”Ÿåº”ç”¨çš„æ ¸å¿ƒæ¦‚å¿µä¸åŸåˆ™ ğŸ“š"></a>ä¸€ã€äº‘åŸç”Ÿåº”ç”¨çš„æ ¸å¿ƒæ¦‚å¿µä¸åŸåˆ™ ğŸ“š</h2><h3 id="1-ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿåº”ç”¨ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿåº”ç”¨ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿåº”ç”¨ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯äº‘åŸç”Ÿåº”ç”¨ï¼Ÿ</h3><p>äº‘åŸç”Ÿåº”ç”¨æ˜¯æŒ‡ä¸ºäº‘ç¯å¢ƒè®¾è®¡å’Œä¼˜åŒ–çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå……åˆ†åˆ©ç”¨äº†äº‘å¹³å°æä¾›çš„å¼¹æ€§ã€å¯æ‰©å±•æ€§ã€å®¹é”™æ€§ç­‰ç‰¹æ€§ã€‚äº‘åŸç”Ÿåº”ç”¨é€šå¸¸å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>å®¹å™¨åŒ–</strong>ï¼šåº”ç”¨åŠå…¶ä¾èµ–è¢«æ‰“åŒ…åœ¨è½»é‡çº§å®¹å™¨ä¸­ï¼Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒä¸­ä¸€è‡´è¿è¡Œ</li>
<li><strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼šåº”ç”¨è¢«æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½</li>
<li><strong>DevOpsæ–‡åŒ–</strong>ï¼šå¼€å‘å’Œè¿ç»´ç´§å¯†åä½œï¼Œå®ç°æŒç»­é›†æˆã€æŒç»­éƒ¨ç½²å’Œè‡ªåŠ¨åŒ–è¿ç»´</li>
<li><strong>å¼¹æ€§æ‰©å±•</strong>ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©å±•æˆ–ç¼©å‡èµ„æº</li>
<li><strong>æ•…éšœè‡ªæ„ˆ</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤æ•…éšœ</li>
<li><strong>å£°æ˜å¼API</strong>ï¼šä½¿ç”¨å£°æ˜å¼æ–¹æ³•å®šä¹‰å’Œç®¡ç†åŸºç¡€è®¾æ–½å’Œåº”ç”¨</li>
</ul>
<h3 id="2-äº‘åŸç”Ÿåº”ç”¨çš„å…³é”®åŸåˆ™"><a href="#2-äº‘åŸç”Ÿåº”ç”¨çš„å…³é”®åŸåˆ™" class="headerlink" title="2. äº‘åŸç”Ÿåº”ç”¨çš„å…³é”®åŸåˆ™"></a>2. äº‘åŸç”Ÿåº”ç”¨çš„å…³é”®åŸåˆ™</h3><p>æ„å»ºäº‘åŸç”Ÿåº”ç”¨æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹å…³é”®åŸåˆ™ï¼š</p>
<ul>
<li><strong>12-Factor App</strong>ï¼š12è¦ç´ åº”ç”¨å®£è¨€ï¼Œæä¾›äº†æ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„æœ€ä½³å®è·µæŒ‡å—</li>
<li><strong>ä¸å¯å˜åŸºç¡€è®¾æ–½</strong>ï¼šåŸºç¡€è®¾æ–½ä¸€æ—¦éƒ¨ç½²å°±ä¸å†ä¿®æ”¹ï¼Œæ›´æ–°é€šè¿‡æ›¿æ¢å®ç°</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šå°†åº”ç”¨é€»è¾‘ä¸åŸºç¡€è®¾æ–½ã€é…ç½®ã€çŠ¶æ€ç­‰åˆ†ç¦»</li>
<li><strong>APIä¼˜å…ˆ</strong>ï¼šå°†APIè®¾è®¡ä½œä¸ºåº”ç”¨è®¾è®¡çš„æ ¸å¿ƒ</li>
<li><strong>è‡ªåŠ¨åŒ–ä¸€åˆ‡</strong>ï¼šå°½å¯èƒ½å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æµ‹è¯•ã€ç›‘æ§å’Œè¿ç»´</li>
</ul>
<h3 id="3-Javaä¸äº‘åŸç”Ÿçš„ç»“åˆ"><a href="#3-Javaä¸äº‘åŸç”Ÿçš„ç»“åˆ" class="headerlink" title="3. Javaä¸äº‘åŸç”Ÿçš„ç»“åˆ"></a>3. Javaä¸äº‘åŸç”Ÿçš„ç»“åˆ</h3><p>Javaä½œä¸ºä¸€é—¨æˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨äº‘åŸç”Ÿæ—¶ä»£ä»ç„¶å…·æœ‰å¼ºå¤§çš„ç”Ÿå‘½åŠ›ã€‚ç°ä»£JavaæŠ€æœ¯æ ˆï¼ˆå¦‚Spring Boot 3.xã€GraalVMç­‰ï¼‰ä¸ºæ„å»ºäº‘åŸç”Ÿåº”ç”¨æä¾›äº†è‰¯å¥½çš„æ”¯æŒï¼š</p>
<ul>
<li><strong>Spring Boot</strong>ï¼šç®€åŒ–äº†Javaåº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²</li>
<li><strong>Spring Cloud</strong>ï¼šæä¾›äº†å¾®æœåŠ¡æ¶æ„æ‰€éœ€çš„å„ç§å·¥å…·å’Œç»„ä»¶</li>
<li><strong>GraalVM</strong>ï¼šæä¾›äº†åŸç”Ÿé•œåƒæ”¯æŒï¼Œå¯ä»¥æ˜¾è‘—å‡å°åº”ç”¨ä½“ç§¯å’Œå¯åŠ¨æ—¶é—´</li>
<li><strong>Quarkus</strong>ï¼šä¸ºGraalVMä¼˜åŒ–çš„KubernetesåŸç”ŸJavaæ¡†æ¶</li>
<li><strong>Micronaut</strong>ï¼šè½»é‡çº§çš„JVMæ¡†æ¶ï¼Œä¸“ä¸ºäº‘åŸç”Ÿå’ŒServerlessè®¾è®¡</li>
</ul>
<h2 id="äºŒã€åŸºäºKubernetesçš„Javaåº”ç”¨å®¹å™¨åŒ–å®è·µ-ğŸ³"><a href="#äºŒã€åŸºäºKubernetesçš„Javaåº”ç”¨å®¹å™¨åŒ–å®è·µ-ğŸ³" class="headerlink" title="äºŒã€åŸºäºKubernetesçš„Javaåº”ç”¨å®¹å™¨åŒ–å®è·µ ğŸ³"></a>äºŒã€åŸºäºKubernetesçš„Javaåº”ç”¨å®¹å™¨åŒ–å®è·µ ğŸ³</h2><h3 id="1-å®¹å™¨åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ"><a href="#1-å®¹å™¨åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ" class="headerlink" title="1. å®¹å™¨åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ"></a>1. å®¹å™¨åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ</h3><p>å°†Javaåº”ç”¨å®¹å™¨åŒ–æ˜¯æ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„ç¬¬ä¸€æ­¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®¹å™¨åŒ–çš„æœ€ä½³å®è·µï¼š</p>
<h4 id="1-1-é€‰æ‹©åˆé€‚çš„åŸºç¡€é•œåƒ"><a href="#1-1-é€‰æ‹©åˆé€‚çš„åŸºç¡€é•œåƒ" class="headerlink" title="1.1 é€‰æ‹©åˆé€‚çš„åŸºç¡€é•œåƒ"></a>1.1 é€‰æ‹©åˆé€‚çš„åŸºç¡€é•œåƒ</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨èä½¿ç”¨å®˜æ–¹JDKé•œåƒæˆ–Alpine-based JDKé•œåƒä»¥å‡å°é•œåƒä½“ç§¯</span></span><br><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">17</span>-jre-alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶åº”ç”¨jaråŒ…</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> target/my-application.jar app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®JVMå‚æ•°</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_OPTS=<span class="string">&quot;-Xms256m -Xmx512m&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æš´éœ²ç«¯å£</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨åº”ç”¨</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;java <span class="variable">$JAVA_OPTS</span> -jar app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–"><a href="#1-2-å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–" class="headerlink" title="1.2 å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–"></a>1.2 å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–</h4><p>ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå¯ä»¥æ˜¾è‘—å‡å°æœ€ç»ˆé•œåƒçš„ä½“ç§¯ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ„å»ºé˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.9</span>-eclipse-temurin-<span class="number">17</span>-alpine AS builder</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /build</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> pom.xml .</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> src ./src</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mvn clean package -DskipTests</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œé˜¶æ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">17</span>-jre-alpine</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=builder /build/target/my-application.jar app.jar</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;java&quot;</span>, <span class="string">&quot;-jar&quot;</span>, <span class="string">&quot;app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3-JVMå‚æ•°ä¼˜åŒ–"><a href="#1-3-JVMå‚æ•°ä¼˜åŒ–" class="headerlink" title="1.3 JVMå‚æ•°ä¼˜åŒ–"></a>1.3 JVMå‚æ•°ä¼˜åŒ–</h4><p>ä¸ºå®¹å™¨ç¯å¢ƒä¼˜åŒ–JVMå‚æ•°æ˜¯æé«˜Javaåº”ç”¨åœ¨å®¹å™¨ä¸­æ€§èƒ½çš„å…³é”®ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å®¹å™¨æ„ŸçŸ¥çš„JVMå‚æ•°</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_OPTS=<span class="string">&quot;\</span></span><br><span class="line"><span class="string">    -XX:+UseContainerSupport \</span></span><br><span class="line"><span class="string">    -XX:MaxRAMPercentage=75.0 \</span></span><br><span class="line"><span class="string">    -XX:+UseG1GC \</span></span><br><span class="line"><span class="string">    -XX:+UseStringDeduplication \</span></span><br><span class="line"><span class="string">    -Djava.security.egd=file:/dev/./urandom&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;java <span class="variable">$JAVA_OPTS</span> -jar app.jar&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Kubernetesèµ„æºé…ç½®ä¼˜åŒ–"><a href="#2-Kubernetesèµ„æºé…ç½®ä¼˜åŒ–" class="headerlink" title="2. Kubernetesèµ„æºé…ç½®ä¼˜åŒ–"></a>2. Kubernetesèµ„æºé…ç½®ä¼˜åŒ–</h3><p>åœ¨Kubernetesä¸­éƒ¨ç½²Javaåº”ç”¨æ—¶ï¼Œåˆç†é…ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶éå¸¸é‡è¦ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-java-application</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">my-java-application</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">my-java-application</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">my-java-application</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">my-java-application:latest</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">requests:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;500m&quot;</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">&quot;1Gi&quot;</span></span><br><span class="line">          <span class="attr">limits:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">&quot;2Gi&quot;</span></span><br><span class="line">        <span class="attr">readinessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/actuator/health/readiness</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">        <span class="attr">livenessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/actuator/health/liveness</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">60</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">30</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">JAVA_OPTS</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">&quot;-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-å¥åº·æ£€æŸ¥ä¸å°±ç»ªæ¢é’ˆé…ç½®"><a href="#3-å¥åº·æ£€æŸ¥ä¸å°±ç»ªæ¢é’ˆé…ç½®" class="headerlink" title="3. å¥åº·æ£€æŸ¥ä¸å°±ç»ªæ¢é’ˆé…ç½®"></a>3. å¥åº·æ£€æŸ¥ä¸å°±ç»ªæ¢é’ˆé…ç½®</h3><p>åœ¨Kubernetesä¸­é…ç½®é€‚å½“çš„å¥åº·æ£€æŸ¥å’Œå°±ç»ªæ¢é’ˆå¯¹äºç¡®ä¿åº”ç”¨çš„å¯é æ€§è‡³å…³é‡è¦ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Spring Bootåº”ç”¨ä¸­çš„å¥åº·æ£€æŸ¥ç«¯ç‚¹é…ç½®</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// application.propertiesé…ç½®</span></span><br><span class="line">management.endpoints.web.exposure.include=health,info,prometheus</span><br><span class="line">management.endpoint.health.probes.enabled=<span class="keyword">true</span></span><br><span class="line">management.endpoint.health.show-details=when_authorized</span><br><span class="line">management.health.db.enabled=<span class="keyword">true</span></span><br><span class="line">management.health.diskspace.enabled=<span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰å¥åº·æ£€æŸ¥æŒ‡ç¤ºå™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseHealthIndicator</span> <span class="keyword">implements</span> <span class="title">HealthIndicator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Health <span class="title">health</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (Connection connection = dataSource.getConnection()) &#123;</span><br><span class="line">            Statement statement = connection.createStatement();</span><br><span class="line">            ResultSet resultSet = statement.executeQuery(<span class="string">&quot;SELECT 1&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (resultSet.next()) &#123;</span><br><span class="line">                <span class="keyword">return</span> Health.up().withDetail(<span class="string">&quot;database&quot;</span>, <span class="string">&quot;Available&quot;</span>).build();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> Health.down().withException(e).build();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Health.unknown().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€Javaå¾®æœåŠ¡çš„äº‘åŸç”Ÿæ”¹é€ æ–¹æ¡ˆ-ğŸ”§"><a href="#ä¸‰ã€Javaå¾®æœåŠ¡çš„äº‘åŸç”Ÿæ”¹é€ æ–¹æ¡ˆ-ğŸ”§" class="headerlink" title="ä¸‰ã€Javaå¾®æœåŠ¡çš„äº‘åŸç”Ÿæ”¹é€ æ–¹æ¡ˆ ğŸ”§"></a>ä¸‰ã€Javaå¾®æœåŠ¡çš„äº‘åŸç”Ÿæ”¹é€ æ–¹æ¡ˆ ğŸ”§</h2><h3 id="1-ä¼ ç»ŸJavaåº”ç”¨çš„äº‘åŸç”Ÿæ”¹é€ è·¯å¾„"><a href="#1-ä¼ ç»ŸJavaåº”ç”¨çš„äº‘åŸç”Ÿæ”¹é€ è·¯å¾„" class="headerlink" title="1. ä¼ ç»ŸJavaåº”ç”¨çš„äº‘åŸç”Ÿæ”¹é€ è·¯å¾„"></a>1. ä¼ ç»ŸJavaåº”ç”¨çš„äº‘åŸç”Ÿæ”¹é€ è·¯å¾„</h3><p>å°†ä¼ ç»ŸJavaåº”ç”¨æ”¹é€ ä¸ºäº‘åŸç”Ÿåº”ç”¨æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ï¼Œé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>å®¹å™¨åŒ–</strong>ï¼šå°†åº”ç”¨æ‰“åŒ…åˆ°å®¹å™¨ä¸­</li>
<li><strong>å¾®æœåŠ¡åŒ–</strong>ï¼šå°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå¾®æœåŠ¡</li>
<li><strong>æ— çŠ¶æ€åŒ–</strong>ï¼šå°†åº”ç”¨æ”¹é€ ä¸ºæ— çŠ¶æ€æˆ–æœ‰çŠ¶æ€åˆ†ç¦»</li>
<li><strong>APIç½‘å…³é›†æˆ</strong>ï¼šå¼•å…¥APIç½‘å…³ç»Ÿä¸€ç®¡ç†æœåŠ¡è®¿é—®</li>
<li><strong>é…ç½®å¤–éƒ¨åŒ–</strong>ï¼šå°†é…ç½®ä»ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥</li>
<li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šé›†æˆæœåŠ¡æ³¨å†Œå‘ç°æœºåˆ¶</li>
<li><strong>å¼¹æ€§ä¼¸ç¼©</strong>ï¼šå®ç°åŸºäºè´Ÿè½½çš„è‡ªåŠ¨ä¼¸ç¼©</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šå¢å¼ºåº”ç”¨çš„ç›‘æ§å’Œæ—¥å¿—èƒ½åŠ›</li>
</ol>
<h3 id="2-æœåŠ¡ç½‘æ ¼åœ¨Javaå¾®æœåŠ¡ä¸­çš„åº”ç”¨"><a href="#2-æœåŠ¡ç½‘æ ¼åœ¨Javaå¾®æœåŠ¡ä¸­çš„åº”ç”¨" class="headerlink" title="2. æœåŠ¡ç½‘æ ¼åœ¨Javaå¾®æœåŠ¡ä¸­çš„åº”ç”¨"></a>2. æœåŠ¡ç½‘æ ¼åœ¨Javaå¾®æœåŠ¡ä¸­çš„åº”ç”¨</h3><p>æœåŠ¡ç½‘æ ¼ï¼ˆå¦‚Istioï¼‰å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†å’Œç›‘æ§å¾®æœåŠ¡ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ºJavaåº”ç”¨å¯ç”¨Istioä»£ç†æ³¨å…¥</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-java-service</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">my-java-service</span></span><br><span class="line">    <span class="attr">istio-injection:</span> <span class="string">enabled</span>  <span class="comment"># å¯ç”¨Istioä»£ç†æ³¨å…¥</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="comment"># ... å…¶ä»–é…ç½®</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Istioè¿›è¡Œæµé‡ç®¡ç†ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®é‡‘ä¸é›€å‘å¸ƒ</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-java-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">my-java-service</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">my-java-service</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v1</span></span><br><span class="line">      <span class="attr">weight:</span> <span class="number">90</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">my-java-service</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v2</span></span><br><span class="line">      <span class="attr">weight:</span> <span class="number">10</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-java-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">my-java-service</span></span><br><span class="line">  <span class="attr">subsets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v1</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v2</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v2</span></span><br></pre></td></tr></table></figure>

<h3 id="3-é…ç½®ç®¡ç†ä¸æœåŠ¡å‘ç°ä¼˜åŒ–"><a href="#3-é…ç½®ç®¡ç†ä¸æœåŠ¡å‘ç°ä¼˜åŒ–" class="headerlink" title="3. é…ç½®ç®¡ç†ä¸æœåŠ¡å‘ç°ä¼˜åŒ–"></a>3. é…ç½®ç®¡ç†ä¸æœåŠ¡å‘ç°ä¼˜åŒ–</h3><p>åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œé…ç½®ç®¡ç†å’ŒæœåŠ¡å‘ç°æ˜¯éå¸¸é‡è¦çš„åŸºç¡€è®¾æ–½ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨Spring Cloud Kubernetesè¿›è¡Œé…ç½®ç®¡ç†</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-java-service-config</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">application.properties:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    server.port=8080</span></span><br><span class="line"><span class="string">    spring.datasource.url=jdbc:mysql://mysql:3306/mydb</span></span><br><span class="line"><span class="string">    spring.datasource.username=root</span></span><br><span class="line"><span class="string">    spring.datasource.password=password</span></span><br><span class="line"><span class="string">    logging.level.root=INFO</span></span><br></pre></td></tr></table></figure>

<p>åœ¨Spring Bootåº”ç”¨ä¸­ä½¿ç”¨ConfigMapï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åº”ç”¨éƒ¨ç½²é…ç½®</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-java-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="comment"># ... å…¶ä»–é…ç½®</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">my-java-service</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">my-java-service:latest</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config-volume</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/config</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config-volume</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">my-java-service-config</span></span><br></pre></td></tr></table></figure>

<h2 id="å››ã€GraalVMä¸JavaåŸç”Ÿé•œåƒä¼˜åŒ–-ğŸš€"><a href="#å››ã€GraalVMä¸JavaåŸç”Ÿé•œåƒä¼˜åŒ–-ğŸš€" class="headerlink" title="å››ã€GraalVMä¸JavaåŸç”Ÿé•œåƒä¼˜åŒ– ğŸš€"></a>å››ã€GraalVMä¸JavaåŸç”Ÿé•œåƒä¼˜åŒ– ğŸš€</h2><h3 id="1-GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯"><a href="#1-GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯" class="headerlink" title="1. GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯"></a>1. GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯</h3><p>GraalVMæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå¯ä»¥å°†Javaåº”ç”¨ç¼–è¯‘ä¸ºåŸç”Ÿé•œåƒï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯åŠ¨é€Ÿåº¦å¿«</strong>ï¼šåŸç”Ÿé•œåƒçš„å¯åŠ¨æ—¶é—´é€šå¸¸åœ¨æ¯«ç§’çº§åˆ«</li>
<li><strong>å†…å­˜å ç”¨å°</strong>ï¼šç›¸æ¯”ä¼ ç»ŸJVMï¼ŒåŸç”Ÿé•œåƒçš„å†…å­˜å ç”¨æ˜¾è‘—å‡å°‘</li>
<li><strong>å¯åŠ¨ä½“ç§¯å°</strong>ï¼šåŸç”Ÿé•œåƒçš„ä½“ç§¯é€šå¸¸åªæœ‰ä¼ ç»ŸJARåŒ…çš„å‡ åˆ†ä¹‹ä¸€</li>
<li><strong>å³æ—¶å“åº”</strong>ï¼šé€‚åˆéœ€è¦å¿«é€Ÿå¯åŠ¨å’Œå³æ—¶å“åº”çš„åœºæ™¯</li>
</ul>
<p>GraalVMåŸç”Ÿé•œåƒç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li><strong>Serverlesså‡½æ•°</strong>ï¼šå¦‚AWS Lambdaã€é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ç­‰</li>
<li><strong>å¾®æœåŠ¡</strong>ï¼šç‰¹åˆ«æ˜¯éœ€è¦å¿«é€Ÿå¯åŠ¨çš„å¾®æœåŠ¡</li>
<li><strong>å®¹å™¨åŒ–åº”ç”¨</strong>ï¼šå‡å°å®¹å™¨é•œåƒä½“ç§¯ï¼Œæé«˜å¯åŠ¨é€Ÿåº¦</li>
<li><strong>è¾¹ç¼˜è®¡ç®—</strong>ï¼šèµ„æºå—é™ç¯å¢ƒä¸‹çš„åº”ç”¨</li>
</ul>
<h3 id="2-Spring-Bootåº”ç”¨çš„åŸç”Ÿé•œåƒæ„å»º"><a href="#2-Spring-Bootåº”ç”¨çš„åŸç”Ÿé•œåƒæ„å»º" class="headerlink" title="2. Spring Bootåº”ç”¨çš„åŸç”Ÿé•œåƒæ„å»º"></a>2. Spring Bootåº”ç”¨çš„åŸç”Ÿé•œåƒæ„å»º</h3><p>Spring Boot 3.xæä¾›äº†å¯¹GraalVMåŸç”Ÿé•œåƒçš„å®˜æ–¹æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Spring Nativeæ¥æ„å»ºåŸç”Ÿé•œåƒï¼š</p>
<h4 id="2-1-æ·»åŠ Spring-Nativeä¾èµ–"><a href="#2-1-æ·»åŠ Spring-Nativeä¾èµ–" class="headerlink" title="2.1 æ·»åŠ Spring Nativeä¾èµ–"></a>2.1 æ·»åŠ Spring Nativeä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.experimental<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-native<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">builder</span>&gt;</span>paketobuildpacks/builder:tiny<span class="tag">&lt;/<span class="name">builder</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">env</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">BP_NATIVE_IMAGE</span>&gt;</span>true<span class="tag">&lt;/<span class="name">BP_NATIVE_IMAGE</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-æ„å»ºåŸç”Ÿé•œåƒ"><a href="#2-2-æ„å»ºåŸç”Ÿé•œåƒ" class="headerlink" title="2.2 æ„å»ºåŸç”Ÿé•œåƒ"></a>2.2 æ„å»ºåŸç”Ÿé•œåƒ</h4><p>ä½¿ç”¨Mavenæ„å»ºåŸç”Ÿé•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -Pnative spring-boot:build-image</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨GraalVMåŸç”Ÿé•œåƒæ„å»ºå·¥å…·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…GraalVM Native Imageå·¥å…·</span></span><br><span class="line">gu install native-image</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºJARåŒ…</span></span><br><span class="line">mvn clean package -DskipTests</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºåŸç”Ÿé•œåƒ</span></span><br><span class="line">native-image -jar target/my-application.jar</span><br><span class="line">s</span><br></pre></td></tr></table></figure>

<h3 id="3-åŸç”Ÿé•œåƒçš„æ€§èƒ½è°ƒä¼˜ä¸é™åˆ¶"><a href="#3-åŸç”Ÿé•œåƒçš„æ€§èƒ½è°ƒä¼˜ä¸é™åˆ¶" class="headerlink" title="3. åŸç”Ÿé•œåƒçš„æ€§èƒ½è°ƒä¼˜ä¸é™åˆ¶"></a>3. åŸç”Ÿé•œåƒçš„æ€§èƒ½è°ƒä¼˜ä¸é™åˆ¶</h3><p>è™½ç„¶GraalVMåŸç”Ÿé•œåƒæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›é™åˆ¶å’Œéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<h4 id="3-1-åå°„ä¸åŠ¨æ€ç±»åŠ è½½å¤„ç†"><a href="#3-1-åå°„ä¸åŠ¨æ€ç±»åŠ è½½å¤„ç†" class="headerlink" title="3.1 åå°„ä¸åŠ¨æ€ç±»åŠ è½½å¤„ç†"></a>3.1 åå°„ä¸åŠ¨æ€ç±»åŠ è½½å¤„ç†</h4><p>GraalVMåŸç”Ÿé•œåƒåœ¨ç¼–è¯‘æ—¶éœ€è¦çŸ¥é“æ‰€æœ‰å°†åœ¨è¿è¡Œæ—¶ä½¿ç”¨çš„ç±»ã€æ–¹æ³•å’Œå­—æ®µã€‚å¯¹äºä½¿ç”¨åå°„ã€åŠ¨æ€ç±»åŠ è½½ç­‰ç‰¹æ€§çš„ä»£ç ï¼Œéœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨@NativeHintæ³¨è§£æä¾›åå°„ä¿¡æ¯</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@NativeHint(</span></span><br><span class="line"><span class="meta">    types = @TypeHint(</span></span><br><span class="line"><span class="meta">        types = &#123; com.example.User.class, com.example.Order.class &#125;,</span></span><br><span class="line"><span class="meta">        access = &#123; AccessBits.ALL &#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ä½¿ç”¨åå°„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;reflect-config&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;com.example.User&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;allDeclaredConstructors&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;allDeclaredFields&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">&quot;allDeclaredMethods&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-æ€§èƒ½ç›‘æ§ä¸åˆ†æ"><a href="#3-2-æ€§èƒ½ç›‘æ§ä¸åˆ†æ" class="headerlink" title="3.2 æ€§èƒ½ç›‘æ§ä¸åˆ†æ"></a>3.2 æ€§èƒ½ç›‘æ§ä¸åˆ†æ</h4><p>åŸç”Ÿé•œåƒçš„æ€§èƒ½ç›‘æ§å’Œåˆ†æä¸ä¼ ç»ŸJVMåº”ç”¨æœ‰æ‰€ä¸åŒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨Micrometerè¿›è¡ŒæŒ‡æ ‡æ”¶é›†</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">MeterRegistryCustomizer&lt;MeterRegistry&gt; <span class="title">metricsCommonTags</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> registry -&gt; registry.config().commonTags(<span class="string">&quot;application&quot;</span>, <span class="string">&quot;my-application&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®PrometheusæŒ‡æ ‡å¯¼å‡º</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">prometheus</span></span><br><span class="line">  <span class="attr">metrics:</span></span><br><span class="line">    <span class="attr">export:</span></span><br><span class="line">      <span class="attr">prometheus:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€Serverlessä¸å‡½æ•°è®¡ç®—ä¸­çš„Javaåº”ç”¨-â˜ï¸"><a href="#äº”ã€Serverlessä¸å‡½æ•°è®¡ç®—ä¸­çš„Javaåº”ç”¨-â˜ï¸" class="headerlink" title="äº”ã€Serverlessä¸å‡½æ•°è®¡ç®—ä¸­çš„Javaåº”ç”¨ â˜ï¸"></a>äº”ã€Serverlessä¸å‡½æ•°è®¡ç®—ä¸­çš„Javaåº”ç”¨ â˜ï¸</h2><h3 id="1-Javaåœ¨Serverlessç¯å¢ƒä¸­çš„æŒ‘æˆ˜ä¸åº”å¯¹ç­–ç•¥"><a href="#1-Javaåœ¨Serverlessç¯å¢ƒä¸­çš„æŒ‘æˆ˜ä¸åº”å¯¹ç­–ç•¥" class="headerlink" title="1. Javaåœ¨Serverlessç¯å¢ƒä¸­çš„æŒ‘æˆ˜ä¸åº”å¯¹ç­–ç•¥"></a>1. Javaåœ¨Serverlessç¯å¢ƒä¸­çš„æŒ‘æˆ˜ä¸åº”å¯¹ç­–ç•¥</h3><p>Javaåœ¨Serverlessç¯å¢ƒä¸­é¢ä¸´ä¸€äº›æŒ‘æˆ˜ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å†·å¯åŠ¨æ—¶é—´é•¿</strong>ï¼šä¼ ç»ŸJVMçš„å¯åŠ¨æ—¶é—´è¾ƒé•¿ï¼Œå¯èƒ½å¯¼è‡´å‡½æ•°è°ƒç”¨å»¶è¿Ÿ</li>
<li><strong>å†…å­˜å ç”¨å¤§</strong>ï¼šJVMæœ¬èº«éœ€è¦ä¸€å®šçš„å†…å­˜èµ„æº</li>
<li><strong>é•œåƒä½“ç§¯å¤§</strong>ï¼šä¼ ç»ŸJavaåº”ç”¨çš„å®¹å™¨é•œåƒä½“ç§¯è¾ƒå¤§</li>
<li><strong>ä¸é€‚åˆçŸ­æ—¶é—´æ‰§è¡Œçš„ä»»åŠ¡</strong>ï¼šå¯¹äºæ‰§è¡Œæ—¶é—´éå¸¸çŸ­çš„ä»»åŠ¡ï¼ŒJVMçš„å¯åŠ¨æˆæœ¬å¯èƒ½è¶…è¿‡ä»»åŠ¡æœ¬èº«çš„æ‰§è¡Œæˆæœ¬</li>
</ul>
<p>é’ˆå¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–ä»¥ä¸‹åº”å¯¹ç­–ç•¥ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨GraalVMåŸç”Ÿé•œåƒ</strong>ï¼šæ˜¾è‘—å‡å°å¯åŠ¨æ—¶é—´å’Œå†…å­˜å ç”¨</li>
<li><strong>ä¼˜åŒ–å‡½æ•°ä»£ç </strong>ï¼šå°½é‡å‡å°å‡½æ•°çš„ä»£ç ä½“ç§¯å’Œä¾èµ–</li>
<li><strong>ä½¿ç”¨ä¸“ç”¨çš„Serverless Javaæ¡†æ¶</strong>ï¼šå¦‚Quarkusã€Micronautç­‰</li>
<li><strong>é…ç½®é€‚å½“çš„å‡½æ•°è¶…æ—¶æ—¶é—´å’Œå†…å­˜</strong>ï¼šæ ¹æ®å®é™…éœ€æ±‚é…ç½®å‡½æ•°å‚æ•°</li>
<li><strong>é¢„çƒ­æœºåˆ¶</strong>ï¼šå¯¹äºå…³é”®å‡½æ•°ï¼Œå¯ä»¥é…ç½®é¢„çƒ­æœºåˆ¶å‡å°‘å†·å¯åŠ¨</li>
</ul>
<h3 id="2-ä½¿ç”¨Quarkuså¼€å‘Serverless-Javaå‡½æ•°"><a href="#2-ä½¿ç”¨Quarkuså¼€å‘Serverless-Javaå‡½æ•°" class="headerlink" title="2. ä½¿ç”¨Quarkuså¼€å‘Serverless Javaå‡½æ•°"></a>2. ä½¿ç”¨Quarkuså¼€å‘Serverless Javaå‡½æ•°</h3><p>Quarkusæ˜¯ä¸€ä¸ªä¸ºGraalVMå’ŒHotSpotä¼˜åŒ–çš„KubernetesåŸç”ŸJavaæ¡†æ¶ï¼Œéå¸¸é€‚åˆå¼€å‘Serverlesså‡½æ•°ï¼š</p>
<h4 id="2-1-åˆ›å»ºQuarkuså‡½æ•°é¡¹ç›®"><a href="#2-1-åˆ›å»ºQuarkuså‡½æ•°é¡¹ç›®" class="headerlink" title="2.1 åˆ›å»ºQuarkuså‡½æ•°é¡¹ç›®"></a>2.1 åˆ›å»ºQuarkuså‡½æ•°é¡¹ç›®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨Quarkus CLIåˆ›å»ºé¡¹ç›®</span></span><br><span class="line">quarkus create app com.example:serverless-function:1.0.0-SNAPSHOT --extension=aws-lambda</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ä½¿ç”¨Maven</span></span><br><span class="line">mvn io.quarkus:quarkus-maven-plugin:3.2.0.Final:create \</span><br><span class="line">    -DprojectGroupId=com.example \</span><br><span class="line">    -DprojectArtifactId=serverless-function \</span><br><span class="line">    -Dextensions=<span class="string">&quot;aws-lambda&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-å®ç°Lambdaå‡½æ•°"><a href="#2-2-å®ç°Lambdaå‡½æ•°" class="headerlink" title="2.2 å®ç°Lambdaå‡½æ•°"></a>2.2 å®ç°Lambdaå‡½æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.inject.Inject;</span><br><span class="line"><span class="keyword">import</span> software.amazon.awssdk.services.dynamodb.DynamoDbClient;</span><br><span class="line"><span class="keyword">import</span> software.amazon.awssdk.services.dynamodb.model.PutItemRequest;</span><br><span class="line"><span class="keyword">import</span> software.amazon.lambda.powertools.logging.Logging;</span><br><span class="line"><span class="keyword">import</span> software.amazon.lambda.powertools.metrics.Metrics;</span><br><span class="line"><span class="keyword">import</span> software.amazon.lambda.powertools.tracing.Tracing;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderHandler</span> <span class="keyword">implements</span> <span class="title">RequestHandler</span>&lt;<span class="title">APIGatewayProxyRequestEvent</span>, <span class="title">APIGatewayProxyResponseEvent</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    DynamoDbClient dynamoDbClient;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Logging(logEvent = true)</span></span><br><span class="line">    <span class="meta">@Metrics</span></span><br><span class="line">    <span class="meta">@Tracing</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> APIGatewayProxyResponseEvent <span class="title">handleRequest</span><span class="params">(APIGatewayProxyRequestEvent input, Context context)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†è®¢å•è¯·æ±‚</span></span><br><span class="line">        String requestBody = input.getBody();</span><br><span class="line">        Order order = JsonbBuilder.create().fromJson(requestBody, Order.class);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¿å­˜è®¢å•åˆ°DynamoDB</span></span><br><span class="line">        dynamoDbClient.putItem(PutItemRequest.builder()</span><br><span class="line">                .tableName(<span class="string">&quot;orders&quot;</span>)</span><br><span class="line">                .item(Map.of(</span><br><span class="line">                        <span class="string">&quot;id&quot;</span>, AttributeValue.builder().s(order.getId()).build(),</span><br><span class="line">                        <span class="string">&quot;productId&quot;</span>, AttributeValue.builder().s(order.getProductId()).build(),</span><br><span class="line">                        <span class="string">&quot;quantity&quot;</span>, AttributeValue.builder().n(String.valueOf(order.getQuantity())).build()</span><br><span class="line">                ))</span><br><span class="line">                .build());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è¿”å›å“åº”</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> APIGatewayProxyResponseEvent()</span><br><span class="line">                .withStatusCode(<span class="number">200</span>)</span><br><span class="line">                .withBody(<span class="string">&quot;Order created successfully&quot;</span>)</span><br><span class="line">                .withHeaders(Map.of(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/plain&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-æ„å»ºä¸éƒ¨ç½²Quarkuså‡½æ•°"><a href="#2-3-æ„å»ºä¸éƒ¨ç½²Quarkuså‡½æ•°" class="headerlink" title="2.3 æ„å»ºä¸éƒ¨ç½²Quarkuså‡½æ•°"></a>2.3 æ„å»ºä¸éƒ¨ç½²Quarkuså‡½æ•°</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ„å»ºåŸç”Ÿé•œåƒ</span></span><br><span class="line">./mvnw package -Pnative -DskipTests</span><br><span class="line"></span><br><span class="line"><span class="comment"># éƒ¨ç½²åˆ°AWS Lambda</span></span><br><span class="line">aws lambda create-function \</span><br><span class="line">    --function-name order-handler \</span><br><span class="line">    --handler io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest \</span><br><span class="line">    --runtime provided.al2 \</span><br><span class="line">    --role arn:aws:iam::123456789012:role/lambda-role \</span><br><span class="line">    --code S3Bucket=my-bucket,S3Key=function.zip \</span><br><span class="line">    --memory-size 256 \</span><br><span class="line">    --timeout 15</span><br></pre></td></tr></table></figure>

<h3 id="3-AWS-Lambdaä¸Azure-Functionsçš„Javaæœ€ä½³å®è·µ"><a href="#3-AWS-Lambdaä¸Azure-Functionsçš„Javaæœ€ä½³å®è·µ" class="headerlink" title="3. AWS Lambdaä¸Azure Functionsçš„Javaæœ€ä½³å®è·µ"></a>3. AWS Lambdaä¸Azure Functionsçš„Javaæœ€ä½³å®è·µ</h3><p>ä»¥ä¸‹æ˜¯åœ¨AWS Lambdaå’ŒAzure Functionsç­‰Serverlesså¹³å°ä¸Šä½¿ç”¨Javaçš„æœ€ä½³å®è·µï¼š</p>
<h4 id="3-1-å‡½æ•°è®¾è®¡æœ€ä½³å®è·µ"><a href="#3-1-å‡½æ•°è®¾è®¡æœ€ä½³å®è·µ" class="headerlink" title="3.1 å‡½æ•°è®¾è®¡æœ€ä½³å®è·µ"></a>3.1 å‡½æ•°è®¾è®¡æœ€ä½³å®è·µ</h4><ul>
<li><strong>ä¿æŒå‡½æ•°ç®€æ´</strong>ï¼šæ¯ä¸ªå‡½æ•°åªè´Ÿè´£ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡åŠŸèƒ½</li>
<li><strong>ä¼˜åŒ–ä¾èµ–ç®¡ç†</strong>ï¼šåªåŒ…å«å¿…è¦çš„ä¾èµ–ï¼Œä½¿ç”¨ä¾èµ–åˆ†æå·¥å…·æ£€æµ‹å’Œç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–</li>
<li><strong>ä½¿ç”¨å‡½æ•°å¹‚ç­‰æ€§è®¾è®¡</strong>ï¼šç¡®ä¿å‡½æ•°å¯ä»¥è¢«å®‰å…¨åœ°é‡å¤æ‰§è¡Œ</li>
<li><strong>å®ç°é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</strong>ï¼šå¤„ç†å¯èƒ½çš„å¼‚å¸¸æƒ…å†µ</li>
<li><strong>åˆç†è®¾ç½®å‡½æ•°è¶…æ—¶å’Œå†…å­˜</strong>ï¼šæ ¹æ®å®é™…éœ€æ±‚é…ç½®å‡½æ•°å‚æ•°</li>
</ul>
<h4 id="3-2-æ€§èƒ½ä¼˜åŒ–æŠ€å·§"><a href="#3-2-æ€§èƒ½ä¼˜åŒ–æŠ€å·§" class="headerlink" title="3.2 æ€§èƒ½ä¼˜åŒ–æŠ€å·§"></a>3.2 æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4><ul>
<li><strong>ä½¿ç”¨è¿æ¥æ± </strong>ï¼šå¯¹äºéœ€è¦è®¿é—®æ•°æ®åº“æˆ–å…¶ä»–æœåŠ¡çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨è¿æ¥æ± é‡ç”¨è¿æ¥</li>
<li><strong>ç¼“å­˜é™æ€æ•°æ®</strong>ï¼šå¯¹äºä¸å¸¸å˜åŒ–çš„æ•°æ®ï¼Œå¯ä»¥ç¼“å­˜åˆ°å†…å­˜ä¸­</li>
<li><strong>ä¼˜åŒ–åºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong>ï¼šé€‰æ‹©é«˜æ•ˆçš„åºåˆ—åŒ–æ¡†æ¶ï¼Œå¦‚Jacksonæˆ–Gson</li>
<li><strong>ä½¿ç”¨å¼‚æ­¥å¤„ç†</strong>ï¼šå¯¹äºè€—æ—¶çš„æ“ä½œï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¼‚æ­¥å¤„ç†</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨è¿æ¥æ± ä¼˜åŒ–æ•°æ®åº“è®¿é—®</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HikariDataSource dataSource;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        HikariConfig config = <span class="keyword">new</span> HikariConfig();</span><br><span class="line">        config.setJdbcUrl(System.getenv(<span class="string">&quot;DB_URL&quot;</span>));</span><br><span class="line">        config.setUsername(System.getenv(<span class="string">&quot;DB_USERNAME&quot;</span>));</span><br><span class="line">        config.setPassword(System.getenv(<span class="string">&quot;DB_PASSWORD&quot;</span>));</span><br><span class="line">        config.setMinimumIdle(<span class="number">0</span>);</span><br><span class="line">        config.setMaximumPoolSize(<span class="number">5</span>);</span><br><span class="line">        config.setConnectionTimeout(<span class="number">30000</span>);</span><br><span class="line">        config.setIdleTimeout(<span class="number">600000</span>);</span><br><span class="line">        config.setMaxLifetime(<span class="number">1800000</span>);</span><br><span class="line">        </span><br><span class="line">        dataSource = <span class="keyword">new</span> HikariDataSource(config);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUserById</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (Connection conn = dataSource.getConnection();</span><br><span class="line">             PreparedStatement ps = conn.prepareStatement(<span class="string">&quot;SELECT * FROM users WHERE id = ?&quot;</span>)) &#123;</span><br><span class="line">            ps.setString(<span class="number">1</span>, id);</span><br><span class="line">            <span class="keyword">try</span> (ResultSet rs = ps.executeQuery()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (rs.next()) &#123;</span><br><span class="line">                    User user = <span class="keyword">new</span> User();</span><br><span class="line">                    user.setId(rs.getString(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                    user.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                    user.setEmail(rs.getString(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">                    <span class="keyword">return</span> user;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">// æ—¥å¿—è®°å½•å¼‚å¸¸</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€äº‘åŸç”Ÿåº”ç”¨çš„å¯è§‚æµ‹æ€§ä¸ç›‘æ§-ğŸ”"><a href="#å…­ã€äº‘åŸç”Ÿåº”ç”¨çš„å¯è§‚æµ‹æ€§ä¸ç›‘æ§-ğŸ”" class="headerlink" title="å…­ã€äº‘åŸç”Ÿåº”ç”¨çš„å¯è§‚æµ‹æ€§ä¸ç›‘æ§ ğŸ”"></a>å…­ã€äº‘åŸç”Ÿåº”ç”¨çš„å¯è§‚æµ‹æ€§ä¸ç›‘æ§ ğŸ”</h2><h3 id="1-å¯è§‚æµ‹æ€§ä½“ç³»è®¾è®¡"><a href="#1-å¯è§‚æµ‹æ€§ä½“ç³»è®¾è®¡" class="headerlink" title="1. å¯è§‚æµ‹æ€§ä½“ç³»è®¾è®¡"></a>1. å¯è§‚æµ‹æ€§ä½“ç³»è®¾è®¡</h3><p>äº‘åŸç”Ÿåº”ç”¨çš„å¯è§‚æµ‹æ€§åŒ…æ‹¬ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼šæŒ‡æ ‡ï¼ˆMetricsï¼‰ã€æ—¥å¿—ï¼ˆLogsï¼‰å’Œè¿½è¸ªï¼ˆTracingï¼‰ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€å¯è§‚æµ‹æ€§ä¸‰æ”¯æŸ±â€ï¼š</p>
<ul>
<li><strong>æŒ‡æ ‡</strong>ï¼šç”¨äºç›‘æ§ç³»ç»Ÿçš„å¥åº·çŠ¶å†µå’Œæ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚CPUä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€è¯·æ±‚æ•°ã€å“åº”æ—¶é—´ç­‰</li>
<li><strong>æ—¥å¿—</strong>ï¼šè®°å½•ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ï¼Œç”¨äºé—®é¢˜æ’æŸ¥å’Œå®¡è®¡</li>
<li><strong>è¿½è¸ª</strong>ï¼šç”¨äºè·Ÿè¸ªè¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å®Œæ•´è°ƒç”¨é“¾è·¯ï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆ</li>
</ul>
<p>æ„å»ºå¯è§‚æµ‹æ€§ä½“ç³»æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€é‡‡é›†</strong>ï¼šä½¿ç”¨ç»Ÿä¸€çš„å·¥å…·å’Œæ ‡å‡†é‡‡é›†å¯è§‚æµ‹æ€§æ•°æ®</li>
<li><strong>é›†ä¸­å­˜å‚¨</strong>ï¼šå°†å¯è§‚æµ‹æ€§æ•°æ®å­˜å‚¨åœ¨é›†ä¸­çš„å¹³å°ä¸­</li>
<li><strong>å…³è”åˆ†æ</strong>ï¼šå°†æŒ‡æ ‡ã€æ—¥å¿—å’Œè¿½è¸ªæ•°æ®å…³è”èµ·æ¥è¿›è¡Œåˆ†æ</li>
<li><strong>å®æ—¶ç›‘æ§</strong>ï¼šå®æ—¶ç›‘æ§ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€</li>
<li><strong>æ™ºèƒ½å‘Šè­¦</strong>ï¼šè®¾ç½®æ™ºèƒ½å‘Šè­¦è§„åˆ™ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜</li>
</ul>
<h3 id="2-æ—¥å¿—ç®¡ç†ä¸ç»“æ„åŒ–æ—¥å¿—"><a href="#2-æ—¥å¿—ç®¡ç†ä¸ç»“æ„åŒ–æ—¥å¿—" class="headerlink" title="2. æ—¥å¿—ç®¡ç†ä¸ç»“æ„åŒ–æ—¥å¿—"></a>2. æ—¥å¿—ç®¡ç†ä¸ç»“æ„åŒ–æ—¥å¿—</h3><p>åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œç®¡ç†å’Œåˆ†ææ—¥å¿—æ˜¯ä¸€é¡¹é‡è¦çš„æŒ‘æˆ˜ã€‚ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—å¯ä»¥æ˜¾è‘—æé«˜æ—¥å¿—çš„å¯è¯»æ€§å’Œå¯åˆ†ææ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨SLF4Jå’ŒLogbacké…ç½®ç»“æ„åŒ–æ—¥å¿—</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggingConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> LoggingEventEnhancer <span class="title">loggingEventEnhancer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CustomLoggingEventEnhancer();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomLoggingEventEnhancer</span> <span class="keyword">implements</span> <span class="title">LoggingEventEnhancer</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">enhance</span><span class="params">(LoggingEvent event)</span> </span>&#123;</span><br><span class="line">            Map&lt;String, Object&gt; enhancements = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            enhancements.put(<span class="string">&quot;application&quot;</span>, <span class="string">&quot;my-application&quot;</span>);</span><br><span class="line">            enhancements.put(<span class="string">&quot;environment&quot;</span>, System.getenv(<span class="string">&quot;ENVIRONMENT&quot;</span>));</span><br><span class="line">            enhancements.put(<span class="string">&quot;instance_id&quot;</span>, System.getenv(<span class="string">&quot;HOSTNAME&quot;</span>));</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ·»åŠ MDCä¸­çš„ä¿¡æ¯</span></span><br><span class="line">            enhancements.putAll(MDC.getCopyOfContextMap() != <span class="keyword">null</span> ? MDC.getCopyOfContextMap() : Map.of());</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> enhancements;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ä»£ç ä¸­ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(OrderService.class);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Order <span class="title">createOrder</span><span class="params">(OrderDTO orderDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®MDCä¸Šä¸‹æ–‡</span></span><br><span class="line">        MDC.put(<span class="string">&quot;traceId&quot;</span>, UUID.randomUUID().toString());</span><br><span class="line">        MDC.put(<span class="string">&quot;userId&quot;</span>, orderDTO.getUserId());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;Creating order with productId=&#123;&#125;, quantity=&#123;&#125;&quot;</span>, orderDTO.getProductId(), orderDTO.getQuantity());</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// åˆ›å»ºè®¢å•é€»è¾‘</span></span><br><span class="line">            Order order = <span class="keyword">new</span> Order();</span><br><span class="line">            order.setUserId(orderDTO.getUserId());</span><br><span class="line">            order.setProductId(orderDTO.getProductId());</span><br><span class="line">            order.setQuantity(orderDTO.getQuantity());</span><br><span class="line">            order.setCreateTime(LocalDateTime.now());</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ä¿å­˜è®¢å•</span></span><br><span class="line">            orderRepository.save(order);</span><br><span class="line">            </span><br><span class="line">            logger.info(<span class="string">&quot;Order created successfully with id=&#123;&#125;&quot;</span>, order.getId());</span><br><span class="line">            <span class="keyword">return</span> order;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;Failed to create order: &#123;&#125;&quot;</span>, e.getMessage(), e);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Failed to create order&quot;</span>, e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// æ¸…é™¤MDCä¸Šä¸‹æ–‡</span></span><br><span class="line">            MDC.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-åˆ†å¸ƒå¼è¿½è¸ªä¸æ€§èƒ½åˆ†æ"><a href="#3-åˆ†å¸ƒå¼è¿½è¸ªä¸æ€§èƒ½åˆ†æ" class="headerlink" title="3. åˆ†å¸ƒå¼è¿½è¸ªä¸æ€§èƒ½åˆ†æ"></a>3. åˆ†å¸ƒå¼è¿½è¸ªä¸æ€§èƒ½åˆ†æ</h3><p>åˆ†å¸ƒå¼è¿½è¸ªå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªè¯·æ±‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å®Œæ•´è°ƒç”¨é“¾è·¯ï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨Spring Cloud Sleuthå’ŒZipkinå®ç°åˆ†å¸ƒå¼è¿½è¸ª</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableZipkinServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TracingServerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(TracingServerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®¢æˆ·ç«¯é…ç½®</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServiceApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MyServiceApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†å¸ƒå¼è¿½è¸ªé…ç½®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1.0</span>  <span class="comment"># é‡‡æ ·ç‡</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://zipkin-server:9411/</span>  <span class="comment"># ZipkinæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">    <span class="attr">sender:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">web</span></span><br></pre></td></tr></table></figure>

<h3 id="4-äº‘åŸç”Ÿç›‘æ§å‘Šè­¦å®è·µ"><a href="#4-äº‘åŸç”Ÿç›‘æ§å‘Šè­¦å®è·µ" class="headerlink" title="4. äº‘åŸç”Ÿç›‘æ§å‘Šè­¦å®è·µ"></a>4. äº‘åŸç”Ÿç›‘æ§å‘Šè­¦å®è·µ</h3><p>åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œç›‘æ§å’Œå‘Šè­¦æ˜¯ç¡®ä¿åº”ç”¨å¯é æ€§çš„é‡è¦ä¿éšœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨Micrometerå’ŒPrometheuså®ç°æŒ‡æ ‡ç›‘æ§</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">MeterRegistryCustomizer&lt;MeterRegistry&gt; <span class="title">metricsCommonTags</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> registry -&gt; registry.config().commonTags(<span class="string">&quot;application&quot;</span>, <span class="string">&quot;my-application&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">TimedAspect <span class="title">timedAspect</span><span class="params">(MeterRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> TimedAspect(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ–¹æ³•ä¸Šä½¿ç”¨@Timedæ³¨è§£ç›‘æ§æ€§èƒ½</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Timed(value = &quot;order.create&quot;, description = &quot;Time taken to create an order&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Order <span class="title">createOrder</span><span class="params">(OrderDTO orderDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè®¢å•é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Timed(value = &quot;order.find&quot;, description = &quot;Time taken to find orders&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Order&gt; <span class="title">findOrdersByUserId</span><span class="params">(String userId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æŸ¥è¯¢è®¢å•é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®Prometheusç›‘æ§å’ŒGrafanaå‘Šè­¦ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Prometheusé…ç½®</span></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;spring-actuator&#x27;</span></span><br><span class="line">    <span class="attr">metrics_path:</span> <span class="string">&#x27;/actuator/prometheus&#x27;</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line">    <span class="attr">kubernetes_sd_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">role:</span> <span class="string">pod</span></span><br><span class="line">    <span class="attr">relabel_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">source_labels:</span> [<span class="string">__meta_kubernetes_pod_label_app</span>]</span><br><span class="line">      <span class="attr">action:</span> <span class="string">keep</span></span><br><span class="line">      <span class="attr">regex:</span> <span class="string">my-application</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Grafanaå‘Šè­¦è§„åˆ™</span></span><br><span class="line"><span class="attr">groups:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">spring-boot-alerts</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">HighErrorRate</span></span><br><span class="line">    <span class="attr">expr:</span> <span class="string">sum(rate(http_server_requests_seconds_count&#123;status=~&quot;5..&quot;&#125;[5m]))</span> <span class="string">/</span> <span class="string">sum(rate(http_server_requests_seconds_count[5m]))</span> <span class="string">*</span> <span class="number">100</span> <span class="string">&gt;</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">for:</span> <span class="string">1m</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">critical</span></span><br><span class="line">    <span class="attr">annotations:</span></span><br><span class="line">      <span class="attr">summary:</span> <span class="string">&quot;High error rate detected&quot;</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">&quot;Error rate is above 5% for 1 minute&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€æ€»ç»“ä¸æœªæ¥å‘å±•è¶‹åŠ¿å±•æœ›-ğŸ“"><a href="#ä¸ƒã€æ€»ç»“ä¸æœªæ¥å‘å±•è¶‹åŠ¿å±•æœ›-ğŸ“" class="headerlink" title="ä¸ƒã€æ€»ç»“ä¸æœªæ¥å‘å±•è¶‹åŠ¿å±•æœ› ğŸ“"></a>ä¸ƒã€æ€»ç»“ä¸æœªæ¥å‘å±•è¶‹åŠ¿å±•æœ› ğŸ“</h2><p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£äº†Javaäº‘åŸç”Ÿåº”ç”¨çš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬å®¹å™¨åŒ–ç­–ç•¥ã€Kubernetesèµ„æºé…ç½®ã€å¾®æœåŠ¡æ”¹é€ ã€GraalVMåŸç”Ÿé•œåƒä¼˜åŒ–ã€Serverlesså‡½æ•°å¼€å‘ä»¥åŠå¯è§‚æµ‹æ€§ç›‘æ§ç­‰æ–¹é¢çš„å†…å®¹ã€‚</p>
<p>Javaäº‘åŸç”Ÿåº”ç”¨çš„æœªæ¥å‘å±•è¶‹åŠ¿ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>æ›´è½»é‡çº§çš„è¿è¡Œæ—¶</strong>ï¼šéšç€GraalVMç­‰æŠ€æœ¯çš„å‘å±•ï¼ŒJavaåº”ç”¨çš„å¯åŠ¨æ—¶é—´å’Œå†…å­˜å ç”¨å°†è¿›ä¸€æ­¥å‡å°</li>
<li><strong>æ›´ç´§å¯†çš„äº‘å¹³å°é›†æˆ</strong>ï¼šJavaæ¡†æ¶å°†ä¸äº‘å¹³å°æä¾›çš„æœåŠ¡æ›´ç´§å¯†åœ°é›†æˆï¼Œç®€åŒ–å¼€å‘å’Œéƒ¨ç½²</li>
<li><strong>æ›´æ™ºèƒ½çš„è¿ç»´</strong>ï¼šAIå’Œæœºå™¨å­¦ä¹ æŠ€æœ¯å°†è¢«æ›´å¹¿æ³›åœ°åº”ç”¨äºäº‘åŸç”Ÿåº”ç”¨çš„ç›‘æ§ã€è¯Šæ–­å’Œä¼˜åŒ–</li>
<li><strong>æ›´å¼ºå¤§çš„å®‰å…¨æ€§</strong>ï¼šäº‘åŸç”Ÿå®‰å…¨æŠ€æœ¯å°†ä¸æ–­å‘å±•ï¼Œæä¾›æ›´å…¨é¢çš„å®‰å…¨ä¿éšœ</li>
<li><strong>æ›´å¹¿æ³›çš„æ ‡å‡†åŒ–</strong>ï¼šäº‘åŸç”Ÿç›¸å…³çš„æ ‡å‡†å°†ä¸æ–­å®Œå–„ï¼Œä¿ƒè¿›æŠ€æœ¯çš„è§„èŒƒåŒ–å’Œäº’æ“ä½œæ€§</li>
</ol>
<p>æ„å»ºäº‘åŸç”Ÿåº”ç”¨æ˜¯ä¸€ä¸ªæŒç»­å­¦ä¹ å’Œå®è·µçš„è¿‡ç¨‹ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿä¸ºä½ æä¾›ä¸€äº›æœ‰ç”¨çš„æŒ‡å¯¼å’Œå¯å‘ï¼Œå¸®åŠ©ä½ åœ¨äº‘åŸç”Ÿæ—¶ä»£æ„å»ºæ›´é«˜æ•ˆã€æ›´å¯é çš„Javaåº”ç”¨ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ˜Š</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2025/02/15/database/2025-data-access-optimization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/02/15/database/2025-data-access-optimization/" class="post-title-link" itemprop="url">Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–å®æˆ˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-02-15 00:00:00" itemprop="dateCreated datePublished" datetime="2025-02-15T00:00:00+08:00">2025-02-15</time>
    </span>

  
    <span id="/2025/02/15/database/2025-data-access-optimization/" class="post-meta-item leancloud_visitors" data-flag-title="Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–å®æˆ˜" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>20k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>18 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–å®æˆ˜-ğŸï¸"><a href="#Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–å®æˆ˜-ğŸï¸" class="headerlink" title="Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–å®æˆ˜ ğŸï¸"></a>Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–å®æˆ˜ ğŸï¸</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ åœ¨Javaåº”ç”¨å¼€å‘ä¸­ï¼Œæ•°æ®è®¿é—®å±‚ï¼ˆDALï¼‰çš„æ€§èƒ½å¾€å¾€æ˜¯æ•´ä¸ªåº”ç”¨æ€§èƒ½çš„ç“¶é¢ˆã€‚éšç€ä¸šåŠ¡è§„æ¨¡çš„æ‰©å¤§å’Œæ•°æ®é‡çš„å¢é•¿ï¼Œå¦‚ä½•ä¼˜åŒ–æ•°æ®è®¿é—®å±‚çš„æ€§èƒ½æˆä¸ºäº†å¼€å‘å›¢é˜Ÿå¿…é¡»é¢å¯¹çš„æŒ‘æˆ˜ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å’Œå¤§å®¶åˆ†äº«Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–çš„å®æˆ˜ç»éªŒå’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ æ„å»ºé«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„æ•°æ®è®¿é—®å±‚ã€‚</p>
<h2 id="ä¸€ã€æ•°æ®è®¿é—®å±‚æ€§èƒ½é—®é¢˜çš„æ ¹æºä¸è¯Šæ–­-ğŸ•µï¸â€â™‚ï¸"><a href="#ä¸€ã€æ•°æ®è®¿é—®å±‚æ€§èƒ½é—®é¢˜çš„æ ¹æºä¸è¯Šæ–­-ğŸ•µï¸â€â™‚ï¸" class="headerlink" title="ä¸€ã€æ•°æ®è®¿é—®å±‚æ€§èƒ½é—®é¢˜çš„æ ¹æºä¸è¯Šæ–­ ğŸ•µï¸â€â™‚ï¸"></a>ä¸€ã€æ•°æ®è®¿é—®å±‚æ€§èƒ½é—®é¢˜çš„æ ¹æºä¸è¯Šæ–­ ğŸ•µï¸â€â™‚ï¸</h2><h3 id="1-å¸¸è§æ€§èƒ½ç“¶é¢ˆåˆ†æ"><a href="#1-å¸¸è§æ€§èƒ½ç“¶é¢ˆåˆ†æ" class="headerlink" title="1. å¸¸è§æ€§èƒ½ç“¶é¢ˆåˆ†æ"></a>1. å¸¸è§æ€§èƒ½ç“¶é¢ˆåˆ†æ</h3><p>åœ¨Javaåº”ç”¨ä¸­ï¼Œæ•°æ®è®¿é—®å±‚çš„æ€§èƒ½é—®é¢˜ä¸»è¦æ¥è‡ªä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>æ•°æ®åº“æŸ¥è¯¢æ•ˆç‡ä½</strong>ï¼šä¸åˆç†çš„SQLè¯­å¥ã€ç¼ºå°‘å¿…è¦çš„ç´¢å¼•</li>
<li><strong>è¿æ¥ç®¡ç†ä¸å½“</strong>ï¼šè¿æ¥æ± é…ç½®ä¸åˆç†ã€è¿æ¥æ³„æ¼</li>
<li><strong>æ•°æ®ä¼ è¾“å¼€é”€å¤§</strong>ï¼šä¸å¿…è¦çš„æ•°æ®åŠ è½½ã€åºåˆ—åŒ–å¼€é”€</li>
<li><strong>å¹¶å‘æ§åˆ¶é—®é¢˜</strong>ï¼šé”ç«äº‰æ¿€çƒˆã€äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸å½“</li>
<li><strong>åº”ç”¨å±‚è®¾è®¡ç¼ºé™·</strong>ï¼šN+1æŸ¥è¯¢é—®é¢˜ã€é¢‘ç¹è®¿é—®æ•°æ®åº“</li>
</ul>
<h3 id="2-æ€§èƒ½è¯Šæ–­å·¥å…·ä¸æ–¹æ³•"><a href="#2-æ€§èƒ½è¯Šæ–­å·¥å…·ä¸æ–¹æ³•" class="headerlink" title="2. æ€§èƒ½è¯Šæ–­å·¥å…·ä¸æ–¹æ³•"></a>2. æ€§èƒ½è¯Šæ–­å·¥å…·ä¸æ–¹æ³•</h3><p>è¦ä¼˜åŒ–æ•°æ®è®¿é—®å±‚çš„æ€§èƒ½ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆæ‰€åœ¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ€§èƒ½è¯Šæ–­å·¥å…·å’Œæ–¹æ³•ï¼š</p>
<ul>
<li><strong>æ•°æ®åº“å±‚é¢</strong>ï¼šä½¿ç”¨Explainåˆ†æSQLæ‰§è¡Œè®¡åˆ’ã€ç›‘æ§æ…¢æŸ¥è¯¢æ—¥å¿—</li>
<li><strong>åº”ç”¨å±‚é¢</strong>ï¼šä½¿ç”¨JProfilerã€VisualVMç­‰å·¥å…·åˆ†ææ–¹æ³•æ‰§è¡Œæ—¶é—´</li>
<li><strong>å…¨é“¾è·¯è¿½è¸ª</strong>ï¼šä½¿ç”¨SkyWalkingã€Zipkinç­‰å·¥å…·è¿½è¸ªè¯·æ±‚é“¾è·¯</li>
<li><strong>è¿æ¥æ± ç›‘æ§</strong>ï¼šç›‘æ§è¿æ¥æ± çš„çŠ¶æ€å’Œä½¿ç”¨æƒ…å†µ</li>
<li><strong>æ€§èƒ½æµ‹è¯•</strong>ï¼šä½¿ç”¨JMeterã€Gatlingç­‰å·¥å…·è¿›è¡Œå‹åŠ›æµ‹è¯•</li>
</ul>
<h3 id="3-æ€§èƒ½æµ‹è¯•ä¸åŸºå‡†åˆ†æ"><a href="#3-æ€§èƒ½æµ‹è¯•ä¸åŸºå‡†åˆ†æ" class="headerlink" title="3. æ€§èƒ½æµ‹è¯•ä¸åŸºå‡†åˆ†æ"></a>3. æ€§èƒ½æµ‹è¯•ä¸åŸºå‡†åˆ†æ</h3><p>åœ¨ä¼˜åŒ–æ•°æ®è®¿é—®å±‚ä¹‹å‰ï¼Œè¿›è¡Œæ€§èƒ½æµ‹è¯•å¹¶å»ºç«‹åŸºå‡†çº¿æ˜¯éå¸¸é‡è¦çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataAccessPerformanceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindUserByIdPerformance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StopWatch stopWatch = <span class="keyword">new</span> StopWatch();</span><br><span class="line">        <span class="keyword">int</span> iterations = <span class="number">1000</span>;</span><br><span class="line">        </span><br><span class="line">        stopWatch.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; iterations; i++) &#123;</span><br><span class="line">            userService.findUserById((<span class="keyword">long</span>) (i % <span class="number">1000</span> + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        stopWatch.stop();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œ&quot;</span> + iterations + <span class="string">&quot;æ¬¡æŸ¥è¯¢ï¼Œè€—æ—¶ï¼š&quot;</span> + stopWatch.getTotalTimeMillis() + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹³å‡æ¯æ¬¡æŸ¥è¯¢è€—æ—¶ï¼š&quot;</span> + (stopWatch.getTotalTimeMillis() / iterations) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€SQLä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ-ğŸ“"><a href="#äºŒã€SQLä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ-ğŸ“" class="headerlink" title="äºŒã€SQLä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ ğŸ“"></a>äºŒã€SQLä¼˜åŒ–ç­–ç•¥ä¸æœ€ä½³å®è·µ ğŸ“</h2><h3 id="1-ç´¢å¼•ä¼˜åŒ–æŠ€å·§"><a href="#1-ç´¢å¼•ä¼˜åŒ–æŠ€å·§" class="headerlink" title="1. ç´¢å¼•ä¼˜åŒ–æŠ€å·§"></a>1. ç´¢å¼•ä¼˜åŒ–æŠ€å·§</h3><p>ç´¢å¼•æ˜¯æé«˜æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç´¢å¼•ä¼˜åŒ–çš„æŠ€å·§ï¼š</p>
<h4 id="1-1-åˆç†è®¾è®¡ç´¢å¼•"><a href="#1-1-åˆç†è®¾è®¡ç´¢å¼•" class="headerlink" title="1.1 åˆç†è®¾è®¡ç´¢å¼•"></a>1.1 åˆç†è®¾è®¡ç´¢å¼•</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¸ºç»å¸¸ç”¨äºæŸ¥è¯¢æ¡ä»¶çš„åˆ—åˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_user_name <span class="keyword">ON</span> <span class="keyword">user</span>(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸ºç»å¸¸ç”¨äºæ’åºå’Œåˆ†ç»„çš„åˆ—åˆ›å»ºç´¢å¼•</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_order_create_time <span class="keyword">ON</span> <span class="keyword">order</span>(create_time);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_user_name_age <span class="keyword">ON</span> <span class="keyword">user</span>(name, age);</span><br></pre></td></tr></table></figure>

<h4 id="1-2-é¿å…ç´¢å¼•å¤±æ•ˆ"><a href="#1-2-é¿å…ç´¢å¼•å¤±æ•ˆ" class="headerlink" title="1.2 é¿å…ç´¢å¼•å¤±æ•ˆ"></a>1.2 é¿å…ç´¢å¼•å¤±æ•ˆ</h4><p>ä»¥ä¸‹æƒ…å†µå¯èƒ½å¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- é¿å…åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè®¡ç®—</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(birthday) <span class="operator">=</span> <span class="number">1990</span>; <span class="comment">-- ç´¢å¼•å¤±æ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é¿å…ä½¿ç”¨IS NULL/IS NOT NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> email <span class="keyword">IS</span> <span class="keyword">NULL</span>; <span class="comment">-- ç´¢å¼•å¯èƒ½å¤±æ•ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é¿å…ä½¿ç”¨NOT INå’ŒLIKE &#x27;%...&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;%å¼ &#x27;</span>; <span class="comment">-- ç´¢å¼•å¤±æ•ˆ</span></span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸ºï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä½¿ç”¨èŒƒå›´æŸ¥è¯¢ä»£æ›¿å‡½æ•°è®¡ç®—</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> birthday <span class="keyword">BETWEEN</span> <span class="string">&#x27;1990-01-01&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;1990-12-31&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¯¹äºNULLå€¼ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> email <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>; <span class="comment">-- å‡è®¾ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºæœªè®¾ç½®é‚®ç®±</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨å‰ç¼€åŒ¹é…</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> name <span class="keyword">LIKE</span> <span class="string">&#x27;å¼ %&#x27;</span>; <span class="comment">-- ç´¢å¼•æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3-å®šæœŸç»´æŠ¤ç´¢å¼•"><a href="#1-3-å®šæœŸç»´æŠ¤ç´¢å¼•" class="headerlink" title="1.3 å®šæœŸç»´æŠ¤ç´¢å¼•"></a>1.3 å®šæœŸç»´æŠ¤ç´¢å¼•</h4><p>å®šæœŸæ£€æŸ¥å’Œç»´æŠ¤ç´¢å¼•æ˜¯ä¿æŒæ•°æ®åº“æ€§èƒ½çš„é‡è¦æªæ–½ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MySQLæŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- PostgreSQLæŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pg_stat_user_indexes <span class="keyword">WHERE</span> schemaname <span class="operator">=</span> <span class="string">&#x27;public&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- é‡å»ºç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> INDEX idx_user_name REBUILD;</span><br></pre></td></tr></table></figure>

<h3 id="2-SQLæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§"><a href="#2-SQLæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§" class="headerlink" title="2. SQLæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§"></a>2. SQLæŸ¥è¯¢ä¼˜åŒ–æŠ€å·§</h3><p>é™¤äº†ç´¢å¼•ä¼˜åŒ–å¤–ï¼ŒSQLæŸ¥è¯¢æœ¬èº«çš„ä¼˜åŒ–ä¹Ÿéå¸¸é‡è¦ï¼š</p>
<h4 id="2-1-åªæŸ¥è¯¢éœ€è¦çš„åˆ—"><a href="#2-1-åªæŸ¥è¯¢éœ€è¦çš„åˆ—" class="headerlink" title="2.1 åªæŸ¥è¯¢éœ€è¦çš„åˆ—"></a>2.1 åªæŸ¥è¯¢éœ€è¦çš„åˆ—</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- é¿å…ä½¿ç”¨SELECT *</span></span><br><span class="line"><span class="keyword">SELECT</span> id, name, email <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è€Œä¸æ˜¯</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-ä¼˜åŒ–JOINæ“ä½œ"><a href="#2-2-ä¼˜åŒ–JOINæ“ä½œ" class="headerlink" title="2.2 ä¼˜åŒ–JOINæ“ä½œ"></a>2.2 ä¼˜åŒ–JOINæ“ä½œ</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å°è¡¨é©±åŠ¨å¤§è¡¨</span></span><br><span class="line"><span class="keyword">SELECT</span> u.name, o.order_no <span class="keyword">FROM</span> <span class="keyword">user</span> u <span class="keyword">JOIN</span> <span class="keyword">order</span> o <span class="keyword">ON</span> u.id <span class="operator">=</span> o.user_id <span class="keyword">WHERE</span> u.age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨STRAIGHT_JOINå¼ºåˆ¶è¿æ¥é¡ºåºï¼ˆä»…MySQLï¼‰</span></span><br><span class="line"><span class="keyword">SELECT</span> STRAIGHT_JOIN u.name, o.order_no <span class="keyword">FROM</span> <span class="keyword">user</span> u <span class="keyword">JOIN</span> <span class="keyword">order</span> o <span class="keyword">ON</span> u.id <span class="operator">=</span> o.user_id <span class="keyword">WHERE</span> u.age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-ä½¿ç”¨LIMITé™åˆ¶ç»“æœé›†å¤§å°"><a href="#2-3-ä½¿ç”¨LIMITé™åˆ¶ç»“æœé›†å¤§å°" class="headerlink" title="2.3 ä½¿ç”¨LIMITé™åˆ¶ç»“æœé›†å¤§å°"></a>2.3 ä½¿ç”¨LIMITé™åˆ¶ç»“æœé›†å¤§å°</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> create_time <span class="keyword">DESC</span> LIMIT <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨å»¶è¿Ÿå…³è”ä¼˜åŒ–å¤§æ•°æ®é‡åˆ†é¡µ</span></span><br><span class="line"><span class="keyword">SELECT</span> u.<span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> u</span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> create_time <span class="keyword">DESC</span> LIMIT <span class="number">10</span> <span class="keyword">OFFSET</span> <span class="number">100000</span>) tmp</span><br><span class="line"><span class="keyword">ON</span> u.id <span class="operator">=</span> tmp.id;</span><br></pre></td></tr></table></figure>

<h3 id="3-æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–"><a href="#3-æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–" class="headerlink" title="3. æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–"></a>3. æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–</h3><p>æ•°æ®åº“è¿æ¥æ˜¯å®è´µçš„èµ„æºï¼Œåˆç†é…ç½®å’Œä½¿ç”¨è¿æ¥æ± å¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨æ€§èƒ½ï¼š</p>
<h4 id="3-1-è¿æ¥æ± é…ç½®ä¼˜åŒ–"><a href="#3-1-è¿æ¥æ± é…ç½®ä¼˜åŒ–" class="headerlink" title="3.1 è¿æ¥æ± é…ç½®ä¼˜åŒ–"></a>3.1 è¿æ¥æ± é…ç½®ä¼˜åŒ–</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">5</span>  <span class="comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">20</span>  <span class="comment"># æœ€å¤§è¿æ¥æ± å¤§å°</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">30000</span>  <span class="comment"># è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">      <span class="attr">idle-timeout:</span> <span class="number">600000</span>  <span class="comment"># ç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">      <span class="attr">max-lifetime:</span> <span class="number">1800000</span>  <span class="comment"># è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">      <span class="attr">auto-commit:</span> <span class="literal">true</span>  <span class="comment"># è‡ªåŠ¨æäº¤</span></span><br><span class="line">      <span class="attr">pool-name:</span> <span class="string">HikariCP</span>  <span class="comment"># è¿æ¥æ± åç§°</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-ç›‘æ§è¿æ¥æ± çŠ¶æ€"><a href="#3-2-ç›‘æ§è¿æ¥æ± çŠ¶æ€" class="headerlink" title="3.2 ç›‘æ§è¿æ¥æ± çŠ¶æ€"></a>3.2 ç›‘æ§è¿æ¥æ± çŠ¶æ€</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionPoolMonitor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Scheduled(fixedRate = 60000)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">monitorConnectionPool</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (dataSource <span class="keyword">instanceof</span> HikariDataSource) &#123;</span><br><span class="line">            HikariDataSource hikariDataSource = (HikariDataSource) dataSource;</span><br><span class="line">            </span><br><span class="line">            System.out.println(<span class="string">&quot;è¿æ¥æ± åç§°: &quot;</span> + hikariDataSource.getPoolName());</span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰æ´»è·ƒè¿æ¥æ•°: &quot;</span> + hikariDataSource.getHikariPoolMXBean().getActiveConnections());</span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰ç©ºé—²è¿æ¥æ•°: &quot;</span> + hikariDataSource.getHikariPoolMXBean().getIdleConnections());</span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰ç­‰å¾…è¿æ¥æ•°: &quot;</span> + hikariDataSource.getHikariPoolMXBean().getThreadsAwaitingConnection());</span><br><span class="line">            System.out.println(<span class="string">&quot;æ€»è¿æ¥æ•°: &quot;</span> + hikariDataSource.getHikariPoolMXBean().getTotalConnections());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ORMæ¡†æ¶æ€§èƒ½ä¼˜åŒ–ç­–ç•¥-ğŸš€"><a href="#ä¸‰ã€ORMæ¡†æ¶æ€§èƒ½ä¼˜åŒ–ç­–ç•¥-ğŸš€" class="headerlink" title="ä¸‰ã€ORMæ¡†æ¶æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ ğŸš€"></a>ä¸‰ã€ORMæ¡†æ¶æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ ğŸš€</h2><h3 id="1-MyBatisæ€§èƒ½ä¼˜åŒ–"><a href="#1-MyBatisæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="1. MyBatisæ€§èƒ½ä¼˜åŒ–"></a>1. MyBatisæ€§èƒ½ä¼˜åŒ–</h3><p>MyBatisæ˜¯Javaå¼€å‘ä¸­å¸¸ç”¨çš„ORMæ¡†æ¶ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š</p>
<h4 id="1-1-ä½¿ç”¨ResultMapä»£æ›¿ResultType"><a href="#1-1-ä½¿ç”¨ResultMapä»£æ›¿ResultType" class="headerlink" title="1.1 ä½¿ç”¨ResultMapä»£æ›¿ResultType"></a>1.1 ä½¿ç”¨ResultMapä»£æ›¿ResultType</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¨èä½¿ç”¨ResultMap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;create_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;createTime&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserResultMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT id, name, email, create_time FROM user WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¸æ¨èå¤§é‡ä½¿ç”¨ResultTypeï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤æ‚å¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM user WHERE name = #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-2-å»¶è¿ŸåŠ è½½ä¸å…³è”æŸ¥è¯¢ä¼˜åŒ–"><a href="#1-2-å»¶è¿ŸåŠ è½½ä¸å…³è”æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="1.2 å»¶è¿ŸåŠ è½½ä¸å…³è”æŸ¥è¯¢ä¼˜åŒ–"></a>1.2 å»¶è¿ŸåŠ è½½ä¸å…³è”æŸ¥è¯¢ä¼˜åŒ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®å…¨å±€å»¶è¿ŸåŠ è½½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨å»¶è¿ŸåŠ è½½æŸ¥è¯¢å…³è”å¯¹è±¡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;OrderResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.example.Order&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;order_no&quot;</span> <span class="attr">property</span>=<span class="string">&quot;orderNo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">select</span>=<span class="string">&quot;findUserById&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;lazy&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æˆ–è€…ä½¿ç”¨JOINæŸ¥è¯¢ä¸€æ¬¡æ€§åŠ è½½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findOrderWithUser&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;OrderWithUserResultMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT o.id, o.order_no, o.user_id, u.name, u.email</span><br><span class="line">    FROM `order` o</span><br><span class="line">    JOIN user u ON o.user_id = u.id</span><br><span class="line">    WHERE o.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3-ä½¿ç”¨ç¼“å­˜æé«˜æŸ¥è¯¢æ•ˆç‡"><a href="#1-3-ä½¿ç”¨ç¼“å­˜æé«˜æŸ¥è¯¢æ•ˆç‡" class="headerlink" title="1.3 ä½¿ç”¨ç¼“å­˜æé«˜æŸ¥è¯¢æ•ˆç‡"></a>1.3 ä½¿ç”¨ç¼“å­˜æé«˜æŸ¥è¯¢æ•ˆç‡</h4><p>MyBatisæä¾›äº†ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®äºŒçº§ç¼“å­˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åœ¨Mapperæ¥å£ä¸Šå¯ç”¨äºŒçº§ç¼“å­˜ --&gt;</span></span><br><span class="line">@CacheNamespace</span><br><span class="line">public interface UserMapper &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æˆ–è€…åœ¨XMLä¸­é…ç½®ç¼“å­˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">eviction</span>=<span class="string">&quot;LRU&quot;</span> <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span> <span class="attr">size</span>=<span class="string">&quot;512&quot;</span> <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Spring-Data-JPA-Hibernateæ€§èƒ½ä¼˜åŒ–"><a href="#2-Spring-Data-JPA-Hibernateæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="2. Spring Data JPA/Hibernateæ€§èƒ½ä¼˜åŒ–"></a>2. Spring Data JPA/Hibernateæ€§èƒ½ä¼˜åŒ–</h3><p>å¯¹äºä½¿ç”¨Spring Data JPAæˆ–Hibernateçš„é¡¹ç›®ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<h4 id="2-1-å®ä½“æ˜ å°„ä¼˜åŒ–"><a href="#2-1-å®ä½“æ˜ å°„ä¼˜åŒ–" class="headerlink" title="2.1 å®ä½“æ˜ å°„ä¼˜åŒ–"></a>2.1 å®ä½“æ˜ å°„ä¼˜åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user&quot;)</span></span><br><span class="line"><span class="meta">@org</span>.hibernate.annotations.Table(appliesTo = <span class="string">&quot;user&quot;</span>, indexes = &#123;</span><br><span class="line">    <span class="meta">@Index(name = &quot;idx_user_name&quot;, columnList = &quot;name&quot;)</span>,</span><br><span class="line">    <span class="meta">@Index(name = &quot;idx_user_email&quot;, columnList = &quot;email&quot;)</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Column(name = &quot;name&quot;, nullable = false, length = 50)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Column(name = &quot;email&quot;, nullable = false, length = 100, unique = true)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å…¶ä»–å­—æ®µ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-æŸ¥è¯¢ä¼˜åŒ–"><a href="#2-2-æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="2.2 æŸ¥è¯¢ä¼˜åŒ–"></a>2.2 æŸ¥è¯¢ä¼˜åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨@Queryæ³¨è§£è‡ªå®šä¹‰SQL</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Query(value = &quot;SELECT u.id, u.name, u.email FROM user u WHERE u.age &gt; ?1&quot;, nativeQuery = true)</span></span><br><span class="line">    List&lt;Object[]&gt; findUsersByAgeGreaterThanNative(<span class="keyword">int</span> age);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä½¿ç”¨JPQL</span></span><br><span class="line">    <span class="meta">@Query(&quot;SELECT u FROM User u WHERE u.age &gt; :age&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findUsersByAgeGreaterThan</span><span class="params">(<span class="meta">@Param(&quot;age&quot;)</span> <span class="keyword">int</span> age)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ´¾ç”ŸæŸ¥è¯¢</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findByCreateTimeAfter</span><span class="params">(LocalDateTime createTime)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-3-æ‰¹é‡æ“ä½œä¼˜åŒ–"><a href="#2-3-æ‰¹é‡æ“ä½œä¼˜åŒ–" class="headerlink" title="2.3 æ‰¹é‡æ“ä½œä¼˜åŒ–"></a>2.3 æ‰¹é‡æ“ä½œä¼˜åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PersistenceContext</span></span><br><span class="line">    <span class="keyword">private</span> EntityManager entityManager;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchInsert</span><span class="params">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; users.size(); i++) &#123;</span><br><span class="line">            entityManager.persist(users.get(i));</span><br><span class="line">            <span class="keyword">if</span> (i % <span class="number">50</span> == <span class="number">0</span>) &#123; <span class="comment">// æ¯50æ¡åˆ·æ–°ä¸€æ¬¡</span></span><br><span class="line">                entityManager.flush();</span><br><span class="line">                entityManager.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        entityManager.flush();</span><br><span class="line">        entityManager.clear();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchUpdate</span><span class="params">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨HQLæ‰¹é‡æ›´æ–°</span></span><br><span class="line">        Query query = entityManager.createQuery(<span class="string">&quot;UPDATE User u SET u.name = :name WHERE u.id = :id&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">            query.setParameter(<span class="string">&quot;name&quot;</span>, user.getName())</span><br><span class="line">                 .setParameter(<span class="string">&quot;id&quot;</span>, user.getId())</span><br><span class="line">                 .executeUpdate();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-æŠ“å–ç­–ç•¥ä¼˜åŒ–"><a href="#2-4-æŠ“å–ç­–ç•¥ä¼˜åŒ–" class="headerlink" title="2.4 æŠ“å–ç­–ç•¥ä¼˜åŒ–"></a>2.4 æŠ“å–ç­–ç•¥ä¼˜åŒ–</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å»¶è¿ŸåŠ è½½å…³è”å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@ManyToOne(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;user_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å»¶è¿ŸåŠ è½½é›†åˆ</span></span><br><span class="line">    <span class="meta">@OneToMany(mappedBy = &quot;order&quot;, fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;OrderItem&gt; orderItems;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨JPQLçš„JOIN FETCHæ¥é¿å…N+1é—®é¢˜</span></span><br><span class="line"><span class="meta">@Query(&quot;SELECT o FROM Order o JOIN FETCH o.user JOIN FETCH o.orderItems WHERE o.id = :id&quot;)</span></span><br><span class="line"><span class="function">Order <span class="title">findOrderWithDetails</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Long id)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡ä¸å®ç°-ğŸ’¾"><a href="#å››ã€å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡ä¸å®ç°-ğŸ’¾" class="headerlink" title="å››ã€å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡ä¸å®ç° ğŸ’¾"></a>å››ã€å¤šçº§ç¼“å­˜æ¶æ„è®¾è®¡ä¸å®ç° ğŸ’¾</h2><h3 id="1-å¤šçº§ç¼“å­˜æ¶æ„æ¦‚è¿°"><a href="#1-å¤šçº§ç¼“å­˜æ¶æ„æ¦‚è¿°" class="headerlink" title="1. å¤šçº§ç¼“å­˜æ¶æ„æ¦‚è¿°"></a>1. å¤šçº§ç¼“å­˜æ¶æ„æ¦‚è¿°</h3><p>ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ•°æ®è®¿é—®æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å¤šçº§ç¼“å­˜æ¶æ„ã€‚ä¸€ä¸ªå…¸å‹çš„å¤šçº§ç¼“å­˜æ¶æ„åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä¸€çº§ç¼“å­˜</strong>ï¼šåº”ç”¨å†…å­˜ç¼“å­˜ï¼ˆå¦‚Caffeineã€Ehcacheï¼‰</li>
<li><strong>äºŒçº§ç¼“å­˜</strong>ï¼šåˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚Redisã€Memcachedï¼‰</li>
<li><strong>ä¸‰çº§ç¼“å­˜</strong>ï¼šæ•°æ®åº“ç¼“å­˜</li>
</ul>
<h3 id="2-æœ¬åœ°ç¼“å­˜å®ç°ï¼ˆCaffeineï¼‰"><a href="#2-æœ¬åœ°ç¼“å­˜å®ç°ï¼ˆCaffeineï¼‰" class="headerlink" title="2. æœ¬åœ°ç¼“å­˜å®ç°ï¼ˆCaffeineï¼‰"></a>2. æœ¬åœ°ç¼“å­˜å®ç°ï¼ˆCaffeineï¼‰</h3><p>Caffeineæ˜¯Javaä¸­é«˜æ€§èƒ½çš„æœ¬åœ°ç¼“å­˜åº“ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å®ç°ä¸€çº§ç¼“å­˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CaffeineCacheManager cacheManager = <span class="keyword">new</span> CaffeineCacheManager();</span><br><span class="line">        cacheManager.setCaffeine(Caffeine.newBuilder()</span><br><span class="line">                .expireAfterWrite(<span class="number">10</span>, TimeUnit.MINUTES)  <span class="comment">// å†™å…¥å10åˆ†é’Ÿè¿‡æœŸ</span></span><br><span class="line">                .maximumSize(<span class="number">1000</span>)  <span class="comment">// æœ€å¤§ç¼“å­˜é¡¹æ•°</span></span><br><span class="line">                .recordStats());  <span class="comment">// è®°å½•ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@CacheConfig(cacheNames = &quot;users&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Cacheable(key = &quot;#id&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@CachePut(key = &quot;#user.id&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">updateUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        userMapper.update(user);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@CacheEvict(key = &quot;#id&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        userMapper.delete(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-åˆ†å¸ƒå¼ç¼“å­˜å®ç°ï¼ˆRedisï¼‰"><a href="#3-åˆ†å¸ƒå¼ç¼“å­˜å®ç°ï¼ˆRedisï¼‰" class="headerlink" title="3. åˆ†å¸ƒå¼ç¼“å­˜å®ç°ï¼ˆRedisï¼‰"></a>3. åˆ†å¸ƒå¼ç¼“å­˜å®ç°ï¼ˆRedisï¼‰</h3><p>Redisæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å®ç°äºŒçº§ç¼“å­˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCacheConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> RedisTemplate&lt;&gt;();</span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è®¾ç½®åºåˆ—åŒ–å™¨</span></span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Object&gt; serializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;&gt;(Object.class);</span><br><span class="line">        ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        mapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        serializer.setObjectMapper(mapper);</span><br><span class="line">        </span><br><span class="line">        template.setValueSerializer(serializer);</span><br><span class="line">        template.setKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        template.setHashKeySerializer(<span class="keyword">new</span> StringRedisSerializer());</span><br><span class="line">        template.setHashValueSerializer(serializer);</span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">(RedisConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .entryTtl(Duration.ofMinutes(<span class="number">10</span>))  <span class="comment">// ç¼“å­˜è¿‡æœŸæ—¶é—´</span></span><br><span class="line">                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(<span class="keyword">new</span> StringRedisSerializer()))</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(</span><br><span class="line">                        <span class="keyword">new</span> GenericJackson2JsonRedisSerializer()));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> RedisCacheManager.builder(factory)</span><br><span class="line">                .cacheDefaults(config)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-å¤šçº§ç¼“å­˜æ•´åˆä¸æ•°æ®ä¸€è‡´æ€§ä¿è¯"><a href="#4-å¤šçº§ç¼“å­˜æ•´åˆä¸æ•°æ®ä¸€è‡´æ€§ä¿è¯" class="headerlink" title="4. å¤šçº§ç¼“å­˜æ•´åˆä¸æ•°æ®ä¸€è‡´æ€§ä¿è¯"></a>4. å¤šçº§ç¼“å­˜æ•´åˆä¸æ•°æ®ä¸€è‡´æ€§ä¿è¯</h3><p>åœ¨ä½¿ç”¨å¤šçº§ç¼“å­˜æ—¶ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ•°æ®ä¸€è‡´æ€§ä¿è¯ç­–ç•¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆä»Redisç¼“å­˜è·å–</span></span><br><span class="line">        String key = <span class="string">&quot;user:&quot;</span> + id;</span><br><span class="line">        User user = (User) redisTemplate.opsForValue().get(key);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Redisç¼“å­˜ä¸å­˜åœ¨ï¼Œä»æ•°æ®åº“è·å–</span></span><br><span class="line">        user = userMapper.findById(id);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å°†æ•°æ®æ”¾å…¥Redisç¼“å­˜</span></span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, user, <span class="number">10</span>, TimeUnit.MINUTES);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">updateUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ•°æ®åº“</span></span><br><span class="line">        userMapper.update(user);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ·˜æ±°ç¼“å­˜</span></span><br><span class="line">        String key = <span class="string">&quot;user:&quot;</span> + user.getId();</span><br><span class="line">        redisTemplate.delete(key);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æ•°æ®åº“è®°å½•</span></span><br><span class="line">        userMapper.delete(id);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ·˜æ±°ç¼“å­˜</span></span><br><span class="line">        String key = <span class="string">&quot;user:&quot;</span> + id;</span><br><span class="line">        redisTemplate.delete(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºæ›´å¤æ‚çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°ç¼“å­˜çš„å¼‚æ­¥æ›´æ–°æˆ–æ·˜æ±°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheSyncService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> KafkaTemplate&lt;String, String&gt; kafkaTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">syncCache</span><span class="params">(String cacheKey, String operation)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å‘é€ç¼“å­˜åŒæ­¥æ¶ˆæ¯</span></span><br><span class="line">        String message = operation + <span class="string">&quot;:&quot;</span> + cacheKey;</span><br><span class="line">        kafkaTemplate.send(<span class="string">&quot;cache-sync-topic&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheSyncConsumer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@KafkaListener(topics = &quot;cache-sync-topic&quot;, groupId = &quot;cache-sync-group&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleCacheSyncMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è§£ææ¶ˆæ¯å¹¶åŒæ­¥ç¼“å­˜</span></span><br><span class="line">        String[] parts = message.split(<span class="string">&quot;:&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (parts.length == <span class="number">2</span>) &#123;</span><br><span class="line">            String operation = parts[<span class="number">0</span>];</span><br><span class="line">            String cacheKey = parts[<span class="number">1</span>];</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;delete&quot;</span>.equals(operation)) &#123;</span><br><span class="line">                redisTemplate.delete(cacheKey);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€è¯»å†™åˆ†ç¦»ä¸åˆ†åº“åˆ†è¡¨ç­–ç•¥-ğŸ“Š"><a href="#äº”ã€è¯»å†™åˆ†ç¦»ä¸åˆ†åº“åˆ†è¡¨ç­–ç•¥-ğŸ“Š" class="headerlink" title="äº”ã€è¯»å†™åˆ†ç¦»ä¸åˆ†åº“åˆ†è¡¨ç­–ç•¥ ğŸ“Š"></a>äº”ã€è¯»å†™åˆ†ç¦»ä¸åˆ†åº“åˆ†è¡¨ç­–ç•¥ ğŸ“Š</h2><p>å½“æ•°æ®é‡è¾¾åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œå•ä¸€æ•°æ®åº“å¯èƒ½æ— æ³•æ»¡è¶³æ€§èƒ½éœ€æ±‚ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦è€ƒè™‘è¯»å†™åˆ†ç¦»å’Œåˆ†åº“åˆ†è¡¨ç­–ç•¥ã€‚</p>
<h3 id="1-è¯»å†™åˆ†ç¦»å®ç°"><a href="#1-è¯»å†™åˆ†ç¦»å®ç°" class="headerlink" title="1. è¯»å†™åˆ†ç¦»å®ç°"></a>1. è¯»å†™åˆ†ç¦»å®ç°</h3><p>è¯»å†™åˆ†ç¦»æ˜¯æŒ‡å°†æ•°æ®åº“çš„è¯»æ“ä½œå’Œå†™æ“ä½œåˆ†ç¦»åˆ°ä¸åŒçš„æ•°æ®åº“å®ä¾‹ä¸Šï¼Œä»¥æé«˜ç³»ç»Ÿçš„å¹¶å‘å¤„ç†èƒ½åŠ›ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">master:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://master-db:3306/test?useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">slave1:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://slave1-db:3306/test?useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">slave2:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://slave2-db:3306/test?useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br></pre></td></tr></table></figure>

<p>å®ç°åŠ¨æ€æ•°æ®æºåˆ‡æ¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicDataSource</span> <span class="keyword">extends</span> <span class="title">AbstractRoutingDataSource</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">determineCurrentLookupKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DataSourceContextHolder.getDataSourceType();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceContextHolder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;String&gt; CONTEXT_HOLDER = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setDataSourceType</span><span class="params">(String dataSourceType)</span> </span>&#123;</span><br><span class="line">        CONTEXT_HOLDER.set(dataSourceType);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getDataSourceType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> CONTEXT_HOLDER.get();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">clearDataSourceType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CONTEXT_HOLDER.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataSourceAspect</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.example.mapper.*.select*(..)) || execution(* com.example.mapper.*.get*(..)) || execution(* com.example.mapper.*.find*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readPointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.example.mapper.*.insert*(..)) || execution(* com.example.mapper.*.update*(..)) || execution(* com.example.mapper.*.delete*(..))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writePointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;readPointCut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç®€å•çš„è½®è¯¢ç­–ç•¥</span></span><br><span class="line">        <span class="keyword">int</span> slaveIndex = ThreadLocalRandom.current().nextInt(<span class="number">2</span>);</span><br><span class="line">        DataSourceContextHolder.setDataSourceType(<span class="string">&quot;slave&quot;</span> + (slaveIndex + <span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Before(&quot;writePointCut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DataSourceContextHolder.setDataSourceType(<span class="string">&quot;master&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@After(&quot;readPointCut() || writePointCut()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        DataSourceContextHolder.clearDataSourceType();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-åˆ†åº“åˆ†è¡¨ç­–ç•¥"><a href="#2-åˆ†åº“åˆ†è¡¨ç­–ç•¥" class="headerlink" title="2. åˆ†åº“åˆ†è¡¨ç­–ç•¥"></a>2. åˆ†åº“åˆ†è¡¨ç­–ç•¥</h3><p>å½“å•è¡¨æ•°æ®é‡è¿‡å¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ†åº“åˆ†è¡¨ç­–ç•¥ã€‚åˆ†åº“åˆ†è¡¨å¯ä»¥åˆ†ä¸ºæ°´å¹³åˆ†åº“åˆ†è¡¨å’Œå‚ç›´åˆ†åº“åˆ†è¡¨ä¸¤ç§æ–¹å¼ï¼š</p>
<h4 id="2-1-æ°´å¹³åˆ†è¡¨å®ç°ï¼ˆåŸºäºShardingSphereï¼‰"><a href="#2-1-æ°´å¹³åˆ†è¡¨å®ç°ï¼ˆåŸºäºShardingSphereï¼‰" class="headerlink" title="2.1 æ°´å¹³åˆ†è¡¨å®ç°ï¼ˆåŸºäºShardingSphereï¼‰"></a>2.1 æ°´å¹³åˆ†è¡¨å®ç°ï¼ˆåŸºäºShardingSphereï¼‰</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">shardingsphere:</span></span><br><span class="line">    <span class="attr">datasource:</span></span><br><span class="line">      <span class="attr">names:</span> <span class="string">ds0,</span> <span class="string">ds1</span></span><br><span class="line">      <span class="attr">ds0:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">jdbc-url:</span> <span class="string">jdbc:mysql://localhost:3306/db0?useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">      <span class="attr">ds1:</span></span><br><span class="line">        <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">        <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">        <span class="attr">jdbc-url:</span> <span class="string">jdbc:mysql://localhost:3306/db1?useSSL=false&amp;serverTimezone=UTC</span></span><br><span class="line">        <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">        <span class="attr">password:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">rules:</span></span><br><span class="line">      <span class="attr">sharding:</span></span><br><span class="line">        <span class="attr">tables:</span></span><br><span class="line">          <span class="attr">order:</span></span><br><span class="line">            <span class="attr">actual-data-nodes:</span> <span class="string">ds$&#123;0..1&#125;.order_$&#123;0..1&#125;</span></span><br><span class="line">            <span class="attr">database-strategy:</span></span><br><span class="line">              <span class="attr">inline:</span></span><br><span class="line">                <span class="attr">sharding-column:</span> <span class="string">user_id</span></span><br><span class="line">                <span class="attr">algorithm-expression:</span> <span class="string">ds$&#123;user_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span></span><br><span class="line">            <span class="attr">table-strategy:</span></span><br><span class="line">              <span class="attr">inline:</span></span><br><span class="line">                <span class="attr">sharding-column:</span> <span class="string">order_id</span></span><br><span class="line">                <span class="attr">algorithm-expression:</span> <span class="string">order_$&#123;order_id</span> <span class="string">%</span> <span class="number">2</span><span class="string">&#125;</span></span><br><span class="line">            <span class="attr">key-generator:</span></span><br><span class="line">              <span class="attr">column:</span> <span class="string">order_id</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">SNOWFLAKE</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-å‚ç›´åˆ†åº“åˆ†è¡¨"><a href="#2-2-å‚ç›´åˆ†åº“åˆ†è¡¨" class="headerlink" title="2.2 å‚ç›´åˆ†åº“åˆ†è¡¨"></a>2.2 å‚ç›´åˆ†åº“åˆ†è¡¨</h4><p>å‚ç›´åˆ†åº“åˆ†è¡¨æ˜¯å°†è¡¨æŒ‰ç…§ä¸šåŠ¡åŠŸèƒ½æˆ–æ¨¡å—è¿›è¡Œæ‹†åˆ†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚ç›´åˆ†è¡¨ç¤ºä¾‹ï¼šå°†ç”¨æˆ·è¡¨æ‹†åˆ†ä¸ºåŸºæœ¬ä¿¡æ¯è¡¨å’Œæ‰©å±•ä¿¡æ¯è¡¨</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user_base&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserBase</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="comment">// å…¶ä»–å¸¸ç”¨å­—æ®µ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user_ext&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserExt</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    <span class="keyword">private</span> String avatar;</span><br><span class="line">    <span class="keyword">private</span> String bio;</span><br><span class="line">    <span class="comment">// å…¶ä»–ä¸å¸¸ç”¨å­—æ®µ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserBaseRepository userBaseRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserExtRepository userExtRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDTO <span class="title">getUserDetail</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ†åˆ«æŸ¥è¯¢ä¸¤å¼ è¡¨ï¼Œç„¶ååˆå¹¶ç»“æœ</span></span><br><span class="line">        UserBase userBase = userBaseRepository.findById(id).orElse(<span class="keyword">null</span>);</span><br><span class="line">        UserExt userExt = userExtRepository.findById(id).orElse(<span class="keyword">null</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (userBase == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        UserDTO userDTO = <span class="keyword">new</span> UserDTO();</span><br><span class="line">        <span class="comment">// å¤åˆ¶å±æ€§...</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> userDTO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€é«˜çº§ä¼˜åŒ–ï¼šå¼‚æ­¥å¤„ç†ä¸æ‰¹é‡æ“ä½œ-âš¡"><a href="#å…­ã€é«˜çº§ä¼˜åŒ–ï¼šå¼‚æ­¥å¤„ç†ä¸æ‰¹é‡æ“ä½œ-âš¡" class="headerlink" title="å…­ã€é«˜çº§ä¼˜åŒ–ï¼šå¼‚æ­¥å¤„ç†ä¸æ‰¹é‡æ“ä½œ âš¡"></a>å…­ã€é«˜çº§ä¼˜åŒ–ï¼šå¼‚æ­¥å¤„ç†ä¸æ‰¹é‡æ“ä½œ âš¡</h2><h3 id="1-å¼‚æ­¥æŸ¥è¯¢ä¸å¹¶è¡Œå¤„ç†"><a href="#1-å¼‚æ­¥æŸ¥è¯¢ä¸å¹¶è¡Œå¤„ç†" class="headerlink" title="1. å¼‚æ­¥æŸ¥è¯¢ä¸å¹¶è¡Œå¤„ç†"></a>1. å¼‚æ­¥æŸ¥è¯¢ä¸å¹¶è¡Œå¤„ç†</h3><p>å¯¹äºè€—æ—¶çš„æŸ¥è¯¢æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼‚æ­¥å¤„ç†å’Œå¹¶è¡Œå¤„ç†æ¥æé«˜æ•ˆç‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProductMapper productMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> CompletableFuture&lt;List&lt;Order&gt;&gt; findOrdersByUserIdAsync(Long userId) &#123;</span><br><span class="line">        List&lt;Order&gt; orders = orderMapper.findByUserId(userId);</span><br><span class="line">        <span class="keyword">return</span> CompletableFuture.completedFuture(orders);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OrderDetailDTO <span class="title">getOrderDetail</span><span class="params">(Long orderId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å¹¶è¡ŒæŸ¥è¯¢è®¢å•ã€å•†å“å’Œç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        CompletableFuture&lt;Order&gt; orderFuture = CompletableFuture.supplyAsync(() -&gt; </span><br><span class="line">            orderMapper.findById(orderId)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        CompletableFuture&lt;List&lt;Product&gt;&gt; productsFuture = orderFuture.thenApplyAsync(order -&gt; </span><br><span class="line">            productMapper.findByOrderId(orderId)</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        CompletableFuture&lt;User&gt; userFuture = orderFuture.thenApplyAsync(order -&gt; </span><br><span class="line">            userMapper.findById(order.getUserId())</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç­‰å¾…æ‰€æœ‰æŸ¥è¯¢å®Œæˆå¹¶åˆå¹¶ç»“æœ</span></span><br><span class="line">        CompletableFuture&lt;OrderDetailDTO&gt; resultFuture = CompletableFuture.allOf(orderFuture, productsFuture, userFuture)</span><br><span class="line">            .thenApplyAsync(v -&gt; &#123;</span><br><span class="line">                OrderDetailDTO dto = <span class="keyword">new</span> OrderDetailDTO();</span><br><span class="line">                dto.setOrder(orderFuture.join());</span><br><span class="line">                dto.setProducts(productsFuture.join());</span><br><span class="line">                dto.setUser(userFuture.join());</span><br><span class="line">                <span class="keyword">return</span> dto;</span><br><span class="line">            &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> resultFuture.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;è·å–è®¢å•è¯¦æƒ…å¤±è´¥&quot;</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ‰¹é‡æ“ä½œä¼˜åŒ–"><a href="#2-æ‰¹é‡æ“ä½œä¼˜åŒ–" class="headerlink" title="2. æ‰¹é‡æ“ä½œä¼˜åŒ–"></a>2. æ‰¹é‡æ“ä½œä¼˜åŒ–</h3><p>æ‰¹é‡æ“ä½œå¯ä»¥æ˜¾è‘—å‡å°‘æ•°æ®åº“äº¤äº’æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BatchOperationService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchInsertUsers</span><span class="params">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;INSERT INTO user (name, email, age) VALUES (?, ?, ?)&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        jdbcTemplate.batchUpdate(sql, <span class="keyword">new</span> BatchPreparedStatementSetter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValues</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">                User user = users.get(i);</span><br><span class="line">                ps.setString(<span class="number">1</span>, user.getName());</span><br><span class="line">                ps.setString(<span class="number">2</span>, user.getEmail());</span><br><span class="line">                ps.setInt(<span class="number">3</span>, user.getAge());</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBatchSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> users.size();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">batchUpdateUsers</span><span class="params">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ†æ‰¹å¤„ç†ï¼Œæ¯æ‰¹å¤„ç†1000æ¡</span></span><br><span class="line">        <span class="keyword">int</span> batchSize = <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">int</span> totalSize = users.size();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; totalSize; i += batchSize) &#123;</span><br><span class="line">            <span class="keyword">int</span> endIndex = Math.min(i + batchSize, totalSize);</span><br><span class="line">            List&lt;User&gt; batchUsers = users.subList(i, endIndex);</span><br><span class="line">            </span><br><span class="line">            String sql = <span class="string">&quot;UPDATE user SET name = ?, email = ?, age = ? WHERE id = ?&quot;</span>;</span><br><span class="line">            jdbcTemplate.batchUpdate(sql, <span class="keyword">new</span> BatchPreparedStatementSetter() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValues</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> j)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">                    User user = batchUsers.get(j);</span><br><span class="line">                    ps.setString(<span class="number">1</span>, user.getName());</span><br><span class="line">                    ps.setString(<span class="number">2</span>, user.getEmail());</span><br><span class="line">                    ps.setInt(<span class="number">3</span>, user.getAge());</span><br><span class="line">                    ps.setLong(<span class="number">4</span>, user.getId());</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getBatchSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> batchUsers.size();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€æ€»ç»“ä¸æŒç»­ä¼˜åŒ–å»ºè®®-ğŸ“‹"><a href="#ä¸ƒã€æ€»ç»“ä¸æŒç»­ä¼˜åŒ–å»ºè®®-ğŸ“‹" class="headerlink" title="ä¸ƒã€æ€»ç»“ä¸æŒç»­ä¼˜åŒ–å»ºè®® ğŸ“‹"></a>ä¸ƒã€æ€»ç»“ä¸æŒç»­ä¼˜åŒ–å»ºè®® ğŸ“‹</h2><p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£äº†Javaæ•°æ®è®¿é—®å±‚ä¼˜åŒ–çš„å„ç§ç­–ç•¥å’Œæœ€ä½³å®è·µï¼ŒåŒ…æ‹¬SQLä¼˜åŒ–ã€ORMæ¡†æ¶ä¼˜åŒ–ã€å¤šçº§ç¼“å­˜æ¶æ„ã€è¯»å†™åˆ†ç¦»ä¸åˆ†åº“åˆ†è¡¨ã€å¼‚æ­¥å¤„ç†ä¸æ‰¹é‡æ“ä½œç­‰æ–¹é¢çš„å†…å®¹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›æŒç»­ä¼˜åŒ–çš„å»ºè®®ï¼š</p>
<ol>
<li><p><strong>å»ºç«‹æ€§èƒ½åŸºå‡†</strong>ï¼šå®šæœŸè¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œå»ºç«‹æ€§èƒ½åŸºå‡†ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°æ€§èƒ½é—®é¢˜ã€‚</p>
</li>
<li><p><strong>ç›‘æ§ä¸å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œå–„çš„æ•°æ®è®¿é—®å±‚ç›‘æ§ä½“ç³»ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³æ€§èƒ½é—®é¢˜ã€‚</p>
</li>
<li><p><strong>æŒç»­å­¦ä¹ ä¸å®è·µ</strong>ï¼šæ•°æ®åº“æŠ€æœ¯å’Œä¼˜åŒ–æ–¹æ³•åœ¨ä¸æ–­å‘å±•ï¼Œéœ€è¦æŒç»­å­¦ä¹ å’Œå®è·µã€‚</p>
</li>
<li><p><strong>ç»“åˆä¸šåŠ¡åœºæ™¯</strong>ï¼šä¸åŒçš„ä¸šåŠ¡åœºæ™¯æœ‰ä¸åŒçš„ä¼˜åŒ–éœ€æ±‚ï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç­–ç•¥ã€‚</p>
</li>
<li><p><strong>æ€§èƒ½ä¸ä»£ç å¯ç»´æŠ¤æ€§å¹³è¡¡</strong>ï¼šåœ¨è¿½æ±‚æ€§èƒ½çš„åŒæ—¶ï¼Œä¹Ÿè¦è€ƒè™‘ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œé¿å…è¿‡åº¦ä¼˜åŒ–ã€‚</p>
</li>
</ol>
<p>æ•°æ®è®¿é—®å±‚ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°ç›‘æ§ã€åˆ†æå’Œä¼˜åŒ–ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿä¸ºä½ æä¾›ä¸€äº›æœ‰ç”¨çš„æŒ‡å¯¼å’Œå¯å‘ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ˜Š</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2025/01/15/ai/2025-ai-development-tools-comparison/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/01/15/ai/2025-ai-development-tools-comparison/" class="post-title-link" itemprop="url">2025å¹´AIå¼€å‘å·¥å…·å…¨æ™¯ï¼šæ·±åº¦å¯¹æ¯”ä¸æœªæ¥è¶‹åŠ¿</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-01-15 00:00:00" itemprop="dateCreated datePublished" datetime="2025-01-15T00:00:00+08:00">2025-01-15</time>
    </span>

  
    <span id="/2025/01/15/ai/2025-ai-development-tools-comparison/" class="post-meta-item leancloud_visitors" data-flag-title="2025å¹´AIå¼€å‘å·¥å…·å…¨æ™¯ï¼šæ·±åº¦å¯¹æ¯”ä¸æœªæ¥è¶‹åŠ¿" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>7k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>6 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="2025å¹´AIå¼€å‘å·¥å…·å…¨æ™¯ï¼šæ·±åº¦å¯¹æ¯”ä¸æœªæ¥è¶‹åŠ¿-ğŸ¤–ğŸ’»"><a href="#2025å¹´AIå¼€å‘å·¥å…·å…¨æ™¯ï¼šæ·±åº¦å¯¹æ¯”ä¸æœªæ¥è¶‹åŠ¿-ğŸ¤–ğŸ’»" class="headerlink" title="2025å¹´AIå¼€å‘å·¥å…·å…¨æ™¯ï¼šæ·±åº¦å¯¹æ¯”ä¸æœªæ¥è¶‹åŠ¿ ğŸ¤–ğŸ’»"></a>2025å¹´AIå¼€å‘å·¥å…·å…¨æ™¯ï¼šæ·±åº¦å¯¹æ¯”ä¸æœªæ¥è¶‹åŠ¿ ğŸ¤–ğŸ’»</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ éšç€ç”Ÿæˆå¼AIæŠ€æœ¯çš„æŒç»­çªç ´ï¼ŒAIå¼€å‘å·¥å…·ç”Ÿæ€æ­£åœ¨ç»å†å‰æ‰€æœªæœ‰çš„å˜é©ã€‚2025å¹´ï¼ŒAIå¼€å‘å·¥å…·ä¸ä»…åœ¨åŠŸèƒ½ä¸Šæ›´åŠ å…¨é¢ï¼Œæ›´åœ¨æ™ºèƒ½åŒ–ã€ä¸ªæ€§åŒ–å’Œé›†æˆæ€§æ–¹é¢å®ç°äº†è´¨çš„é£è·ƒã€‚ä»Šå¤©ï¼Œæˆ‘å°†ä¸ºå¤§å®¶æ·±åº¦å‰–æ2025å¹´ä¸»æµAIå¼€å‘å·¥å…·çš„ç‰¹ç‚¹ã€ä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨è¿™ä¸ªå¿«é€Ÿæ¼”è¿›çš„é¢†åŸŸä¸­æ‰¾åˆ°æœ€é€‚åˆè‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼ğŸš€</p>
<h2 id="ä¸€ã€æ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹ï¼šä»ä»£ç è¡¥å…¨åˆ°å…¨æµç¨‹åä½œ-ğŸ§‘ğŸ’»ğŸ¤ğŸ¤–"><a href="#ä¸€ã€æ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹ï¼šä»ä»£ç è¡¥å…¨åˆ°å…¨æµç¨‹åä½œ-ğŸ§‘ğŸ’»ğŸ¤ğŸ¤–" class="headerlink" title="ä¸€ã€æ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹ï¼šä»ä»£ç è¡¥å…¨åˆ°å…¨æµç¨‹åä½œ ğŸ§‘ğŸ’»ğŸ¤ğŸ¤–"></a>ä¸€ã€æ™ºèƒ½ç¼–ç¨‹åŠ©æ‰‹ï¼šä»ä»£ç è¡¥å…¨åˆ°å…¨æµç¨‹åä½œ ğŸ§‘ğŸ’»ğŸ¤ğŸ¤–</h2><p>2025å¹´çš„AIç¼–ç¨‹åŠ©æ‰‹å·²ç»è¶…è¶Šäº†ç®€å•çš„ä»£ç è¡¥å…¨åŠŸèƒ½ï¼Œè¿›åŒ–ä¸ºå…¨æµç¨‹çš„å¼€å‘åä½œä¼™ä¼´ã€‚</p>
<h3 id="2025å¹´ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹æ·±åº¦å¯¹æ¯”"><a href="#2025å¹´ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹æ·±åº¦å¯¹æ¯”" class="headerlink" title="2025å¹´ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹æ·±åº¦å¯¹æ¯”"></a>2025å¹´ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹æ·±åº¦å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>å·¥å…·åç§°</th>
<th>æ ¸å¿ƒèƒ½åŠ›</th>
<th>æ™ºèƒ½æ°´å¹³</th>
<th>åä½œåŠŸèƒ½</th>
<th>å®šä»·æ¨¡å¼</th>
<th>æœ€ä½³é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>GitHub Copilot Pro</strong></td>
<td>ä»£ç ç”Ÿæˆã€æ¶æ„å»ºè®®ã€è‡ªåŠ¨æµ‹è¯•</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>å›¢é˜ŸçŸ¥è¯†å…±äº«ã€ä»£ç è¯„å®¡è¾…åŠ©</td>
<td>30ç¾å…ƒ/æœˆ</td>
<td>ä¼ä¸šçº§åº”ç”¨å¼€å‘ã€å¤æ‚ç³»ç»Ÿæ„å»º</td>
</tr>
<tr>
<td><strong>TabNine Ultra</strong></td>
<td>ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç¼–ç ã€æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨æ‰«æ</td>
<td>L4çº§ï¼ˆé«˜çº§ï¼‰</td>
<td>å›¢é˜Ÿç¼–ç è§„èŒƒç»Ÿä¸€</td>
<td>25ç¾å…ƒ/æœˆ</td>
<td>å®‰å…¨å…³é”®å‹é¡¹ç›®ã€å¤šå›¢é˜Ÿåä½œ</td>
</tr>
<tr>
<td><strong>AWS CodeWhisperer X</strong></td>
<td>äº‘åŸç”Ÿå¼€å‘ã€æ— æœåŠ¡å™¨æ¶æ„ã€æˆæœ¬ä¼˜åŒ–</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>AWSèµ„æºæ™ºèƒ½é…ç½®</td>
<td>æŒ‰ä½¿ç”¨é‡è®¡è´¹</td>
<td>AWSäº‘åŸç”Ÿåº”ç”¨ã€å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ</td>
</tr>
<tr>
<td><strong>Google Gemini Code</strong></td>
<td>å¤šè¯­è¨€æ”¯æŒã€è·¨å¹³å°å¼€å‘ã€AIæ¨¡å‹é›†æˆ</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>è·¨å¹³å°å…¼å®¹æ€§æ£€æŸ¥</td>
<td>å…è´¹ç‰ˆ/å•†ä¸šç‰ˆ35ç¾å…ƒ/æœˆ</td>
<td>å¤šå¹³å°åº”ç”¨ã€AIé©±åŠ¨äº§å“å¼€å‘</td>
</tr>
<tr>
<td><strong>ChatGPT Dev Studio</strong></td>
<td>ä»£ç è§£é‡Šã€é‡æ„å»ºè®®ã€é”™è¯¯ä¿®å¤</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>å¼€å‘æµç¨‹æ™ºèƒ½è§„åˆ’</td>
<td>40ç¾å…ƒ/æœˆ</td>
<td>å¤æ‚é—®é¢˜è§£å†³ã€é—ç•™ç³»ç»Ÿç°ä»£åŒ–</td>
</tr>
<tr>
<td><strong>Claude DevTools</strong></td>
<td>é•¿ä¸Šä¸‹æ–‡ç†è§£ã€ç³»ç»Ÿçº§é‡æ„ã€æ–‡æ¡£ç”Ÿæˆ</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>æ¶æ„è®¾è®¡è¯„å®¡</td>
<td>ä¼ä¸šå®šåˆ¶</td>
<td>å¤§å‹ç³»ç»Ÿé‡æ„ã€æŠ€æœ¯å€ºåŠ¡ç®¡ç†</td>
</tr>
<tr>
<td><strong>Trae AI IDE</strong></td>
<td>ä¸€ä½“åŒ–å¼€å‘ç¯å¢ƒã€æ™ºèƒ½ç¼–ç ã€åä½œç¼–ç¨‹</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>å®æ—¶åä½œã€çŸ¥è¯†å…±äº«</td>
<td>å…è´¹ç‰ˆ/ä¼ä¸šç‰ˆ</td>
<td>å…¨æ ˆå¼€å‘ã€å›¢é˜Ÿåä½œé¡¹ç›®</td>
</tr>
<tr>
<td><strong>Joycode AI</strong></td>
<td>æ™ºèƒ½ç¼–ç ã€é¡¹ç›®ç®¡ç†é›†æˆã€æµç¨‹è‡ªåŠ¨åŒ–</td>
<td>L4çº§ï¼ˆé«˜çº§ï¼‰</td>
<td>å›¢é˜Ÿä»»åŠ¡åè°ƒã€è¿›åº¦è¿½è¸ª</td>
<td>å…è´¹ç‰ˆ/å•†ä¸šç‰ˆ</td>
<td>æ•æ·å¼€å‘ã€ä¸­å°å‹é¡¹ç›®</td>
</tr>
<tr>
<td><strong>Cursor AI</strong></td>
<td>ä¸“æ³¨ç¼–è¾‘å™¨ã€å¤šæ¨¡å‹æ”¯æŒã€ä»£ç å¯¼èˆª</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ</td>
<td>å…è´¹ç‰ˆ/ä¸“ä¸šç‰ˆ20ç¾å…ƒ/æœˆ</td>
<td>ä¸ªäººå¼€å‘è€…ã€å‰ç«¯å¼€å‘</td>
</tr>
<tr>
<td><strong>è±†åŒ…Devæ™ºèƒ½åŠ©æ‰‹</strong></td>
<td>ä¸­æ–‡ä¼˜åŒ–ã€å›½äº§åŒ–é€‚é…ã€å¤šæ¨¡æ€äº¤äº’</td>
<td>L4çº§ï¼ˆé«˜çº§ï¼‰</td>
<td>ä¼ä¸šçº§æƒé™ç®¡ç†</td>
<td>ä¼ä¸šå®šåˆ¶</td>
<td>å›½å†…ä¼ä¸šå¼€å‘ã€ä¸­æ–‡é¡¹ç›®</td>
</tr>
<tr>
<td><strong>CodeGeeX 5</strong></td>
<td>å¼€æºã€å¤šè¯­è¨€æ”¯æŒã€æœ¬åœ°éƒ¨ç½²</td>
<td>L4çº§ï¼ˆé«˜çº§ï¼‰</td>
<td>ç¤¾åŒºè´¡çŒ®</td>
<td>å¼€æºå…è´¹</td>
<td>å¼€æºé¡¹ç›®ã€éšç§æ•æ„Ÿåœºæ™¯</td>
</tr>
<tr>
<td><strong>Amazon Q Developer</strong></td>
<td>AWSæ·±åº¦é›†æˆã€ä»£ç ç†è§£ã€éƒ¨ç½²è‡ªåŠ¨åŒ–</td>
<td>L5çº§ï¼ˆä¸“å®¶çº§ï¼‰</td>
<td>å…¨æ ˆå¼€å‘å·¥ä½œæµ</td>
<td>35ç¾å…ƒ/æœˆ</td>
<td>AWSç”Ÿæ€ç³»ç»Ÿã€äº‘åŸç”Ÿå¼€å‘</td>
</tr>
</tbody></table>
<h3 id="æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°åŠŸèƒ½"><a href="#æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°åŠŸèƒ½" class="headerlink" title="æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°åŠŸèƒ½"></a>æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°åŠŸèƒ½</h3><p>2025å¹´çš„AIç¼–ç¨‹åŠ©æ‰‹æ™®éå…·å¤‡ä»¥ä¸‹é©å‘½æ€§åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>æ¶æ„çº§æ™ºèƒ½å»ºè®®</strong>ï¼šä¸ä»…å…³æ³¨ä»£ç ç»†èŠ‚ï¼Œæ›´èƒ½æä¾›ç³»ç»Ÿæ¶æ„å±‚é¢çš„ä¼˜åŒ–å»ºè®®</li>
<li><strong>å¤šæ¨¡æ€ç†è§£</strong>ï¼šèƒ½å¤ŸåŒæ—¶å¤„ç†ä»£ç ã€æ–‡æ¡£ã€å›¾è¡¨ç­‰å¤šç§å½¢å¼çš„ä¿¡æ¯</li>
<li><strong>å›¢é˜ŸçŸ¥è¯†æ•´åˆ</strong>ï¼šå­¦ä¹ å›¢é˜Ÿçš„ç¼–ç é£æ ¼ã€æœ€ä½³å®è·µå’Œä¸šåŠ¡é€»è¾‘ï¼Œæä¾›é«˜åº¦ä¸ªæ€§åŒ–çš„å»ºè®®</li>
<li><strong>è‡ªåŠ¨å®‰å…¨å®¡è®¡</strong>ï¼šåœ¨ç¼–ç è¿‡ç¨‹ä¸­å®æ—¶æ£€æµ‹å®‰å…¨æ¼æ´å’Œåˆè§„æ€§é—®é¢˜</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨GitHub Copilot Proç”Ÿæˆå¾®æœåŠ¡æ¶æ„ä»£ç </span></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, Depends, HTTPException</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Optional</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> asynccontextmanager</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨ç”Ÿæˆå¾®æœåŠ¡æ¶æ„ä»£ç ï¼ŒåŒ…å«å¯è§‚æµ‹æ€§ã€å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§è®¾è®¡</span></span><br><span class="line"><span class="meta">@asynccontextmanager</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">lifespan</span>(<span class="params">app: FastAPI</span>):</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–æ—¥å¿—ã€ç›‘æ§å’Œè¿½è¸ª</span></span><br><span class="line">    logging.basicConfig(level=logging.INFO)</span><br><span class="line">    <span class="comment"># å¯åŠ¨æ—¶æ³¨å†ŒæœåŠ¡åˆ°æœåŠ¡å‘ç°</span></span><br><span class="line">    register_service()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># ä¼˜é›…å…³é—­</span></span><br><span class="line">        deregister_service()</span><br><span class="line"></span><br><span class="line">app = FastAPI(lifespan=lifespan)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾èµ–æ³¨å…¥ï¼šæ•°æ®åº“ä¼šè¯</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_db</span>():</span></span><br><span class="line">    db = SessionLocal()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span> db</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        db.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># APIè·¯ç”±ï¼Œè‡ªåŠ¨åŒ…å«è¾“å…¥éªŒè¯ã€é”™è¯¯å¤„ç†å’Œæ–‡æ¡£</span></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/api/v1/resources/&#123;resource_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">get_resource</span>(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">    resource_id: <span class="built_in">int</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    db: Session = Depends(<span class="params">get_db</span>),</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="comment"># è‡ªåŠ¨å¤„ç†è®¤è¯å’Œæˆæƒ</span></span></span></span><br><span class="line"><span class="params"><span class="function">    current_user: User = Depends(<span class="params">get_current_user</span>)</span></span></span><br><span class="line"><span class="params"><span class="function"></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è·å–èµ„æºè¯¦æƒ…ï¼Œè‡ªåŠ¨ç”ŸæˆOpenAPIæ–‡æ¡£</span></span><br><span class="line"><span class="string">    - æ”¯æŒç»†ç²’åº¦è®¿é—®æ§åˆ¶</span></span><br><span class="line"><span class="string">    - å®ç°è¯·æ±‚é™æµå’Œç†”æ–­</span></span><br><span class="line"><span class="string">    - è‡ªåŠ¨è®°å½•æ€§èƒ½æŒ‡æ ‡</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    resource = db.query(Resource).<span class="built_in">filter</span>(Resource.<span class="built_in">id</span> == resource_id).first()</span><br><span class="line">    <span class="keyword">if</span> resource <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">404</span>, detail=<span class="string">&quot;Resource not found&quot;</span>)</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨è¿›è¡Œè®¿é—®æƒé™æ£€æŸ¥</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> has_access(current_user, resource):</span><br><span class="line">        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">403</span>, detail=<span class="string">&quot;Access denied&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> resource</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•</span></span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€AIå¼€å‘æ¡†æ¶ï¼šä»æ¨¡å‹è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨æ ˆæ”¯æŒ-ğŸ§ ğŸ› ï¸"><a href="#äºŒã€AIå¼€å‘æ¡†æ¶ï¼šä»æ¨¡å‹è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨æ ˆæ”¯æŒ-ğŸ§ ğŸ› ï¸" class="headerlink" title="äºŒã€AIå¼€å‘æ¡†æ¶ï¼šä»æ¨¡å‹è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨æ ˆæ”¯æŒ ğŸ§ ğŸ› ï¸"></a>äºŒã€AIå¼€å‘æ¡†æ¶ï¼šä»æ¨¡å‹è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨æ ˆæ”¯æŒ ğŸ§ ğŸ› ï¸</h2><p>2025å¹´çš„AIå¼€å‘æ¡†æ¶å·²ç»å®ç°äº†ä»æ¨¡å‹è®¾è®¡ã€è®­ç»ƒåˆ°éƒ¨ç½²çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–ï¼Œå¤§å¹…é™ä½äº†AIåº”ç”¨å¼€å‘çš„é—¨æ§›ã€‚</p>
<h3 id="ä¸»æµAIå¼€å‘æ¡†æ¶å¯¹æ¯”"><a href="#ä¸»æµAIå¼€å‘æ¡†æ¶å¯¹æ¯”" class="headerlink" title="ä¸»æµAIå¼€å‘æ¡†æ¶å¯¹æ¯”"></a>ä¸»æµAIå¼€å‘æ¡†æ¶å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>æ¡†æ¶åç§°</th>
<th>æ ¸å¿ƒä¼˜åŠ¿</th>
<th>è‡ªåŠ¨åŒ–ç¨‹åº¦</th>
<th>éƒ¨ç½²é€‰é¡¹</th>
<th>ç”Ÿæ€ç³»ç»Ÿ</th>
<th>å­¦ä¹ æ›²çº¿</th>
</tr>
</thead>
<tbody><tr>
<td><strong>PyTorch 3.0</strong></td>
<td>åŠ¨æ€è®¡ç®—å›¾ã€ç ”ç©¶å‹å¥½ã€æ¨¡å‹ä¸°å¯Œ</td>
<td>ä¸­é«˜</td>
<td>å¤šå¹³å°æ”¯æŒ</td>
<td>æå…¶ä¸°å¯Œ</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td><strong>TensorFlow 3.0</strong></td>
<td>é™æ€è®¡ç®—å›¾ã€ç”Ÿäº§ä¼˜åŒ–ã€åˆ†å¸ƒå¼è®­ç»ƒ</td>
<td>é«˜</td>
<td>äº‘è¾¹ç«¯ä¸€ä½“åŒ–</td>
<td>ä¼ä¸šçº§</td>
<td>è¾ƒé™¡</td>
</tr>
<tr>
<td><strong>Hugging Face Transformers X</strong></td>
<td>é¢„è®­ç»ƒæ¨¡å‹åº“ã€ä¸€é”®å¾®è°ƒã€æ¨¡å‹å…±äº«</td>
<td>æé«˜</td>
<td>å®¹å™¨åŒ–éƒ¨ç½²</td>
<td>å¼€å‘è€…å‹å¥½</td>
<td>å¹³ç¼“</td>
</tr>
<tr>
<td><strong>LangChain 4.0</strong></td>
<td>LLMåº”ç”¨ç¼–æ’ã€å¤šæ¨¡æ€é›†æˆã€Agentæ¡†æ¶</td>
<td>æé«˜</td>
<td>å¼¹æ€§æ‰©å±•</td>
<td>å¿«é€Ÿè¿­ä»£</td>
<td>å¹³ç¼“</td>
</tr>
<tr>
<td><strong>MXNet 2.0</strong></td>
<td>æ··åˆç²¾åº¦è®­ç»ƒã€å†…å­˜ä¼˜åŒ–ã€å¤šè¯­è¨€æ”¯æŒ</td>
<td>ä¸­é«˜</td>
<td>è·¨å¹³å°éƒ¨ç½²</td>
<td>å­¦æœ¯å¯¼å‘</td>
<td>è¾ƒé™¡</td>
</tr>
<tr>
<td><strong>JAX/Flax</strong></td>
<td>é«˜æ€§èƒ½è®¡ç®—ã€è‡ªåŠ¨å¾®åˆ†ã€å¯ç»„åˆå˜æ¢</td>
<td>ä¸­</td>
<td>å¤§è§„æ¨¡åˆ†å¸ƒå¼</td>
<td>ç ”ç©¶å‰æ²¿</td>
<td>é™¡å³­</td>
</tr>
</tbody></table>
<h3 id="å¼€å‘æ¡†æ¶çš„æ™ºèƒ½åŒ–æ¼”è¿›"><a href="#å¼€å‘æ¡†æ¶çš„æ™ºèƒ½åŒ–æ¼”è¿›" class="headerlink" title="å¼€å‘æ¡†æ¶çš„æ™ºèƒ½åŒ–æ¼”è¿›"></a>å¼€å‘æ¡†æ¶çš„æ™ºèƒ½åŒ–æ¼”è¿›</h3><p>2025å¹´çš„AIå¼€å‘æ¡†æ¶å‘ˆç°ä»¥ä¸‹æ˜¾è‘—ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨æ¶æ„æœç´¢</strong>ï¼šæ¡†æ¶èƒ½å¤Ÿæ ¹æ®ä»»åŠ¡éœ€æ±‚è‡ªåŠ¨æœç´¢æœ€ä¼˜çš„æ¨¡å‹æ¶æ„</li>
<li><strong>æ™ºèƒ½è¶…å‚æ•°ä¼˜åŒ–</strong>ï¼šè‡ªåŠ¨è°ƒæ•´è®­ç»ƒå‚æ•°ï¼Œæœ€å¤§åŒ–æ¨¡å‹æ€§èƒ½</li>
<li><strong>ä¸€é”®æ¨¡å‹å‹ç¼©</strong>ï¼šè‡ªåŠ¨åº”ç”¨é‡åŒ–ã€å‰ªæç­‰æŠ€æœ¯ï¼Œä¼˜åŒ–éƒ¨ç½²æ€§èƒ½</li>
<li><strong>ç«¯åˆ°ç«¯å·¥ä½œæµ</strong>ï¼šä»æ•°æ®å‡†å¤‡åˆ°æ¨¡å‹éƒ¨ç½²çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨Hugging Face Transformers Xè¿›è¡Œæ¨¡å‹å¾®è°ƒ</span></span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM, AutoTokenizer, TrainingArguments, BitsAndBytesConfig</span><br><span class="line"><span class="keyword">from</span> datasets <span class="keyword">import</span> load_dataset</span><br><span class="line"><span class="keyword">from</span> trl <span class="keyword">import</span> SFTTrainer</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ™ºèƒ½æ¨¡å‹é€‰æ‹©å’Œé…ç½®</span></span><br><span class="line">model_id = <span class="string">&quot;mistralai/Mistral-7B-v0.3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨æ£€æµ‹ç¡¬ä»¶å¹¶ä¼˜åŒ–é…ç½®</span></span><br><span class="line">quantization_config = BitsAndBytesConfig(</span><br><span class="line">    load_in_4bit=<span class="literal">True</span>,</span><br><span class="line">    bnb_4bit_quant_type=<span class="string">&quot;nf4&quot;</span>,</span><br><span class="line">    bnb_4bit_use_double_quant=<span class="literal">True</span>,</span><br><span class="line">    bnb_4bit_compute_dtype=<span class="string">&quot;float16&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨åŠ è½½æ¨¡å‹å’Œåˆ†è¯å™¨</span></span><br><span class="line">model = AutoModelForCausalLM.from_pretrained(</span><br><span class="line">    model_id,</span><br><span class="line">    quantization_config=quantization_config,</span><br><span class="line">    device_map=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    trust_remote_code=<span class="literal">True</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨åº”ç”¨æœ€ä½³å®è·µé…ç½®</span></span><br><span class="line">    use_cache=<span class="literal">False</span>,</span><br><span class="line">    attn_implementation=<span class="string">&quot;flash_attention_2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(model_id)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½å’Œé¢„å¤„ç†æ•°æ®</span></span><br><span class="line">dataset = load_dataset(<span class="string">&quot;your_dataset&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ™ºèƒ½è®­ç»ƒå‚æ•°é…ç½®</span></span><br><span class="line"><span class="comment"># æ ¹æ®æ¨¡å‹å¤§å°ã€æ•°æ®è§„æ¨¡å’Œç¡¬ä»¶è‡ªåŠ¨æ¨èæœ€ä½³å‚æ•°</span></span><br><span class="line">args = TrainingArguments(</span><br><span class="line">    output_dir=<span class="string">&quot;./results&quot;</span>,</span><br><span class="line">    num_train_epochs=<span class="number">3</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨è®¡ç®—æœ€ä½³æ‰¹æ¬¡å¤§å°</span></span><br><span class="line">    per_device_train_batch_size=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    gradient_accumulation_steps=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    optim=<span class="string">&quot;paged_adamw_32bit&quot;</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨å­¦ä¹ ç‡è°ƒåº¦</span></span><br><span class="line">    learning_rate=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨å¯ç”¨æ¢¯åº¦æ£€æŸ¥ç‚¹</span></span><br><span class="line">    gradient_checkpointing=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨å¯ç”¨FSDPæˆ–DDP</span></span><br><span class="line">    fsdp=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨å¯ç”¨æ··åˆç²¾åº¦è®­ç»ƒ</span></span><br><span class="line">    fp16=<span class="string">&quot;auto&quot;</span>,</span><br><span class="line">    logging_steps=<span class="number">10</span>,</span><br><span class="line">    save_strategy=<span class="string">&quot;epoch&quot;</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨å¯ç”¨æ—©åœ</span></span><br><span class="line">    load_best_model_at_end=<span class="literal">True</span>,</span><br><span class="line">    metric_for_best_model=<span class="string">&quot;eval_loss&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè®­ç»ƒå™¨</span></span><br><span class="line"><span class="comment"># è‡ªåŠ¨åº”ç”¨æœ€æ–°çš„è®­ç»ƒæŠ€æœ¯</span></span><br><span class="line"> trainer = SFTTrainer(</span><br><span class="line">    model=model,</span><br><span class="line">    tokenizer=tokenizer,</span><br><span class="line">    args=args,</span><br><span class="line">    train_dataset=dataset[<span class="string">&quot;train&quot;</span>],</span><br><span class="line">    eval_dataset=dataset[<span class="string">&quot;test&quot;</span>],</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ•°æ®é¢„å¤„ç†ç­–ç•¥</span></span><br><span class="line">    dataset_text_field=<span class="string">&quot;text&quot;</span>,</span><br><span class="line">    <span class="comment"># è‡ªåŠ¨å¯ç”¨PEFTæŠ€æœ¯</span></span><br><span class="line">    peft_config=<span class="string">&quot;auto&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹è®­ç»ƒ</span></span><br><span class="line"> trainer.train()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€é”®éƒ¨ç½²åˆ°å¤šç§ç¯å¢ƒ</span></span><br><span class="line"> trainer.push_to_hub(<span class="string">&quot;your_finetuned_model&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€AIåº”ç”¨éƒ¨ç½²å¹³å°ï¼šäº‘è¾¹ç«¯ä¸€ä½“åŒ–çš„æ™ºèƒ½åŸºç¡€è®¾æ–½-â˜ï¸ğŸ—ï¸"><a href="#ä¸‰ã€AIåº”ç”¨éƒ¨ç½²å¹³å°ï¼šäº‘è¾¹ç«¯ä¸€ä½“åŒ–çš„æ™ºèƒ½åŸºç¡€è®¾æ–½-â˜ï¸ğŸ—ï¸" class="headerlink" title="ä¸‰ã€AIåº”ç”¨éƒ¨ç½²å¹³å°ï¼šäº‘è¾¹ç«¯ä¸€ä½“åŒ–çš„æ™ºèƒ½åŸºç¡€è®¾æ–½ â˜ï¸ğŸ—ï¸"></a>ä¸‰ã€AIåº”ç”¨éƒ¨ç½²å¹³å°ï¼šäº‘è¾¹ç«¯ä¸€ä½“åŒ–çš„æ™ºèƒ½åŸºç¡€è®¾æ–½ â˜ï¸ğŸ—ï¸</h2><p>2025å¹´çš„AIåº”ç”¨éƒ¨ç½²å¹³å°å·²ç»å®ç°äº†äº‘è¾¹ç«¯ä¸€ä½“åŒ–ï¼Œæ”¯æŒæ¨¡å‹åœ¨ä¸åŒç¯å¢ƒä¸­çš„æ— ç¼éƒ¨ç½²å’Œä¼˜åŒ–ã€‚</p>
<h3 id="ä¸»æµAIéƒ¨ç½²å¹³å°å¯¹æ¯”"><a href="#ä¸»æµAIéƒ¨ç½²å¹³å°å¯¹æ¯”" class="headerlink" title="ä¸»æµAIéƒ¨ç½²å¹³å°å¯¹æ¯”"></a>ä¸»æµAIéƒ¨ç½²å¹³å°å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>å¹³å°åç§°</th>
<th>éƒ¨ç½²çµæ´»æ€§</th>
<th>æ¨¡å‹ä¼˜åŒ–</th>
<th>æˆæœ¬æ•ˆç‡</th>
<th>ç›‘æ§èƒ½åŠ›</th>
<th>å®‰å…¨ç‰¹æ€§</th>
</tr>
</thead>
<tbody><tr>
<td><strong>AWS SageMaker Studio</strong></td>
<td>æé«˜</td>
<td>è‡ªåŠ¨æ¨¡å‹å‹ç¼©ã€ç¼–è¯‘ä¼˜åŒ–</td>
<td>æŒ‰éœ€è®¡è´¹</td>
<td>å…¨é“¾è·¯ç›‘æ§</td>
<td>ä¼ä¸šçº§å®‰å…¨åˆè§„</td>
</tr>
<tr>
<td><strong>Google Vertex AI</strong></td>
<td>é«˜</td>
<td>è‡ªåŠ¨MLOpsã€A/Bæµ‹è¯•</td>
<td>åˆ†å±‚å®šä»·</td>
<td>å¯è§£é‡Šæ€§åˆ†æ</td>
<td>æ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶</td>
</tr>
<tr>
<td><strong>Azure AI Studio</strong></td>
<td>é«˜</td>
<td>æ¨¡å‹åŠ é€Ÿã€å®¹å™¨ä¼˜åŒ–</td>
<td>åŒ…å¹´åŒ…æœˆ/æŒ‰éœ€</td>
<td>å®æ—¶ç›‘æ§é¢„è­¦</td>
<td>èº«ä»½è®¤è¯ã€å¨èƒæ£€æµ‹</td>
</tr>
<tr>
<td><strong>Hugging Face Inference Hub</strong></td>
<td>æé«˜</td>
<td>è‡ªåŠ¨æ‰©ç¼©å®¹ã€ä¼˜åŒ–è·¯ç”±</td>
<td>æŒ‰è¯·æ±‚è®¡è´¹</td>
<td>æ€§èƒ½æŒ‡æ ‡è¿½è¸ª</td>
<td>APIå¯†é’¥ã€é€Ÿç‡é™åˆ¶</td>
</tr>
<tr>
<td><strong>NVIDIA Triton Inference Server</strong></td>
<td>é«˜</td>
<td>GPUä¼˜åŒ–ã€ä½å»¶è¿Ÿæ¨ç†</td>
<td>å¼€æºå…è´¹</td>
<td>è¯¦ç»†æ€§èƒ½åˆ†æ</td>
<td>è®¿é—®æ§åˆ¶ã€æ¨¡å‹åŠ å¯†</td>
</tr>
<tr>
<td><strong>Vercel AI SDK</strong></td>
<td>æé«˜</td>
<td>è¾¹ç¼˜ç¼“å­˜ã€CDNåŠ é€Ÿ</td>
<td>å…è´¹å±‚/é˜¶æ¢¯å®šä»·</td>
<td>åŸºæœ¬ç›‘æ§</td>
<td>è¾¹ç¼˜å®‰å…¨ã€æ•°æ®éš”ç¦»</td>
</tr>
</tbody></table>
<h3 id="éƒ¨ç½²å¹³å°çš„åˆ›æ–°ç‰¹æ€§"><a href="#éƒ¨ç½²å¹³å°çš„åˆ›æ–°ç‰¹æ€§" class="headerlink" title="éƒ¨ç½²å¹³å°çš„åˆ›æ–°ç‰¹æ€§"></a>éƒ¨ç½²å¹³å°çš„åˆ›æ–°ç‰¹æ€§</h3><p>2025å¹´çš„AIéƒ¨ç½²å¹³å°æ™®éå…·å¤‡ä»¥ä¸‹åˆ›æ–°ç‰¹æ€§ï¼š</p>
<ol>
<li><strong>æ™ºèƒ½è·¯ç”±ä¸è´Ÿè½½å‡è¡¡</strong>ï¼šæ ¹æ®è¯·æ±‚ç‰¹å¾å’Œæ¨¡å‹ç‰¹æ€§è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜éƒ¨ç½²ç­–ç•¥</li>
<li><strong>åŠ¨æ€èµ„æºåˆ†é…</strong>ï¼šæ ¹æ®å®æ—¶æµé‡è‡ªåŠ¨è°ƒæ•´è®¡ç®—èµ„æºï¼Œä¼˜åŒ–æˆæœ¬å’Œæ€§èƒ½</li>
<li><strong>è¾¹ç¼˜AIåŠ é€Ÿ</strong>ï¼šåœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šéƒ¨ç½²è½»é‡çº§æ¨¡å‹ï¼Œå®ç°ä½å»¶è¿Ÿå“åº”</li>
<li><strong>è”é‚¦å­¦ä¹ æ”¯æŒ</strong>ï¼šåœ¨ä¿æŠ¤æ•°æ®éšç§çš„å‰æä¸‹å®ç°æ¨¡å‹ååŒè®­ç»ƒ</li>
</ol>
<h2 id="å››ã€ä½ä»£ç -æ— ä»£ç AIå¹³å°ï¼šæ™®æƒ AIå¼€å‘çš„æ–°èŒƒå¼-ğŸ§©ğŸš€"><a href="#å››ã€ä½ä»£ç -æ— ä»£ç AIå¹³å°ï¼šæ™®æƒ AIå¼€å‘çš„æ–°èŒƒå¼-ğŸ§©ğŸš€" class="headerlink" title="å››ã€ä½ä»£ç /æ— ä»£ç AIå¹³å°ï¼šæ™®æƒ AIå¼€å‘çš„æ–°èŒƒå¼ ğŸ§©ğŸš€"></a>å››ã€ä½ä»£ç /æ— ä»£ç AIå¹³å°ï¼šæ™®æƒ AIå¼€å‘çš„æ–°èŒƒå¼ ğŸ§©ğŸš€</h2><p>ä½ä»£ç /æ— ä»£ç AIå¹³å°æ­£åœ¨è®©AIå¼€å‘å˜å¾—æ›´åŠ æ™®æƒ ï¼Œå³ä½¿æ²¡æœ‰æ·±åšçš„æŠ€æœ¯èƒŒæ™¯ï¼Œä¹Ÿèƒ½å¿«é€Ÿæ„å»ºå’Œéƒ¨ç½²AIåº”ç”¨ã€‚</p>
<h3 id="ä¸»æµä½ä»£ç -æ— ä»£ç AIå¹³å°å¯¹æ¯”"><a href="#ä¸»æµä½ä»£ç -æ— ä»£ç AIå¹³å°å¯¹æ¯”" class="headerlink" title="ä¸»æµä½ä»£ç /æ— ä»£ç AIå¹³å°å¯¹æ¯”"></a>ä¸»æµä½ä»£ç /æ— ä»£ç AIå¹³å°å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>å¹³å°åç§°</th>
<th>æ˜“ç”¨æ€§</th>
<th>åŠŸèƒ½ä¸°å¯Œåº¦</th>
<th>é›†æˆèƒ½åŠ›</th>
<th>å®šä»·æ¨¡å¼</th>
<th>æœ€ä½³åº”ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Microsoft Power Apps AI Builder</strong></td>
<td>æé«˜</td>
<td>ä¸­é«˜</td>
<td>å¾®è½¯ç”Ÿæ€æ·±åº¦é›†æˆ</td>
<td>æŒ‰ç”¨æˆ·/æŒ‰å®¹é‡</td>
<td>ä¼ä¸šå†…éƒ¨åº”ç”¨ã€ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–</td>
</tr>
<tr>
<td><strong>Google AppSheet AI</strong></td>
<td>æé«˜</td>
<td>é«˜</td>
<td>Google Workspaceé›†æˆ</td>
<td>å…è´¹ç‰ˆ/å•†ä¸šç‰ˆ</td>
<td>è½»é‡çº§åº”ç”¨ã€å›¢é˜Ÿåä½œå·¥å…·</td>
</tr>
<tr>
<td><strong>OutSystems AI</strong></td>
<td>é«˜</td>
<td>æé«˜</td>
<td>ä¼ä¸šç³»ç»Ÿé›†æˆ</td>
<td>æŒ‰ç”¨æˆ·è®¢é˜…</td>
<td>å¤æ‚ä¼ä¸šåº”ç”¨ã€æ•°å­—åŒ–è½¬å‹</td>
</tr>
<tr>
<td><strong>Appian AI</strong></td>
<td>é«˜</td>
<td>æé«˜</td>
<td>æµç¨‹è‡ªåŠ¨åŒ–é›†æˆ</td>
<td>æŒ‰ç”¨æˆ·è®¢é˜…</td>
<td>ä¸šåŠ¡æµç¨‹ä¼˜åŒ–ã€å®¢æˆ·ä½“éªŒæå‡</td>
</tr>
<tr>
<td><strong>Zapier AI Actions</strong></td>
<td>æé«˜</td>
<td>ä¸­</td>
<td>5000+åº”ç”¨é›†æˆ</td>
<td>åˆ†å±‚å®šä»·</td>
<td>è·¨åº”ç”¨è‡ªåŠ¨åŒ–ã€å·¥ä½œæµä¼˜åŒ–</td>
</tr>
<tr>
<td><strong>Adalo AI</strong></td>
<td>æé«˜</td>
<td>ä¸­</td>
<td>åŸºç¡€APIé›†æˆ</td>
<td>åˆ†å±‚å®šä»·</td>
<td>ç§»åŠ¨åº”ç”¨ã€ç®€å•webåº”ç”¨</td>
</tr>
</tbody></table>
<h3 id="ä½ä»£ç å¹³å°çš„AIèµ‹èƒ½"><a href="#ä½ä»£ç å¹³å°çš„AIèµ‹èƒ½" class="headerlink" title="ä½ä»£ç å¹³å°çš„AIèµ‹èƒ½"></a>ä½ä»£ç å¹³å°çš„AIèµ‹èƒ½</h3><p>2025å¹´çš„ä½ä»£ç /æ— ä»£ç å¹³å°é€šè¿‡AIæŠ€æœ¯å®ç°äº†ä»¥ä¸‹çªç ´ï¼š</p>
<ol>
<li><strong>è‡ªç„¶è¯­è¨€å¼€å‘</strong>ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æè¿°å³å¯ç”Ÿæˆåº”ç”¨ä»£ç å’Œé€»è¾‘</li>
<li><strong>æ™ºèƒ½UIè®¾è®¡</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆç¬¦åˆç”¨æˆ·ä½“éªŒçš„ç•Œé¢è®¾è®¡</li>
<li><strong>ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–</strong>ï¼šè‡ªåŠ¨è¯†åˆ«å’Œä¼˜åŒ–ä¸šåŠ¡æµç¨‹</li>
<li><strong>æ™ºèƒ½æµ‹è¯•ä¸éƒ¨ç½²</strong>ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ï¼Œç¡®ä¿åº”ç”¨è´¨é‡</li>
</ol>
<h2 id="äº”ã€AIå¼€å‘å·¥å…·é€‰æ‹©æŒ‡å—ï¼šå¦‚ä½•æ‰¾åˆ°æœ€é€‚åˆçš„è§£å†³æ–¹æ¡ˆ-ğŸ§"><a href="#äº”ã€AIå¼€å‘å·¥å…·é€‰æ‹©æŒ‡å—ï¼šå¦‚ä½•æ‰¾åˆ°æœ€é€‚åˆçš„è§£å†³æ–¹æ¡ˆ-ğŸ§" class="headerlink" title="äº”ã€AIå¼€å‘å·¥å…·é€‰æ‹©æŒ‡å—ï¼šå¦‚ä½•æ‰¾åˆ°æœ€é€‚åˆçš„è§£å†³æ–¹æ¡ˆ ğŸ§"></a>äº”ã€AIå¼€å‘å·¥å…·é€‰æ‹©æŒ‡å—ï¼šå¦‚ä½•æ‰¾åˆ°æœ€é€‚åˆçš„è§£å†³æ–¹æ¡ˆ ğŸ§</h2><p>åœ¨ä¼—å¤šçš„AIå¼€å‘å·¥å…·ä¸­ï¼Œå¦‚ä½•é€‰æ‹©æœ€é€‚åˆè‡ªå·±éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆï¼Ÿä»¥ä¸‹æ˜¯2025å¹´çš„AIå¼€å‘å·¥å…·é€‰æ‹©æŒ‡å—ï¼š</p>
<h3 id="1-æ˜ç¡®å¼€å‘ç›®æ ‡ä¸åœºæ™¯"><a href="#1-æ˜ç¡®å¼€å‘ç›®æ ‡ä¸åœºæ™¯" class="headerlink" title="1. æ˜ç¡®å¼€å‘ç›®æ ‡ä¸åœºæ™¯"></a>1. æ˜ç¡®å¼€å‘ç›®æ ‡ä¸åœºæ™¯</h3><p>é¦–å…ˆè¦æ˜ç¡®ä½ çš„å¼€å‘ç›®æ ‡å’Œåº”ç”¨åœºæ™¯ï¼Œä¸åŒçš„å·¥å…·åœ¨ä¸åŒåœºæ™¯ä¸‹æœ‰å„è‡ªçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>ä¼ä¸šçº§åº”ç”¨å¼€å‘</strong>ï¼šé€‰æ‹©GitHub Copilot Proã€AWS CodeWhisperer Xç­‰ä¼ä¸šçº§å·¥å…·</li>
<li><strong>AIæ¨¡å‹ç ”ç©¶</strong>ï¼šé€‰æ‹©PyTorchã€JAX/Flaxç­‰ç ”ç©¶å‹å¥½çš„æ¡†æ¶</li>
<li><strong>å¿«é€ŸåŸå‹å¼€å‘</strong>ï¼šé€‰æ‹©ä½ä»£ç /æ— ä»£ç å¹³å°æˆ–Hugging Faceç­‰å¼€ç®±å³ç”¨çš„å·¥å…·</li>
</ul>
<h3 id="2-è¯„ä¼°å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›"><a href="#2-è¯„ä¼°å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›" class="headerlink" title="2. è¯„ä¼°å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›"></a>2. è¯„ä¼°å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›</h3><p>æ ¹æ®å›¢é˜Ÿçš„æŠ€æœ¯èƒ½åŠ›é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼š</p>
<ul>
<li><strong>ä¸“ä¸šAIå›¢é˜Ÿ</strong>ï¼šå¯ä»¥é€‰æ‹©åŠŸèƒ½å¼ºå¤§ä½†å­¦ä¹ æ›²çº¿è¾ƒé™¡çš„å·¥å…·ï¼Œå¦‚TensorFlowã€PyTorchç­‰</li>
<li><strong>å…¨æ ˆå¼€å‘å›¢é˜Ÿ</strong>ï¼šå¯ä»¥é€‰æ‹©é›†æˆåº¦é«˜ã€æ˜“ç”¨æ€§å¥½çš„å·¥å…·ï¼Œå¦‚Hugging Faceã€LangChainç­‰</li>
<li><strong>ä¸šåŠ¡å›¢é˜Ÿ</strong>ï¼šå»ºè®®é€‰æ‹©ä½ä»£ç /æ— ä»£ç å¹³å°ï¼Œå¦‚Power Apps AI Builderã€AppSheet AIç­‰</li>
</ul>
<h3 id="3-è€ƒè™‘æˆæœ¬æ•ˆç›Š"><a href="#3-è€ƒè™‘æˆæœ¬æ•ˆç›Š" class="headerlink" title="3. è€ƒè™‘æˆæœ¬æ•ˆç›Š"></a>3. è€ƒè™‘æˆæœ¬æ•ˆç›Š</h3><p>AIå¼€å‘å·¥å…·çš„æˆæœ¬å·®å¼‚å¾ˆå¤§ï¼Œéœ€è¦è¿›è¡Œæˆæœ¬æ•ˆç›Šåˆ†æï¼š</p>
<ul>
<li><strong>å¼€æºå·¥å…·</strong>ï¼šåˆå§‹æˆæœ¬ä½ï¼Œä½†å¯èƒ½éœ€è¦æ›´å¤šçš„å®šåˆ¶å’Œç»´æŠ¤å·¥ä½œ</li>
<li><strong>å•†ä¸šå·¥å…·</strong>ï¼šåˆå§‹æˆæœ¬é«˜ï¼Œä½†é€šå¸¸æä¾›æ›´å…¨é¢çš„æ”¯æŒå’Œæ›´ä¸°å¯Œçš„åŠŸèƒ½</li>
<li><strong>äº‘æœåŠ¡</strong>ï¼šæŒ‰éœ€ä»˜è´¹ï¼Œçµæ´»åº¦é«˜ï¼Œä½†é•¿æœŸä½¿ç”¨æˆæœ¬å¯èƒ½è¾ƒé«˜</li>
</ul>
<h3 id="4-å…³æ³¨ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§"><a href="#4-å…³æ³¨ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§" class="headerlink" title="4. å…³æ³¨ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§"></a>4. å…³æ³¨ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§</h3><p>è¯„ä¼°å·¥å…·çš„ç”Ÿæ€ç³»ç»Ÿå’Œä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆèƒ½åŠ›ï¼š</p>
<ul>
<li><strong>ä¼ä¸šç°æœ‰æŠ€æœ¯æ ˆ</strong>ï¼šä¼˜å…ˆé€‰æ‹©èƒ½ä¸ç°æœ‰æŠ€æœ¯æ ˆè‰¯å¥½é›†æˆçš„å·¥å…·</li>
<li><strong>ç¬¬ä¸‰æ–¹æœåŠ¡æ”¯æŒ</strong>ï¼šè¯„ä¼°å·¥å…·æ”¯æŒçš„ç¬¬ä¸‰æ–¹æœåŠ¡æ•°é‡å’Œè´¨é‡</li>
<li><strong>ç¤¾åŒºæ´»è·ƒåº¦</strong>ï¼šé€‰æ‹©ç¤¾åŒºæ´»è·ƒçš„å·¥å…·ï¼Œè·å–æ›´å¤šçš„æ”¯æŒå’Œèµ„æº</li>
</ul>
<h2 id="å…­ã€æœªæ¥å±•æœ›ï¼šAIå¼€å‘å·¥å…·çš„å‘å±•è¶‹åŠ¿-ğŸ”®"><a href="#å…­ã€æœªæ¥å±•æœ›ï¼šAIå¼€å‘å·¥å…·çš„å‘å±•è¶‹åŠ¿-ğŸ”®" class="headerlink" title="å…­ã€æœªæ¥å±•æœ›ï¼šAIå¼€å‘å·¥å…·çš„å‘å±•è¶‹åŠ¿ ğŸ”®"></a>å…­ã€æœªæ¥å±•æœ›ï¼šAIå¼€å‘å·¥å…·çš„å‘å±•è¶‹åŠ¿ ğŸ”®</h2><p>å±•æœ›æœªæ¥ï¼ŒAIå¼€å‘å·¥å…·å°†ç»§ç»­å‘æ›´åŠ æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–å’Œä¸ªæ€§åŒ–çš„æ–¹å‘å‘å±•ï¼š</p>
<h3 id="1-å¤šæ¨¡æ€å¼€å‘ç¯å¢ƒ"><a href="#1-å¤šæ¨¡æ€å¼€å‘ç¯å¢ƒ" class="headerlink" title="1. å¤šæ¨¡æ€å¼€å‘ç¯å¢ƒ"></a>1. å¤šæ¨¡æ€å¼€å‘ç¯å¢ƒ</h3><p>æœªæ¥çš„AIå¼€å‘ç¯å¢ƒå°†æ”¯æŒåŒæ—¶å¤„ç†æ–‡æœ¬ã€ä»£ç ã€å›¾åƒã€éŸ³é¢‘ç­‰å¤šç§æ¨¡æ€çš„ä¿¡æ¯ï¼Œæä¾›æ›´åŠ ä¸°å¯Œå’Œç›´è§‚çš„å¼€å‘ä½“éªŒã€‚</p>
<h3 id="2-è‡ªé€‚åº”å¼€å‘åŠ©æ‰‹"><a href="#2-è‡ªé€‚åº”å¼€å‘åŠ©æ‰‹" class="headerlink" title="2. è‡ªé€‚åº”å¼€å‘åŠ©æ‰‹"></a>2. è‡ªé€‚åº”å¼€å‘åŠ©æ‰‹</h3><p>AIå¼€å‘åŠ©æ‰‹å°†å˜å¾—æ›´åŠ æ™ºèƒ½ï¼Œèƒ½å¤Ÿæ ¹æ®å¼€å‘è€…çš„å·¥ä½œä¹ æƒ¯ã€æŠ€èƒ½æ°´å¹³å’Œé¡¹ç›®éœ€æ±‚æä¾›ä¸ªæ€§åŒ–çš„å»ºè®®å’Œå¸®åŠ©ã€‚</p>
<h3 id="3-å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–"><a href="#3-å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–" class="headerlink" title="3. å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–"></a>3. å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–</h3><p>ä»éœ€æ±‚åˆ†æã€ç³»ç»Ÿè®¾è®¡åˆ°ä»£ç å®ç°ã€æµ‹è¯•éƒ¨ç½²ï¼ŒAIå°†å®ç°å¼€å‘å…¨ç”Ÿå‘½å‘¨æœŸçš„è‡ªåŠ¨åŒ–ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 id="4-ååŒå¼å¼€å‘ä½“éªŒ"><a href="#4-ååŒå¼å¼€å‘ä½“éªŒ" class="headerlink" title="4. ååŒå¼å¼€å‘ä½“éªŒ"></a>4. ååŒå¼å¼€å‘ä½“éªŒ</h3><p>AIå°†ä¿ƒè¿›å¼€å‘è€…ä¹‹é—´çš„åä½œï¼Œå¸®åŠ©å›¢é˜Ÿæ›´å¥½åœ°å…±äº«çŸ¥è¯†ã€è§£å†³é—®é¢˜å’Œä¼˜åŒ–æµç¨‹ã€‚</p>
<h3 id="5-å®‰å…¨ä¸åˆè§„å†…ç½®"><a href="#5-å®‰å…¨ä¸åˆè§„å†…ç½®" class="headerlink" title="5. å®‰å…¨ä¸åˆè§„å†…ç½®"></a>5. å®‰å…¨ä¸åˆè§„å†…ç½®</h3><p>æœªæ¥çš„AIå¼€å‘å·¥å…·å°†å†…ç½®å®‰å…¨å’Œåˆè§„åŠŸèƒ½ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ£€æµ‹å’Œé¢„é˜²å®‰å…¨é—®é¢˜ï¼Œç¡®ä¿åº”ç”¨ç¬¦åˆç›¸å…³æ³•è§„è¦æ±‚ã€‚</p>
<h2 id="å†™åœ¨æœ€åï¼šä¸AIå…±åŒè¿›åŒ–ï¼Œæ‹¥æŠ±å¼€å‘æ–°èŒƒå¼-ğŸ’ƒ"><a href="#å†™åœ¨æœ€åï¼šä¸AIå…±åŒè¿›åŒ–ï¼Œæ‹¥æŠ±å¼€å‘æ–°èŒƒå¼-ğŸ’ƒ" class="headerlink" title="å†™åœ¨æœ€åï¼šä¸AIå…±åŒè¿›åŒ–ï¼Œæ‹¥æŠ±å¼€å‘æ–°èŒƒå¼ ğŸ’ƒ"></a>å†™åœ¨æœ€åï¼šä¸AIå…±åŒè¿›åŒ–ï¼Œæ‹¥æŠ±å¼€å‘æ–°èŒƒå¼ ğŸ’ƒ</h2><p>2025å¹´çš„AIå¼€å‘å·¥å…·å·²ç»ä¸å†æ˜¯ç®€å•çš„è¾…åŠ©å·¥å…·ï¼Œè€Œæ˜¯æˆä¸ºå¼€å‘è€…çš„æ™ºèƒ½ä¼™ä¼´å’Œåä½œå¯¹è±¡ã€‚é¢å¯¹è¿™ä¸€å˜é©ï¼Œæˆ‘ä»¬åº”è¯¥ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œç§¯æå­¦ä¹ å’Œé€‚åº”æ–°çš„å·¥å…·å’Œæ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿè¦ä¿æŒå¯¹æ ¸å¿ƒæŠ€æœ¯çš„æŒæ¡å’Œå¯¹ä¸šåŠ¡æœ¬è´¨çš„ç†è§£ã€‚</p>
<p>é€‰æ‹©åˆé€‚çš„AIå¼€å‘å·¥å…·ï¼Œä¸ä»…èƒ½å¤Ÿæå‡å¼€å‘æ•ˆç‡ï¼Œæ›´èƒ½å¸®åŠ©æˆ‘ä»¬é‡Šæ”¾åˆ›é€ åŠ›ï¼Œä¸“æ³¨äºæ›´æœ‰ä»·å€¼çš„å·¥ä½œã€‚åœ¨è¿™ä¸ªAIä¸äººç±»åä½œçš„æ–°æ—¶ä»£ï¼Œè®©æˆ‘ä»¬å…±åŒè¿›åŒ–ï¼Œæ‹¥æŠ±å¼€å‘æ–°èŒƒå¼ï¼</p>
<p>ä½ åœ¨2025å¹´ä½¿ç”¨äº†å“ªäº›AIå¼€å‘å·¥å…·ï¼Ÿæœ‰ä»€ä¹ˆå®è´µçš„ä½¿ç”¨ç»éªŒï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€åˆ†äº«ï¼</p>
<p>Happy AI Codingï¼ğŸ¤–ğŸ’»âœ¨</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2024/10/26/tool/technical-graph-introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/26/tool/technical-graph-introduction/" class="post-title-link" itemprop="url">æŠ€æœ¯å›¾è°±ç½‘ç«™ä»‹ç»ï¼šç³»ç»ŸåŒ–å­¦ä¹ æŠ€æœ¯çš„æ–°æ–¹å¼</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-10-26 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-26T00:00:00+08:00">2024-10-26</time>
    </span>

  
    <span id="/2024/10/26/tool/technical-graph-introduction/" class="post-meta-item leancloud_visitors" data-flag-title="æŠ€æœ¯å›¾è°±ç½‘ç«™ä»‹ç»ï¼šç³»ç»ŸåŒ–å­¦ä¹ æŠ€æœ¯çš„æ–°æ–¹å¼" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>1 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="æŠ€æœ¯å›¾è°±ï¼šç³»ç»ŸåŒ–å­¦ä¹ æŠ€æœ¯çš„æ–°æ–¹å¼-ğŸš€"><a href="#æŠ€æœ¯å›¾è°±ï¼šç³»ç»ŸåŒ–å­¦ä¹ æŠ€æœ¯çš„æ–°æ–¹å¼-ğŸš€" class="headerlink" title="æŠ€æœ¯å›¾è°±ï¼šç³»ç»ŸåŒ–å­¦ä¹ æŠ€æœ¯çš„æ–°æ–¹å¼ ğŸš€"></a>æŠ€æœ¯å›¾è°±ï¼šç³»ç»ŸåŒ–å­¦ä¹ æŠ€æœ¯çš„æ–°æ–¹å¼ ğŸš€</h1><p>å˜¿ï¼Œäº²çˆ±çš„å¼€å‘è€…æœ‹å‹ä»¬ï¼ğŸ‘‹ ä½œä¸ºä¸€åé•¿æœŸåœ¨æŠ€æœ¯æµ·æ´‹ä¸­èˆªè¡Œçš„â€è€æ°´æ‰‹â€ï¼Œæˆ‘æ·±çŸ¥é¢å¯¹æµ©å¦‚çƒŸæµ·çš„æŠ€æœ¯çŸ¥è¯†æ—¶ï¼Œé‚£ç§æ—¢å…´å¥‹åˆè¿·èŒ«çš„å¤æ‚å¿ƒæƒ…ã€‚ä»Šå¤©ï¼Œæˆ‘è¦å‘å¤§å®¶éš†é‡ä»‹ç»æˆ‘çš„æœ€æ–°åŠ›ä½œâ€”â€”<strong>æŠ€æœ¯å›¾è°±</strong>ï¼ˆ<span class="exturl" data-url="aHR0cHM6Ly96aHV5aXpodW8uZ2l0aHViLmlvL3RlY2huaWNhbC1ncmFwaC1kb2MvJUVGJUJDJTg5JUVGJUJDJThDJUU0JUI4JTgwJUU0JUI4JUFBJUU4JTgzJUJEJUU4JUFFJUE5JUU0JUJEJUEwJUU1JTlDJUE4JUU2JThBJTgwJUU2JTlDJUFGJUU4JUJGJUI3JUU1JUFFJUFCJUU0JUI4JUFEJUU2JTg5JUJFJUU1JTg4JUIwJUU2JUI4JTg1JUU2JTk5JUIwJUU4JUI3JUFGJUU1JUJFJTg0JUU3JTlBJTg0JUU3JUE1JTlFJUU1JUE1JTg3JUU1JUI3JUE1JUU1JTg1JUI3JUVGJUJDJTgxJUYwJTlGJThFJTg5">https://zhuyizhuo.github.io/technical-graph-doc/ï¼‰ï¼Œä¸€ä¸ªèƒ½è®©ä½ åœ¨æŠ€æœ¯è¿·å®«ä¸­æ‰¾åˆ°æ¸…æ™°è·¯å¾„çš„ç¥å¥‡å·¥å…·ï¼ğŸ‰<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="ä»€ä¹ˆæ˜¯æŠ€æœ¯å›¾è°±ï¼ŸğŸ¤”"><a href="#ä»€ä¹ˆæ˜¯æŠ€æœ¯å›¾è°±ï¼ŸğŸ¤”" class="headerlink" title="ä»€ä¹ˆæ˜¯æŠ€æœ¯å›¾è°±ï¼ŸğŸ¤”"></a>ä»€ä¹ˆæ˜¯æŠ€æœ¯å›¾è°±ï¼ŸğŸ¤”</h2><p>æŠ€æœ¯å›¾è°±ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„æŠ€æœ¯æ¸…å•ï¼Œå®ƒæ›´åƒæ˜¯ä¸€å¼ <strong>æŠ€æœ¯ä¸–ç•Œçš„å¯¼èˆªåœ°å›¾</strong>ğŸ—ºï¸ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæ‰€æœ‰çš„æŠ€æœ¯çŸ¥è¯†ä¸å†æ˜¯é›¶æ•£çš„å­¤å²›ï¼Œè€Œæ˜¯é€šè¿‡å„ç§å…³è”è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥çœ‹åˆ°ä»å‰ç«¯åˆ°åç«¯ï¼Œä»æ•°æ®åº“åˆ°äº‘è®¡ç®—ï¼Œå„ç§æŠ€æœ¯æ˜¯å¦‚ä½•ç›¸äº’å…³è”ã€ååŒå·¥ä½œçš„ã€‚</p>
<p><img data-src="https://images.unsplash.com/photo-1518770660439-4636190af475?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="æŠ€æœ¯çŸ¥è¯†ç½‘ç»œå›¾"></p>
<h2 id="è®¾è®¡ç†å¿µï¼šä¸‰ä½ä¸€ä½“çš„å­¦ä¹ å“²å­¦-ğŸ’¡"><a href="#è®¾è®¡ç†å¿µï¼šä¸‰ä½ä¸€ä½“çš„å­¦ä¹ å“²å­¦-ğŸ’¡" class="headerlink" title="è®¾è®¡ç†å¿µï¼šä¸‰ä½ä¸€ä½“çš„å­¦ä¹ å“²å­¦ ğŸ’¡"></a>è®¾è®¡ç†å¿µï¼šä¸‰ä½ä¸€ä½“çš„å­¦ä¹ å“²å­¦ ğŸ’¡</h2><p>æŠ€æœ¯å›¾è°±çš„è®¾è®¡èåˆäº†æˆ‘å¤šå¹´çš„å­¦ä¹ ç»éªŒï¼Œéµå¾ªä¸‰ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<h3 id="1-åˆ†å±‚å­¦ä¹ -ğŸ“š"><a href="#1-åˆ†å±‚å­¦ä¹ -ğŸ“š" class="headerlink" title="1. åˆ†å±‚å­¦ä¹  ğŸ“š"></a>1. åˆ†å±‚å­¦ä¹  ğŸ“š</h3><p>ä»åº•å±‚åŸç†åˆ°ä¸Šå±‚åº”ç”¨ï¼Œæ„å»ºå®Œæ•´çš„çŸ¥è¯†é‡‘å­—å¡”ã€‚æˆ‘ä»¬ä¸ä»…å…³æ³¨â€å¦‚ä½•ä½¿ç”¨æŸä¸ªAPIâ€ï¼Œæ›´æ·±å…¥æ¢è®¨â€ä¸ºä»€ä¹ˆè¿™ä¸ªæŠ€æœ¯ä¼šå‡ºç°â€ã€â€å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜â€ã€‚è¿™ç§ç”±å†…è€Œå¤–çš„å­¦ä¹ æ–¹å¼ï¼Œèƒ½è®©ä½ çš„çŸ¥è¯†æ ¹åŸºæ›´åŠ ç¨³å›ºï¼</p>
<h3 id="2-æ·±åº¦ä¼˜å…ˆ-â›ï¸"><a href="#2-æ·±åº¦ä¼˜å…ˆ-â›ï¸" class="headerlink" title="2. æ·±åº¦ä¼˜å…ˆ â›ï¸"></a>2. æ·±åº¦ä¼˜å…ˆ â›ï¸</h3><p>åœ¨å…³é”®é¢†åŸŸå½¢æˆæŠ€æœ¯æ·±åº¦ã€‚ä¸å…¶æµ…å°è¾„æ­¢åœ°äº†è§£100ç§æŠ€æœ¯ï¼Œä¸å¦‚åœ¨æ ¸å¿ƒé¢†åŸŸå»ºç«‹æ‰å®çš„çŸ¥è¯†å£å’ã€‚æŠ€æœ¯å›¾è°±ä¼šå¼•å¯¼ä½ åœ¨é‡è¦æŠ€æœ¯ä¸Šä¸æ–­æ·±å…¥ï¼Œæˆä¸ºçœŸæ­£çš„ä¸“å®¶ï¼</p>
<h3 id="3-å¹¿åº¦æ‹“å±•-ğŸŒ"><a href="#3-å¹¿åº¦æ‹“å±•-ğŸŒ" class="headerlink" title="3. å¹¿åº¦æ‹“å±• ğŸŒ"></a>3. å¹¿åº¦æ‹“å±• ğŸŒ</h3><p>äº†è§£ç›¸å…³æŠ€æœ¯ç”Ÿæ€ã€‚æŠ€æœ¯ä»æ¥ä¸æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼Œå°±åƒä¸€ä¸ªä¼˜ç§€çš„å¨å¸ˆä¸ä»…è¦ä¼šç‚’èœï¼Œè¿˜è¦äº†è§£é£Ÿæçš„ç‰¹æ€§å’Œæ­é…è§„å¾‹ã€‚æŠ€æœ¯å›¾è°±ä¼šå¸®ä½ ç†è§£ä¸€ä¸ªæŠ€æœ¯å¦‚ä½•ä¸å…¶ä»–æŠ€æœ¯ååŒå·¥ä½œï¼Œå½¢æˆå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="æŒç»­æ›´æ–°çš„æŠ€æœ¯æ ˆï¼šæ°¸ä¸è¿‡æ—¶çš„çŸ¥è¯†åº“-ğŸ”„"><a href="#æŒç»­æ›´æ–°çš„æŠ€æœ¯æ ˆï¼šæ°¸ä¸è¿‡æ—¶çš„çŸ¥è¯†åº“-ğŸ”„" class="headerlink" title="æŒç»­æ›´æ–°çš„æŠ€æœ¯æ ˆï¼šæ°¸ä¸è¿‡æ—¶çš„çŸ¥è¯†åº“ ğŸ”„"></a>æŒç»­æ›´æ–°çš„æŠ€æœ¯æ ˆï¼šæ°¸ä¸è¿‡æ—¶çš„çŸ¥è¯†åº“ ğŸ”„</h2><p>åœ¨è¿™ä¸ªæŠ€æœ¯è¿­ä»£æ¯”ç¿»è„¸è¿˜å¿«çš„æ—¶ä»£ï¼Œä¿æŒçŸ¥è¯†çš„æ—¶æ•ˆæ€§è‡³å…³é‡è¦ï¼æŠ€æœ¯å›¾è°±ä¼š<strong>å®šæœŸæ›´æ–°</strong>ï¼Œç¡®ä¿å®ƒåæ˜ æœ€æ–°çš„æŠ€æœ¯å‘å±•è¶‹åŠ¿ã€‚æ— è®ºæ˜¯å‰ç«¯çš„Reactã€Vueæ–°ç‰¹æ€§ï¼Œè¿˜æ˜¯åç«¯çš„å¾®æœåŠ¡ã€Serverlessæ¶æ„ï¼Œä½ éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°æœ€æ–°ã€æœ€å®ç”¨çš„ä¿¡æ¯ï¼â°</p>
<h2 id="å¦‚ä½•ä½¿ç”¨æŠ€æœ¯å›¾è°±ï¼Ÿè¶…ç®€å•æ“ä½œæŒ‡å—-ğŸ®"><a href="#å¦‚ä½•ä½¿ç”¨æŠ€æœ¯å›¾è°±ï¼Ÿè¶…ç®€å•æ“ä½œæŒ‡å—-ğŸ®" class="headerlink" title="å¦‚ä½•ä½¿ç”¨æŠ€æœ¯å›¾è°±ï¼Ÿè¶…ç®€å•æ“ä½œæŒ‡å— ğŸ®"></a>å¦‚ä½•ä½¿ç”¨æŠ€æœ¯å›¾è°±ï¼Ÿè¶…ç®€å•æ“ä½œæŒ‡å— ğŸ®</h2><p>ä½¿ç”¨æŠ€æœ¯å›¾è°±å°±åƒç©æ¸¸æˆä¸€æ ·ç®€å•æœ‰è¶£ï¼š</p>
<ol>
<li>è®¿é—®<span class="exturl" data-url="aHR0cHM6Ly96aHV5aXpodW8uZ2l0aHViLmlvL3RlY2huaWNhbC1ncmFwaC1kb2Mv">https://zhuyizhuo.github.io/technical-graph-doc/<i class="fa fa-external-link-alt"></i></span>ï¼Œå¼€å¯ä½ çš„æŠ€æœ¯æ¢é™©ä¹‹æ—…ï¼</li>
<li>åœ¨é¦–é¡µå¯ä»¥åƒçœ‹åœ°å›¾ä¸€æ ·æ¦‚è§ˆæ•´ä¸ªæŠ€æœ¯ä¸–ç•Œçš„ç»“æ„ ğŸŒ</li>
<li>ç‚¹å‡»å…·ä½“çš„æŠ€æœ¯èŠ‚ç‚¹ï¼Œå°±åƒæ‰“å¼€ä¸€ä¸ªå®ç®±ï¼Œé‡Œé¢è£…æ»¡äº†è¯¥æŠ€æœ¯çš„è¯¦ç»†ä¿¡æ¯å’Œå®è— ğŸ</li>
<li>é€šè¿‡å›¾è°±å¯¼èˆªï¼Œåƒèµ°è¿·å®«ä¸€æ ·æ¢ç´¢ä¸åŒæŠ€æœ¯ä¹‹é—´çš„å¥‡å¦™å…³è” ğŸ§©</li>
<li>å…³æ³¨GitHubä»“åº“ï¼ŒåŠæ—¶è·å–æœ€æ–°çš„æŠ€æœ¯æ›´æ–°ï¼Œä¸é”™è¿‡ä»»ä½•ä¸€ä¸ªé‡è¦çš„æŠ€æœ¯å˜é©ï¼</li>
</ol>
<h2 id="å¼€æºä¸è´¡çŒ®ï¼šè®©æˆ‘ä»¬ä¸€èµ·å»ºè®¾æŠ€æœ¯ä¸–ç•Œ-ğŸ‘«"><a href="#å¼€æºä¸è´¡çŒ®ï¼šè®©æˆ‘ä»¬ä¸€èµ·å»ºè®¾æŠ€æœ¯ä¸–ç•Œ-ğŸ‘«" class="headerlink" title="å¼€æºä¸è´¡çŒ®ï¼šè®©æˆ‘ä»¬ä¸€èµ·å»ºè®¾æŠ€æœ¯ä¸–ç•Œ ğŸ‘«"></a>å¼€æºä¸è´¡çŒ®ï¼šè®©æˆ‘ä»¬ä¸€èµ·å»ºè®¾æŠ€æœ¯ä¸–ç•Œ ğŸ‘«</h2><p>æŠ€æœ¯å›¾è°±æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå°±åƒä¸€ä¸ªå¼€æ”¾çš„èŠ±å›­ï¼Œéœ€è¦å¤§å®¶å…±åŒæµ‡çŒæ‰èƒ½ç»½æ”¾å¾—æ›´åŠ ç¾ä¸½ï¼å¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–è€…æƒ³è¦è´¡çŒ®å†…å®¹ï¼Œæ¬¢è¿è®¿é—®<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3podXlpemh1by90ZWNobmljYWwtZ3JhcGgtZG9j">GitHubä»“åº“<i class="fa fa-external-link-alt"></i></span>å‚ä¸è¿›æ¥ã€‚ä½ çš„æ¯ä¸€ä¸ªæƒ³æ³•å’Œè´¡çŒ®ï¼Œéƒ½èƒ½è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´åŠ å®Œå–„å’Œå®ç”¨ï¼ğŸ’ª</p>
<p><img data-src="https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="å¼€æºåä½œ"></p>
<h2 id="å†™åœ¨æœ€åï¼šæŠ€æœ¯å­¦ä¹ æ˜¯ä¸€åœºç²¾å½©çš„æ—…ç¨‹-ğŸš‚"><a href="#å†™åœ¨æœ€åï¼šæŠ€æœ¯å­¦ä¹ æ˜¯ä¸€åœºç²¾å½©çš„æ—…ç¨‹-ğŸš‚" class="headerlink" title="å†™åœ¨æœ€åï¼šæŠ€æœ¯å­¦ä¹ æ˜¯ä¸€åœºç²¾å½©çš„æ—…ç¨‹ ğŸš‚"></a>å†™åœ¨æœ€åï¼šæŠ€æœ¯å­¦ä¹ æ˜¯ä¸€åœºç²¾å½©çš„æ—…ç¨‹ ğŸš‚</h2><p>åˆ›å»ºæŠ€æœ¯å›¾è°±çš„åˆè¡·ï¼Œæ˜¯å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©æ›´å¤šçš„å¼€å‘è€…å»ºç«‹ç³»ç»ŸåŒ–çš„æŠ€æœ¯çŸ¥è¯†ä½“ç³»ï¼Œé¿å…åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è¿·å¤±æ–¹å‘ã€‚æŠ€æœ¯å­¦ä¹ ä¸æ˜¯ä¸€åœºçŸ­è·‘æ¯”èµ›ï¼Œè€Œæ˜¯ä¸€åœºç²¾å½©çš„é©¬æ‹‰æ¾ã€‚åœ¨è¿™æ¡æ¼«é•¿çš„é“è·¯ä¸Šï¼ŒæŠ€æœ¯å›¾è°±å°†æˆä¸ºä½ çš„å¿ å®ä¼™ä¼´å’Œå¯¼èˆªä»ªï¼</p>
<p>å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šçš„å¼€å‘è€…æœ‹å‹ã€‚è®©æˆ‘ä»¬ä¸€èµ·åœ¨æŠ€æœ¯çš„é“è·¯ä¸Šä¸æ–­è¿›æ­¥ï¼Œæ¢ç´¢æ›´å¹¿é˜”çš„æŠ€æœ¯ä¸–ç•Œï¼ğŸŒŸ</p>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<span class="exturl" data-url="aHR0cHM6Ly96aHV5aXpodW8uZ2l0aHViLmlvL3RlY2huaWNhbC1ncmFwaC1kb2Mv">https://zhuyizhuo.github.io/technical-graph-doc/<i class="fa fa-external-link-alt"></i></span> ğŸŒ<br>GitHubä»“åº“ï¼š<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3podXlpemh1by90ZWNobmljYWwtZ3JhcGgtZG9j">https://github.com/zhuyizhuo/technical-graph-doc<i class="fa fa-external-link-alt"></i></span> ğŸ› ï¸<br>è®°å¾—ç»™ä¸ªStarå“¦ï¼â­</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2024/10/18/cloud-native/2024-microservice-governance-guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/10/18/cloud-native/2024-microservice-governance-guide/" class="post-title-link" itemprop="url">Javaå¾®æœåŠ¡æ²»ç†å¹³å°æ­å»ºæŒ‡å—</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-10-18 00:00:00" itemprop="dateCreated datePublished" datetime="2024-10-18T00:00:00+08:00">2024-10-18</time>
    </span>

  
    <span id="/2024/10/18/cloud-native/2024-microservice-governance-guide/" class="post-meta-item leancloud_visitors" data-flag-title="Javaå¾®æœåŠ¡æ²»ç†å¹³å°æ­å»ºæŒ‡å—" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>13k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>12 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Javaå¾®æœåŠ¡æ²»ç†å¹³å°æ­å»ºæŒ‡å—-ğŸ—ï¸"><a href="#Javaå¾®æœåŠ¡æ²»ç†å¹³å°æ­å»ºæŒ‡å—-ğŸ—ï¸" class="headerlink" title="Javaå¾®æœåŠ¡æ²»ç†å¹³å°æ­å»ºæŒ‡å— ğŸ—ï¸"></a>Javaå¾®æœåŠ¡æ²»ç†å¹³å°æ­å»ºæŒ‡å— ğŸ—ï¸</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ åœ¨å½“ä»Šçš„äº‘åŸç”Ÿæ—¶ä»£ï¼Œå¾®æœåŠ¡æ¶æ„å·²ç»æˆä¸ºæ„å»ºå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸»æµé€‰æ‹©ã€‚ç„¶è€Œï¼Œéšç€å¾®æœåŠ¡æ•°é‡çš„ä¸æ–­å¢åŠ ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°ç®¡ç†å’Œæ²»ç†è¿™äº›æœåŠ¡æˆä¸ºäº†ä¸€ä¸ªå·¨å¤§çš„æŒ‘æˆ˜ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å’Œå¤§å®¶åˆ†äº«å¦‚ä½•åŸºäºSpring Cloud Alibabaæ„å»ºä¸€ä¸ªå®Œæ•´çš„å¾®æœåŠ¡æ²»ç†å¹³å°ï¼Œå¸®åŠ©ä½ è§£å†³å¾®æœåŠ¡æ²»ç†ä¸­çš„å„ç§ç—›ç‚¹ã€‚</p>
<h2 id="ä¸€ã€å¾®æœåŠ¡æ²»ç†çš„é‡è¦æ€§ä¸æŒ‘æˆ˜-ğŸ¯"><a href="#ä¸€ã€å¾®æœåŠ¡æ²»ç†çš„é‡è¦æ€§ä¸æŒ‘æˆ˜-ğŸ¯" class="headerlink" title="ä¸€ã€å¾®æœåŠ¡æ²»ç†çš„é‡è¦æ€§ä¸æŒ‘æˆ˜ ğŸ¯"></a>ä¸€ã€å¾®æœåŠ¡æ²»ç†çš„é‡è¦æ€§ä¸æŒ‘æˆ˜ ğŸ¯</h2><h3 id="1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ²»ç†ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ²»ç†ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ²»ç†ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ²»ç†ï¼Ÿ</h3><p>å¾®æœåŠ¡æ²»ç†æ˜¯æŒ‡å¯¹å¾®æœåŠ¡æ¶æ„ä¸­çš„å„ä¸ªæœåŠ¡è¿›è¡Œå…¨é¢ç®¡ç†å’Œæ§åˆ¶çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šç®¡ç†æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸå’Œç½‘ç»œä½ç½®</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šé›†ä¸­ç®¡ç†å’ŒåŠ¨æ€æ›´æ–°æœåŠ¡é…ç½®</li>
<li><strong>æµé‡ç®¡ç†</strong>ï¼šåŒ…æ‹¬è´Ÿè½½å‡è¡¡ã€é™æµã€ç†”æ–­ã€é™çº§ç­‰</li>
<li><strong>å®‰å…¨ç®¡ç†</strong>ï¼šè®¤è¯ã€æˆæƒã€åŠ å¯†é€šä¿¡ç­‰</li>
<li><strong>ç›‘æ§ä¸å‘Šè­¦</strong>ï¼šæ”¶é›†æŒ‡æ ‡ã€æ—¥å¿—ã€é“¾è·¯è¿½è¸ªæ•°æ®å¹¶è¿›è¡Œå‘Šè­¦</li>
<li><strong>ç°åº¦å‘å¸ƒä¸å›æ»š</strong>ï¼šæ§åˆ¶æ–°ç‰ˆæœ¬çš„å‘å¸ƒè¿‡ç¨‹</li>
</ul>
<h3 id="2-å¾®æœåŠ¡æ²»ç†é¢ä¸´çš„æŒ‘æˆ˜"><a href="#2-å¾®æœåŠ¡æ²»ç†é¢ä¸´çš„æŒ‘æˆ˜" class="headerlink" title="2. å¾®æœåŠ¡æ²»ç†é¢ä¸´çš„æŒ‘æˆ˜"></a>2. å¾®æœåŠ¡æ²»ç†é¢ä¸´çš„æŒ‘æˆ˜</h3><p>åœ¨å®è·µä¸­ï¼Œå¾®æœåŠ¡æ²»ç†é¢ä¸´ç€è¯¸å¤šæŒ‘æˆ˜ï¼š</p>
<ul>
<li><strong>æœåŠ¡æ•°é‡çˆ†ç‚¸</strong>ï¼šå¤§å‹ç³»ç»Ÿå¯èƒ½åŒ…å«æ•°ç™¾ç”šè‡³æ•°åƒä¸ªå¾®æœåŠ¡</li>
<li><strong>ç½‘ç»œå¤æ‚æ€§</strong>ï¼šæœåŠ¡é—´è°ƒç”¨å…³ç³»å¤æ‚ï¼Œç½‘ç»œæ•…éšœéš¾ä»¥æ’æŸ¥</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ•°æ®ä¸€è‡´æ€§ä¿éšœå›°éš¾</li>
<li><strong>å®‰å…¨é£é™©</strong>ï¼šæœåŠ¡æš´éœ²é¢å¢åŠ ï¼Œå®‰å…¨é£é™©éšä¹‹å¢åŠ </li>
<li><strong>è¿ç»´å¤æ‚åº¦</strong>ï¼šä¼ ç»Ÿè¿ç»´æ–¹å¼éš¾ä»¥åº”å¯¹å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤</li>
</ul>
<h3 id="3-Spring-Cloud-Alibabaçš„ä¼˜åŠ¿"><a href="#3-Spring-Cloud-Alibabaçš„ä¼˜åŠ¿" class="headerlink" title="3. Spring Cloud Alibabaçš„ä¼˜åŠ¿"></a>3. Spring Cloud Alibabaçš„ä¼˜åŠ¿</h3><p>Spring Cloud Alibabaæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„å¾®æœåŠ¡è§£å†³æ–¹æ¡ˆï¼Œå®ƒç»“åˆäº†Spring Cloudçš„ç”Ÿæ€ä¼˜åŠ¿å’Œé˜¿é‡Œå·´å·´åœ¨å¾®æœåŠ¡é¢†åŸŸçš„å®è·µç»éªŒï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æœ¬åœŸåŒ–æ”¯æŒ</strong>ï¼šå®Œå…¨é€‚é…å›½å†…çš„äº‘æœåŠ¡ç¯å¢ƒ</li>
<li><strong>ç»„ä»¶ä¸°å¯Œ</strong>ï¼šæä¾›äº†å®Œæ•´çš„å¾®æœåŠ¡æ²»ç†ç»„ä»¶æ ˆ</li>
<li><strong>æ€§èƒ½ä¼˜ç§€</strong>ï¼šç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒéªŒè¯</li>
<li><strong>ç¤¾åŒºæ´»è·ƒ</strong>ï¼šæŒç»­æ›´æ–°å’Œå®Œå–„</li>
</ul>
<h2 id="äºŒã€åŸºäºSpring-Cloud-Alibabaæ„å»ºå®Œæ•´å¾®æœåŠ¡æ¶æ„-ğŸ› ï¸"><a href="#äºŒã€åŸºäºSpring-Cloud-Alibabaæ„å»ºå®Œæ•´å¾®æœåŠ¡æ¶æ„-ğŸ› ï¸" class="headerlink" title="äºŒã€åŸºäºSpring Cloud Alibabaæ„å»ºå®Œæ•´å¾®æœåŠ¡æ¶æ„ ğŸ› ï¸"></a>äºŒã€åŸºäºSpring Cloud Alibabaæ„å»ºå®Œæ•´å¾®æœåŠ¡æ¶æ„ ğŸ› ï¸</h2><h3 id="1-æŠ€æœ¯æ ˆé€‰å‹"><a href="#1-æŠ€æœ¯æ ˆé€‰å‹" class="headerlink" title="1. æŠ€æœ¯æ ˆé€‰å‹"></a>1. æŠ€æœ¯æ ˆé€‰å‹</h3><p>åœ¨æ­å»ºå¾®æœåŠ¡æ²»ç†å¹³å°ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šæŠ€æœ¯æ ˆé€‰å‹ï¼š</p>
<ul>
<li><strong>åŸºç¡€æ¡†æ¶</strong>ï¼šSpring Boot 3.2.x + Spring Cloud 2023.x</li>
<li><strong>å¾®æœåŠ¡æ²»ç†</strong>ï¼šSpring Cloud Alibaba 2023.x</li>
<li><strong>æ³¨å†Œä¸­å¿ƒ</strong>ï¼šNacos</li>
<li><strong>é…ç½®ä¸­å¿ƒ</strong>ï¼šNacos Config</li>
<li><strong>ç½‘å…³</strong>ï¼šSpring Cloud Gateway</li>
<li><strong>æœåŠ¡è°ƒç”¨</strong>ï¼šDubbo/Spring Cloud OpenFeign</li>
<li><strong>ç†”æ–­å™¨</strong>ï¼šSentinel</li>
<li><strong>é“¾è·¯è¿½è¸ª</strong>ï¼šSkyWalking</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šPrometheus + Grafana</li>
<li><strong>å®¹å™¨åŒ–</strong>ï¼šDocker + Kubernetes</li>
</ul>
<h3 id="2-ç³»ç»Ÿæ¶æ„è®¾è®¡"><a href="#2-ç³»ç»Ÿæ¶æ„è®¾è®¡" class="headerlink" title="2. ç³»ç»Ÿæ¶æ„è®¾è®¡"></a>2. ç³»ç»Ÿæ¶æ„è®¾è®¡</h3><p>ä¸‹é¢æ˜¯æˆ‘ä»¬å°†è¦æ„å»ºçš„å¾®æœåŠ¡æ²»ç†å¹³å°çš„æ•´ä½“æ¶æ„è®¾è®¡ï¼š</p>
<p><img data-src="https://images.unsplash.com/photo-1558494949-ef010cbdcc31?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="å¾®æœåŠ¡æ²»ç†å¹³å°æ¶æ„å›¾"></p>
<p>è¿™ä¸ªæ¶æ„åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ol>
<li><strong>æ¥å…¥å±‚</strong>ï¼šAPIç½‘å…³ç»Ÿä¸€å…¥å£ï¼Œè´Ÿè´£è·¯ç”±è½¬å‘ã€è®¤è¯æˆæƒç­‰</li>
<li><strong>æœåŠ¡å±‚</strong>ï¼šå„ç§ä¸šåŠ¡å¾®æœåŠ¡ï¼Œå®ç°å…·ä½“ä¸šåŠ¡åŠŸèƒ½</li>
<li><strong>åŸºç¡€è®¾æ–½å±‚</strong>ï¼šæä¾›æœåŠ¡æ²»ç†çš„å„ç§åŸºç¡€è®¾æ–½</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šå„ç±»æ•°æ®åº“å’Œç¼“å­˜</li>
<li><strong>ç›‘æ§å±‚</strong>ï¼šè´Ÿè´£ç›‘æ§å’Œå‘Šè­¦</li>
</ol>
<h3 id="3-é¡¹ç›®ç»“æ„è®¾è®¡"><a href="#3-é¡¹ç›®ç»“æ„è®¾è®¡" class="headerlink" title="3. é¡¹ç›®ç»“æ„è®¾è®¡"></a>3. é¡¹ç›®ç»“æ„è®¾è®¡</h3><p>ä¸ºäº†ä¾¿äºç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">microservice-platform/</span><br><span class="line">â”œâ”€â”€ microservice-common/           # å…¬å…±æ¨¡å—</span><br><span class="line">â”œâ”€â”€ microservice-gateway/          # ç½‘å…³æœåŠ¡</span><br><span class="line">â”œâ”€â”€ microservice-auth/             # è®¤è¯æˆæƒæœåŠ¡</span><br><span class="line">â”œâ”€â”€ microservice-order/            # è®¢å•æœåŠ¡</span><br><span class="line">â”œâ”€â”€ microservice-product/          # å•†å“æœåŠ¡</span><br><span class="line">â”œâ”€â”€ microservice-user/             # ç”¨æˆ·æœåŠ¡</span><br><span class="line">â”œâ”€â”€ microservice-search/           # æœç´¢æœåŠ¡</span><br><span class="line">â””â”€â”€ microservice-config/           # é…ç½®ç®¡ç†æ¨¡å—</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€å®ç°æ ¸å¿ƒæ²»ç†ç»„ä»¶çš„å…·ä½“æ­¥éª¤-ğŸ”"><a href="#ä¸‰ã€å®ç°æ ¸å¿ƒæ²»ç†ç»„ä»¶çš„å…·ä½“æ­¥éª¤-ğŸ”" class="headerlink" title="ä¸‰ã€å®ç°æ ¸å¿ƒæ²»ç†ç»„ä»¶çš„å…·ä½“æ­¥éª¤ ğŸ”"></a>ä¸‰ã€å®ç°æ ¸å¿ƒæ²»ç†ç»„ä»¶çš„å…·ä½“æ­¥éª¤ ğŸ”</h2><h3 id="1-æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆNacosï¼‰"><a href="#1-æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆNacosï¼‰" class="headerlink" title="1. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆNacosï¼‰"></a>1. æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆNacosï¼‰</h3><p>Nacosæ˜¯ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°ã€‚</p>
<p><strong>1.1 å®‰è£…å’Œå¯åŠ¨Nacos</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½Nacos</span></span><br><span class="line">wget https://github.com/alibaba/nacos/releases/download/2.3.0/nacos-server-2.3.0.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf nacos-server-2.3.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nacos/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨Nacosï¼ˆå•æœºæ¨¡å¼ï¼‰</span></span><br><span class="line">sh startup.sh -m standalone</span><br></pre></td></tr></table></figure>

<p><strong>1.2 åœ¨å¾®æœåŠ¡ä¸­é›†æˆNacos</strong></p>
<p>é¦–å…ˆï¼Œæ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œåœ¨<code>application.yml</code>ä¸­é…ç½®Nacosï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">microservice-order</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">DEFAULT_GROUP</span></span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œåœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ <code>@EnableDiscoveryClient</code>æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(OrderServiceApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-é…ç½®ä¸­å¿ƒï¼ˆNacos-Configï¼‰"><a href="#2-é…ç½®ä¸­å¿ƒï¼ˆNacos-Configï¼‰" class="headerlink" title="2. é…ç½®ä¸­å¿ƒï¼ˆNacos Configï¼‰"></a>2. é…ç½®ä¸­å¿ƒï¼ˆNacos Configï¼‰</h3><p>Nacos Configæä¾›äº†ç»Ÿä¸€çš„é…ç½®ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒåŠ¨æ€åˆ·æ–°é…ç½®ã€‚</p>
<p><strong>2.1 æ·»åŠ ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.2 åˆ›å»ºbootstrap.ymlé…ç½®æ–‡ä»¶</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">microservice-order</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">group:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span></span><br></pre></td></tr></table></figure>

<p><strong>2.3 åœ¨Nacosæ§åˆ¶å°åˆ›å»ºé…ç½®</strong></p>
<p>åœ¨Nacosæ§åˆ¶å°åˆ›å»º<code>microservice-order.yaml</code>é…ç½®ï¼Œå¹¶æ·»åŠ é…ç½®å†…å®¹ã€‚</p>
<p><strong>2.4 åœ¨ä»£ç ä¸­ä½¿ç”¨é…ç½®</strong></p>
<p>ä½¿ç”¨<code>@Value</code>æ³¨è§£æˆ–<code>@ConfigurationProperties</code>æ³¨è§£è·å–é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RefreshScope</span> <span class="comment">// æ”¯æŒåŠ¨æ€åˆ·æ–°é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;order.service.version&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String version;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/version&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getVersion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> version;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-APIç½‘å…³ï¼ˆSpring-Cloud-Gatewayï¼‰"><a href="#3-APIç½‘å…³ï¼ˆSpring-Cloud-Gatewayï¼‰" class="headerlink" title="3. APIç½‘å…³ï¼ˆSpring Cloud Gatewayï¼‰"></a>3. APIç½‘å…³ï¼ˆSpring Cloud Gatewayï¼‰</h3><p>Spring Cloud Gatewayæä¾›äº†è·¯ç”±è½¬å‘ã€è¯·æ±‚è¿‡æ»¤ç­‰åŠŸèƒ½ï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„é‡è¦ç»„ä»¶ã€‚</p>
<p><strong>3.1 æ·»åŠ ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3.2 é…ç½®è·¯ç”±è§„åˆ™</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">order-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://microservice-order</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/order/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">StripPrefix=1</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">product-service</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://microservice-product</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/product/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">StripPrefix=1</span></span><br></pre></td></tr></table></figure>

<p><strong>3.3 æ·»åŠ å…¨å±€è¿‡æ»¤å™¨</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthGlobalFilter</span> <span class="keyword">implements</span> <span class="title">GlobalFilter</span>, <span class="title">Ordered</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Mono&lt;Void&gt; <span class="title">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®ç°è®¤è¯æˆæƒé€»è¾‘</span></span><br><span class="line">        String token = exchange.getRequest().getHeaders().getFirst(<span class="string">&quot;Authorization&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (token == <span class="keyword">null</span> || !token.startsWith(<span class="string">&quot;Bearer &quot;</span>)) &#123;</span><br><span class="line">            exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// éªŒè¯token...</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-æœåŠ¡è°ƒç”¨ï¼ˆDubbo-Spring-Cloud-OpenFeignï¼‰"><a href="#4-æœåŠ¡è°ƒç”¨ï¼ˆDubbo-Spring-Cloud-OpenFeignï¼‰" class="headerlink" title="4. æœåŠ¡è°ƒç”¨ï¼ˆDubbo/Spring Cloud OpenFeignï¼‰"></a>4. æœåŠ¡è°ƒç”¨ï¼ˆDubbo/Spring Cloud OpenFeignï¼‰</h3><p><strong>4.1 ä½¿ç”¨Spring Cloud OpenFeign</strong></p>
<p>æ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºFeignå®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;microservice-product&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/products/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Product <span class="title">getProductById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping(&quot;/products/inventory&quot;)</span></span><br><span class="line">    <span class="function">Boolean <span class="title">reduceInventory</span><span class="params">(<span class="meta">@RequestBody</span> InventoryDTO inventoryDTO)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ <code>@EnableFeignClients</code>æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceApplication</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4.2 ä½¿ç”¨Dubbo</strong>ï¼ˆå¯é€‰ï¼‰</p>
<p>å¦‚æœå¯¹æ€§èƒ½æœ‰æ›´é«˜è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨Dubboè¿›è¡ŒæœåŠ¡è°ƒç”¨ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å®šä¹‰æœåŠ¡æ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line">    <span class="function">Product <span class="title">getProduct</span><span class="params">(Long id)</span></span>;</span><br><span class="line">    <span class="function">Boolean <span class="title">reduceInventory</span><span class="params">(Long productId, Integer quantity)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡æä¾›è€…å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DubboService</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceImpl</span> <span class="keyword">implements</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®ç°æœåŠ¡æ¥å£</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@DubboReference</span></span><br><span class="line">    <span class="keyword">private</span> ProductService productService;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä½¿ç”¨productServiceè°ƒç”¨æœåŠ¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€è¯¦è§£é«˜çº§æ²»ç†æ–¹æ¡ˆï¼šé™æµã€ç†”æ–­ä¸é™çº§-ğŸ›¡ï¸"><a href="#å››ã€è¯¦è§£é«˜çº§æ²»ç†æ–¹æ¡ˆï¼šé™æµã€ç†”æ–­ä¸é™çº§-ğŸ›¡ï¸" class="headerlink" title="å››ã€è¯¦è§£é«˜çº§æ²»ç†æ–¹æ¡ˆï¼šé™æµã€ç†”æ–­ä¸é™çº§ ğŸ›¡ï¸"></a>å››ã€è¯¦è§£é«˜çº§æ²»ç†æ–¹æ¡ˆï¼šé™æµã€ç†”æ–­ä¸é™çº§ ğŸ›¡ï¸</h2><h3 id="1-æµé‡æ§åˆ¶ï¼ˆSentinelï¼‰"><a href="#1-æµé‡æ§åˆ¶ï¼ˆSentinelï¼‰" class="headerlink" title="1. æµé‡æ§åˆ¶ï¼ˆSentinelï¼‰"></a>1. æµé‡æ§åˆ¶ï¼ˆSentinelï¼‰</h3><p>Sentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æµé‡æ§åˆ¶å’Œç†”æ–­é™çº§ç»„ä»¶ï¼Œå…·æœ‰å¼ºå¤§çš„æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè´Ÿè½½ä¿æŠ¤ç­‰åŠŸèƒ½ã€‚</p>
<p><strong>1.1 æ·»åŠ ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-sentinel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-sentinel-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>1.2 é…ç½®Sentinel</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">sentinel:</span></span><br><span class="line">      <span class="attr">transport:</span></span><br><span class="line">        <span class="attr">dashboard:</span> <span class="string">localhost:8080</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8719</span></span><br><span class="line">      <span class="attr">datasource:</span></span><br><span class="line">        <span class="attr">ds:</span></span><br><span class="line">          <span class="attr">nacos:</span></span><br><span class="line">            <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">            <span class="attr">dataId:</span> <span class="string">sentinel-rules</span></span><br><span class="line">            <span class="attr">groupId:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">            <span class="attr">rule-type:</span> <span class="string">flow</span></span><br></pre></td></tr></table></figure>

<p><strong>1.3 å®šä¹‰é™æµè§„åˆ™</strong></p>
<p>åœ¨Nacosä¸­åˆ›å»º<code>sentinel-rules</code>é…ç½®ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;resource&quot;</span>: <span class="string">&quot;microservice-order&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;limitApp&quot;</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;grade&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">&quot;count&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;strategy&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;controlBehavior&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">&quot;clusterMode&quot;</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><strong>1.4 ä½¿ç”¨æ³¨è§£å®šä¹‰èµ„æº</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SentinelResource(value = &quot;createOrder&quot;, blockHandler = &quot;handleBlock&quot;, fallback = &quot;handleFallback&quot;)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Order <span class="title">createOrder</span><span class="params">(OrderDTO orderDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè®¢å•é€»è¾‘</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†é™æµé€»è¾‘</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Order <span class="title">handleBlock</span><span class="params">(OrderDTO orderDTO, BlockException ex)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é™æµå¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Order().setMessage(<span class="string">&quot;å½“å‰è¯·æ±‚è¿‡å¤šï¼Œè¯·ç¨åå†è¯•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¤„ç†é™çº§é€»è¾‘</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Order <span class="title">handleFallback</span><span class="params">(OrderDTO orderDTO, Throwable throwable)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// é™çº§å¤„ç†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Order().setMessage(<span class="string">&quot;ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åå†è¯•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-é“¾è·¯è¿½è¸ªï¼ˆSkyWalkingï¼‰"><a href="#2-é“¾è·¯è¿½è¸ªï¼ˆSkyWalkingï¼‰" class="headerlink" title="2. é“¾è·¯è¿½è¸ªï¼ˆSkyWalkingï¼‰"></a>2. é“¾è·¯è¿½è¸ªï¼ˆSkyWalkingï¼‰</h3><p>SkyWalkingæ˜¯ä¸€ä¸ªå¼€æºçš„å¯è§‚æµ‹æ€§å¹³å°ï¼Œæä¾›åˆ†å¸ƒå¼è¿½è¸ªã€æœåŠ¡ç½‘æ ¼é¥æµ‹åˆ†æã€åº¦é‡èšåˆå’Œå¯è§†åŒ–ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>2.1 å®‰è£…å’Œå¯åŠ¨SkyWalking</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½SkyWalking</span></span><br><span class="line">wget https://dlcdn.apache.org/skywalking/9.7.0/apache-skywalking-apm-9.7.0.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf apache-skywalking-apm-9.7.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> apache-skywalking-apm-bin/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨SkyWalking OAPæœåŠ¡</span></span><br><span class="line">sh startup.sh</span><br></pre></td></tr></table></figure>

<p><strong>2.2 é…ç½®å¾®æœåŠ¡æ¥å…¥SkyWalking</strong></p>
<p>æ·»åŠ JVMå‚æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-javaagent:/path/to/skywalking-agent/skywalking-agent.jar</span><br><span class="line">-Dskywalking.agent.service_name=microservice-order</span><br><span class="line">-Dskywalking.collector.backend_service=localhost:11800</span><br></pre></td></tr></table></figure>

<h3 id="3-åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰"><a href="#3-åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰" class="headerlink" title="3. åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰"></a>3. åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆSeataï¼‰</h3><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚Seataæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>3.1 å®‰è£…å’Œé…ç½®Seata Server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½Seata</span></span><br><span class="line">wget https://github.com/seata/seata/releases/download/v2.0.0/seata-server-2.0.0.tar.gz</span><br><span class="line"></span><br><span class="line">tar -zxvf seata-server-2.0.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> seata-server-2.0.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨Seata Server</span></span><br><span class="line">sh bin/seata-server.sh -p 8091 -h 127.0.0.1</span><br></pre></td></tr></table></figure>

<p><strong>3.2 é…ç½®å¾®æœåŠ¡æ¥å…¥Seata</strong></p>
<p>æ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-seata<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®Seataï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">seata:</span></span><br><span class="line">  <span class="attr">application-id:</span> <span class="string">$&#123;spring.application.name&#125;</span></span><br><span class="line">  <span class="attr">tx-service-group:</span> <span class="string">my_test_tx_group</span></span><br><span class="line">  <span class="attr">service:</span></span><br><span class="line">    <span class="attr">vgroup-mapping:</span></span><br><span class="line">      <span class="attr">my_test_tx_group:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">grouplist:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="string">localhost:8091</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">nacos</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">      <span class="attr">namespace:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="attr">group:</span> <span class="string">DEFAULT_GROUP</span></span><br><span class="line">      <span class="attr">application:</span> <span class="string">seata-server</span></span><br></pre></td></tr></table></figure>

<p><strong>3.3 ä½¿ç”¨Seataè¿›è¡Œäº‹åŠ¡ç®¡ç†</strong></p>
<p>åœ¨ä¸šåŠ¡æ–¹æ³•ä¸Šæ·»åŠ <code>@GlobalTransactional</code>æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderMapper orderMapper;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProductClient productClient;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GlobalTransactional</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Order <span class="title">createOrder</span><span class="params">(OrderDTO orderDTO)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºè®¢å•</span></span><br><span class="line">        Order order = <span class="keyword">new</span> Order();</span><br><span class="line">        order.setUserId(orderDTO.getUserId());</span><br><span class="line">        order.setProductId(orderDTO.getProductId());</span><br><span class="line">        order.setQuantity(orderDTO.getQuantity());</span><br><span class="line">        orderMapper.insert(order);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰£å‡åº“å­˜</span></span><br><span class="line">        <span class="keyword">boolean</span> success = productClient.reduceInventory(</span><br><span class="line">            <span class="keyword">new</span> InventoryDTO().setProductId(orderDTO.getProductId())</span><br><span class="line">                             .setQuantity(orderDTO.getQuantity())</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (!success) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;æ‰£å‡åº“å­˜å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> order;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤çš„ç›‘æ§ä¸å‘Šè­¦å®è·µ-ğŸ“Š"><a href="#äº”ã€å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤çš„ç›‘æ§ä¸å‘Šè­¦å®è·µ-ğŸ“Š" class="headerlink" title="äº”ã€å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤çš„ç›‘æ§ä¸å‘Šè­¦å®è·µ ğŸ“Š"></a>äº”ã€å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤çš„ç›‘æ§ä¸å‘Šè­¦å®è·µ ğŸ“Š</h2><h3 id="1-ç›‘æ§ä½“ç³»æ¶æ„"><a href="#1-ç›‘æ§ä½“ç³»æ¶æ„" class="headerlink" title="1. ç›‘æ§ä½“ç³»æ¶æ„"></a>1. ç›‘æ§ä½“ç³»æ¶æ„</h3><p>ä¸€ä¸ªå®Œæ•´çš„å¾®æœåŠ¡ç›‘æ§ä½“ç³»åº”åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>æŒ‡æ ‡ç›‘æ§</strong>ï¼šæ”¶é›†å’Œå±•ç¤ºç³»ç»Ÿè¿è¡ŒæŒ‡æ ‡</li>
<li><strong>æ—¥å¿—ç®¡ç†</strong>ï¼šé›†ä¸­æ”¶é›†ã€å­˜å‚¨å’Œåˆ†ææ—¥å¿—</li>
<li><strong>é“¾è·¯è¿½è¸ª</strong>ï¼šè¿½è¸ªè¯·æ±‚çš„å®Œæ•´è°ƒç”¨é“¾è·¯</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šç›‘æ§æœåŠ¡çš„å¥åº·çŠ¶æ€</li>
<li><strong>å‘Šè­¦é€šçŸ¥</strong>ï¼šåŠæ—¶å‘ç°å’Œé€šçŸ¥é—®é¢˜</li>
</ul>
<h3 id="2-åŸºäºPrometheuså’ŒGrafanaçš„æŒ‡æ ‡ç›‘æ§"><a href="#2-åŸºäºPrometheuså’ŒGrafanaçš„æŒ‡æ ‡ç›‘æ§" class="headerlink" title="2. åŸºäºPrometheuså’ŒGrafanaçš„æŒ‡æ ‡ç›‘æ§"></a>2. åŸºäºPrometheuså’ŒGrafanaçš„æŒ‡æ ‡ç›‘æ§</h3><p><strong>2.1 éƒ¨ç½²Prometheus</strong></p>
<p>åˆ›å»ºPrometheusé…ç½®æ–‡ä»¶<code>prometheus.yml</code>ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">scrape_interval:</span> <span class="string">15s</span></span><br><span class="line">  <span class="attr">evaluation_interval:</span> <span class="string">15s</span></span><br><span class="line"></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;spring-actuator&#x27;</span></span><br><span class="line">    <span class="attr">metrics_path:</span> <span class="string">&#x27;/actuator/prometheus&#x27;</span></span><br><span class="line">    <span class="attr">scrape_interval:</span> <span class="string">5s</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;localhost:8080&#x27;</span>, <span class="string">&#x27;localhost:8081&#x27;</span>]  <span class="comment"># å¾®æœåŠ¡å®ä¾‹åœ°å€</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨Prometheusï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9090:9090 -v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus</span><br></pre></td></tr></table></figure>

<p><strong>2.2 é…ç½®å¾®æœåŠ¡æš´éœ²æŒ‡æ ‡</strong></p>
<p>æ·»åŠ ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.micrometer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®Actuatorï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">prometheus,health,info,metrics</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line">  <span class="attr">metrics:</span></span><br><span class="line">    <span class="attr">export:</span></span><br><span class="line">      <span class="attr">prometheus:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p><strong>2.3 éƒ¨ç½²Grafanaå¹¶é…ç½®Dashboard</strong></p>
<p>å¯åŠ¨Grafanaï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3000:3000 grafana/grafana</span><br></pre></td></tr></table></figure>

<p>åœ¨Grafanaä¸­æ·»åŠ Prometheusæ•°æ®æºï¼Œå¹¶å¯¼å…¥Spring Bootç›¸å…³çš„Dashboardï¼ˆæ¨èä½¿ç”¨IDä¸º12856çš„Dashboardï¼‰ã€‚</p>
<h3 id="3-åŸºäºELKçš„æ—¥å¿—ç®¡ç†"><a href="#3-åŸºäºELKçš„æ—¥å¿—ç®¡ç†" class="headerlink" title="3. åŸºäºELKçš„æ—¥å¿—ç®¡ç†"></a>3. åŸºäºELKçš„æ—¥å¿—ç®¡ç†</h3><p><strong>3.1 éƒ¨ç½²ELK Stack</strong></p>
<p>ä½¿ç”¨Docker Composeéƒ¨ç½²ELK Stackï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">elasticsearch:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">elasticsearch:8.10.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9200:9200&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">discovery.type=single-node</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ES_JAVA_OPTS=-Xms512m</span> <span class="string">-Xmx512m</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">xpack.security.enabled=false</span></span><br><span class="line">  <span class="attr">logstash:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">logstash:8.10.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5044:5044&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./logstash.conf:/usr/share/logstash/pipeline/logstash.conf</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elasticsearch</span></span><br><span class="line">  <span class="attr">kibana:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">kibana:8.10.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;5601:5601&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">elasticsearch</span></span><br></pre></td></tr></table></figure>

<p><strong>3.2 é…ç½®å¾®æœåŠ¡è¾“å‡ºç»“æ„åŒ–æ—¥å¿—</strong></p>
<p>æ·»åŠ Logbacké…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;LOGSTASH&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">destination</span>&gt;</span>localhost:5044<span class="tag">&lt;/<span class="name">destination</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.encoder.LogstashEncoder&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">customFields</span>&gt;</span>&#123;</span><br><span class="line">        &quot;app_name&quot;:&quot;$&#123;spring.application.name&#125;&quot;,</span><br><span class="line">        &quot;environment&quot;:&quot;$&#123;spring.profiles.active&#125;&quot;</span><br><span class="line">      &#125;<span class="tag">&lt;/<span class="name">customFields</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;LOGSTASH&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-å‘Šè­¦ç³»ç»Ÿé…ç½®"><a href="#4-å‘Šè­¦ç³»ç»Ÿé…ç½®" class="headerlink" title="4. å‘Šè­¦ç³»ç»Ÿé…ç½®"></a>4. å‘Šè­¦ç³»ç»Ÿé…ç½®</h3><p><strong>4.1 åœ¨Prometheusä¸­é…ç½®å‘Šè­¦è§„åˆ™</strong></p>
<p>åˆ›å»ºå‘Šè­¦è§„åˆ™æ–‡ä»¶<code>alerts.yml</code>ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">groups:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">spring-boot-alerts</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">HighCpuUsage</span></span><br><span class="line">    <span class="attr">expr:</span> <span class="number">100</span> <span class="bullet">-</span> <span class="string">(avg</span> <span class="string">by(instance)</span> <span class="string">(irate(node_cpu_seconds_total&#123;mode=&quot;idle&quot;&#125;[5m]))</span> <span class="string">*</span> <span class="number">100</span><span class="string">)</span> <span class="string">&gt;</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">for:</span> <span class="string">5m</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">warning</span></span><br><span class="line">    <span class="attr">annotations:</span></span><br><span class="line">      <span class="attr">summary:</span> <span class="string">&quot;High CPU usage detected&quot;</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">&quot;CPU usage is above 80% for 5 minutes&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">alert:</span> <span class="string">ServiceDown</span></span><br><span class="line">    <span class="attr">expr:</span> <span class="string">up</span> <span class="string">==</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">for:</span> <span class="string">1m</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">severity:</span> <span class="string">critical</span></span><br><span class="line">    <span class="attr">annotations:</span></span><br><span class="line">      <span class="attr">summary:</span> <span class="string">&quot;Service is down&quot;</span></span><br><span class="line">      <span class="attr">description:</span> <span class="string">&quot;Service <span class="template-variable">&#123;&#123; $labels.instance &#125;&#125;</span> has been down for 1 minute&quot;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨Prometheusé…ç½®æ–‡ä»¶ä¸­å¼•ç”¨å‘Šè­¦è§„åˆ™ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;alerts.yml&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>4.2 é…ç½®Alertmanager</strong></p>
<p>åˆ›å»ºAlertmanageré…ç½®æ–‡ä»¶<code>alertmanager.yml</code>ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">route:</span></span><br><span class="line">  <span class="attr">receiver:</span> <span class="string">&#x27;email-notifications&#x27;</span></span><br><span class="line"><span class="attr">receivers:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&#x27;email-notifications&#x27;</span></span><br><span class="line">  <span class="attr">email_configs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">to:</span> <span class="string">&#x27;admin@example.com&#x27;</span></span><br><span class="line">    <span class="attr">from:</span> <span class="string">&#x27;alertmanager@example.com&#x27;</span></span><br><span class="line">    <span class="attr">smarthost:</span> <span class="string">&#x27;smtp.example.com:587&#x27;</span></span><br><span class="line">    <span class="attr">auth_username:</span> <span class="string">&#x27;alertmanager&#x27;</span></span><br><span class="line">    <span class="attr">auth_password:</span> <span class="string">&#x27;password&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨Alertmanagerï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9093:9093 -v /path/to/alertmanager.yml:/etc/alertmanager/alertmanager.yml prom/alertmanager</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®®-ğŸ“"><a href="#å…­ã€æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®®-ğŸ“" class="headerlink" title="å…­ã€æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®® ğŸ“"></a>å…­ã€æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®® ğŸ“</h2><p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£äº†å¦‚ä½•åŸºäºSpring Cloud Alibabaæ„å»ºä¸€ä¸ªå®Œæ•´çš„å¾®æœåŠ¡æ²»ç†å¹³å°ï¼ŒåŒ…æ‹¬æœåŠ¡æ³¨å†Œå‘ç°ã€é…ç½®ç®¡ç†ã€APIç½‘å…³ã€æœåŠ¡è°ƒç”¨ã€æµé‡æ§åˆ¶ã€é“¾è·¯è¿½è¸ªã€åˆ†å¸ƒå¼äº‹åŠ¡ä»¥åŠç›‘æ§å‘Šè­¦ç­‰æ ¸å¿ƒç»„ä»¶çš„å®ç°æ–¹æ³•ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›åœ¨å®è·µä¸­æ€»ç»“çš„æœ€ä½³å®è·µå»ºè®®ï¼š</p>
<ol>
<li><p><strong>ä»å°è§„æ¨¡å¼€å§‹ï¼Œé€æ­¥æ‰©å±•</strong>ï¼šä¸è¦ä¸€å¼€å§‹å°±å°è¯•æ„å»ºä¸€ä¸ªéå¸¸å¤æ‚çš„å¾®æœåŠ¡ç³»ç»Ÿï¼Œåº”è¯¥ä»å°è§„æ¨¡å¼€å§‹ï¼Œç§¯ç´¯ç»éªŒåå†é€æ­¥æ‰©å±•ã€‚</p>
</li>
<li><p><strong>ç»Ÿä¸€æŠ€æœ¯æ ˆå’Œè§„èŒƒ</strong>ï¼šåœ¨å›¢é˜Ÿå†…éƒ¨ç»Ÿä¸€æŠ€æœ¯æ ˆå’Œå¼€å‘è§„èŒƒï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬å’Œç»´æŠ¤éš¾åº¦ã€‚</p>
</li>
<li><p><strong>è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œè¿ç»´</strong>ï¼šå°½å¯èƒ½å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨åŒ–æµ‹è¯•å’Œè‡ªåŠ¨åŒ–è¿ç»´ï¼Œæé«˜å¼€å‘å’Œè¿ç»´æ•ˆç‡ã€‚</p>
</li>
<li><p><strong>é‡è§†å®‰å…¨</strong>ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå®‰å…¨é—®é¢˜æ›´åŠ çªå‡ºï¼Œåº”è¯¥é‡è§†è®¤è¯æˆæƒã€æ•°æ®åŠ å¯†ã€è®¿é—®æ§åˆ¶ç­‰å®‰å…¨æªæ–½ã€‚</p>
</li>
<li><p><strong>æŒç»­ä¼˜åŒ–</strong>ï¼šå¾®æœåŠ¡æ²»ç†æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ä¸æ–­åœ°ç›‘æ§ã€åˆ†æå’Œä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>
</li>
</ol>
<p>å¾®æœåŠ¡æ²»ç†æ˜¯ä¸€ä¸ªå¤æ‚è€Œåºå¤§çš„è¯é¢˜ï¼Œæœ¬æ–‡åªæ˜¯ä»‹ç»äº†å…¶ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿä¸ºä½ æ„å»ºè‡ªå·±çš„å¾®æœåŠ¡æ²»ç†å¹³å°æä¾›ä¸€äº›å‚è€ƒå’Œå¸®åŠ©ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ˜Š</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2024/07/22/spring-boot/2024-spring-boot-3-new-features/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/07/22/spring-boot/2024-spring-boot-3-new-features/" class="post-title-link" itemprop="url">Spring Boot 3.xæ–°ç‰¹æ€§è½åœ°å®è·µ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-07-22 00:00:00" itemprop="dateCreated datePublished" datetime="2024-07-22T00:00:00+08:00">2024-07-22</time>
    </span>

  
    <span id="/2024/07/22/spring-boot/2024-spring-boot-3-new-features/" class="post-meta-item leancloud_visitors" data-flag-title="Spring Boot 3.xæ–°ç‰¹æ€§è½åœ°å®è·µ" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>6.1k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>6 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Spring-Boot-3-xæ–°ç‰¹æ€§è½åœ°å®è·µ-ğŸš€"><a href="#Spring-Boot-3-xæ–°ç‰¹æ€§è½åœ°å®è·µ-ğŸš€" class="headerlink" title="Spring Boot 3.xæ–°ç‰¹æ€§è½åœ°å®è·µ ğŸš€"></a>Spring Boot 3.xæ–°ç‰¹æ€§è½åœ°å®è·µ ğŸš€</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ éšç€Spring Boot 3.xçš„æ­£å¼å‘å¸ƒï¼Œæˆ‘ä»¬è¿æ¥äº†è®¸å¤šä»¤äººæ¿€åŠ¨çš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚ä½œä¸ºä¸€åSpringç”Ÿæ€çš„å¿ å®ç”¨æˆ·ï¼Œæˆ‘åœ¨å¤šä¸ªé¡¹ç›®ä¸­å®Œæˆäº†ä»Spring Boot 2.xåˆ°3.xçš„å‡çº§ï¼Œå¹¶ç§¯ç´¯äº†ä¸€äº›å®è´µçš„ç»éªŒã€‚ä»Šå¤©ï¼Œæˆ‘å°†å’Œå¤§å®¶åˆ†äº«Spring Boot 3.xçš„æ ¸å¿ƒæ–°ç‰¹æ€§ä»¥åŠè½åœ°å®è·µä¸­çš„æœ€ä½³æ–¹æ¡ˆã€‚</p>
<h2 id="ä¸€ã€Spring-Boot-3-xçš„æ ¸å¿ƒæ–°ç‰¹æ€§-ğŸŒŸ"><a href="#ä¸€ã€Spring-Boot-3-xçš„æ ¸å¿ƒæ–°ç‰¹æ€§-ğŸŒŸ" class="headerlink" title="ä¸€ã€Spring Boot 3.xçš„æ ¸å¿ƒæ–°ç‰¹æ€§ ğŸŒŸ"></a>ä¸€ã€Spring Boot 3.xçš„æ ¸å¿ƒæ–°ç‰¹æ€§ ğŸŒŸ</h2><h3 id="1-åŸºäºJava-17çš„æœ€ä½è¦æ±‚"><a href="#1-åŸºäºJava-17çš„æœ€ä½è¦æ±‚" class="headerlink" title="1. åŸºäºJava 17çš„æœ€ä½è¦æ±‚"></a>1. åŸºäºJava 17çš„æœ€ä½è¦æ±‚</h3><p>Spring Boot 3.xå°†æœ€ä½æ”¯æŒçš„Javaç‰ˆæœ¬æå‡åˆ°äº†Java 17ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥äº«å—Java 17å¸¦æ¥çš„æ‰€æœ‰æ–°ç‰¹æ€§å’Œæ€§èƒ½æ”¹è¿›ï¼š</p>
<ul>
<li>å¯†å°ç±»ï¼ˆSealed Classesï¼‰</li>
<li>æ¨¡å¼åŒ¹é…ï¼ˆPattern Matchingï¼‰</li>
<li>æ–‡æœ¬å—ï¼ˆText Blocksï¼‰</li>
<li>æ”¹è¿›çš„åƒåœ¾æ”¶é›†å™¨</li>
<li>æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h3 id="2-å…¨é¢æ”¯æŒJakarta-EE-10"><a href="#2-å…¨é¢æ”¯æŒJakarta-EE-10" class="headerlink" title="2. å…¨é¢æ”¯æŒJakarta EE 10"></a>2. å…¨é¢æ”¯æŒJakarta EE 10</h3><p>Spring Boot 3.xå…¨é¢æ”¯æŒJakarta EE 10ï¼Œè¿™æ˜¯Java EEçš„æ–°ä¸€ä»£æ¼”è¿›ç‰ˆæœ¬ã€‚ä¸»è¦å˜åŒ–åŒ…æ‹¬ï¼š</p>
<ul>
<li>åŒ…åä»<code>javax.*</code>è¿ç§»åˆ°<code>jakarta.*</code></li>
<li>Servlet API 6.0æ”¯æŒ</li>
<li>JPA 3.1æ”¯æŒ</li>
<li>Bean Validation 3.0æ”¯æŒ</li>
</ul>
<h3 id="3-åŸç”Ÿé•œåƒæ”¯æŒï¼ˆGraalVMï¼‰"><a href="#3-åŸç”Ÿé•œåƒæ”¯æŒï¼ˆGraalVMï¼‰" class="headerlink" title="3. åŸç”Ÿé•œåƒæ”¯æŒï¼ˆGraalVMï¼‰"></a>3. åŸç”Ÿé•œåƒæ”¯æŒï¼ˆGraalVMï¼‰</h3><p>Spring Boot 3.xæä¾›äº†å¯¹GraalVMåŸç”Ÿé•œåƒçš„å®˜æ–¹æ”¯æŒï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤§çªç ´ï¼š</p>
<ul>
<li>å¯åŠ¨æ—¶é—´æ˜¾è‘—å‡å°‘ï¼ˆæ¯«ç§’çº§å¯åŠ¨ï¼‰</li>
<li>å†…å­˜å ç”¨å¤§å¹…é™ä½</li>
<li>é€‚åˆå®¹å™¨åŒ–å’ŒServerlessç¯å¢ƒ</li>
<li>æ”¯æŒAOTç¼–è¯‘ä¼˜åŒ–</li>
</ul>
<h3 id="4-æ ¸å¿ƒå®¹å™¨æ”¹è¿›"><a href="#4-æ ¸å¿ƒå®¹å™¨æ”¹è¿›" class="headerlink" title="4. æ ¸å¿ƒå®¹å™¨æ”¹è¿›"></a>4. æ ¸å¿ƒå®¹å™¨æ”¹è¿›</h3><p>Spring Boot 3.xå¯¹æ ¸å¿ƒå®¹å™¨è¿›è¡Œäº†å¤šé¡¹æ”¹è¿›ï¼š</p>
<ul>
<li>è‡ªåŠ¨é…ç½®ç±»çš„æ¡ä»¶è¯„ä¼°ä¼˜åŒ–</li>
<li>æ”¹è¿›çš„é…ç½®å±æ€§å¤„ç†</li>
<li>æ›´å¼ºå¤§çš„å¯åŠ¨æ—¥å¿—</li>
<li>å¢å¼ºçš„é”™è¯¯è¯Šæ–­èƒ½åŠ›</li>
</ul>
<h3 id="5-Webå±‚æ›´æ–°"><a href="#5-Webå±‚æ›´æ–°" class="headerlink" title="5. Webå±‚æ›´æ–°"></a>5. Webå±‚æ›´æ–°</h3><p>Webå±‚ä¹Ÿè¿æ¥äº†å¤šé¡¹é‡è¦æ›´æ–°ï¼š</p>
<ul>
<li>Spring MVCå’ŒWebFluxçš„æ€§èƒ½ä¼˜åŒ–</li>
<li>æ”¹è¿›çš„æµ‹è¯•æ”¯æŒ</li>
<li>æ–°å¢çš„HTTP/3æ”¯æŒ</li>
<li>å“åº”å¼APIå¢å¼º</li>
</ul>
<h2 id="äºŒã€ä»Spring-Boot-2-xå‡çº§åˆ°3-xçš„å®æˆ˜ç»éªŒ-ğŸ“š"><a href="#äºŒã€ä»Spring-Boot-2-xå‡çº§åˆ°3-xçš„å®æˆ˜ç»éªŒ-ğŸ“š" class="headerlink" title="äºŒã€ä»Spring Boot 2.xå‡çº§åˆ°3.xçš„å®æˆ˜ç»éªŒ ğŸ“š"></a>äºŒã€ä»Spring Boot 2.xå‡çº§åˆ°3.xçš„å®æˆ˜ç»éªŒ ğŸ“š</h2><h3 id="1-å‡çº§å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#1-å‡çº§å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="1. å‡çº§å‰çš„å‡†å¤‡å·¥ä½œ"></a>1. å‡çº§å‰çš„å‡†å¤‡å·¥ä½œ</h3><p>åœ¨å¼€å§‹å‡çº§ä¹‹å‰ï¼Œåšå¥½å……åˆ†çš„å‡†å¤‡å·¥ä½œè‡³å…³é‡è¦ï¼š</p>
<p><strong>1.1 æ£€æŸ¥å½“å‰é¡¹ç›®ä¾èµ–</strong></p>
<p>ä½¿ç”¨<code>mvn dependency:tree</code>æˆ–Gradleçš„ä¾èµ–æŠ¥å‘ŠåŠŸèƒ½ï¼Œæ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦æœ‰ä¸Spring Boot 3.xä¸å…¼å®¹çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p><strong>1.2 æ›´æ–°å¼€å‘ç¯å¢ƒ</strong></p>
<p>ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>JDK 17æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>Maven 3.8.6+æˆ–Gradle 7.5+</li>
<li>å…¼å®¹çš„IDEç‰ˆæœ¬ï¼ˆIntelliJ IDEA 2022.3+, Eclipse 2022-12+, VSCodeæœ€æ–°ç‰ˆï¼‰</li>
</ul>
<p><strong>1.3 åˆ›å»ºåˆ†æ”¯å’Œå¤‡ä»½</strong></p>
<p>åœ¨å‡çº§å‰åˆ›å»ºä¸“é—¨çš„å‡çº§åˆ†æ”¯ï¼Œå¹¶å¯¹é‡è¦æ•°æ®è¿›è¡Œå¤‡ä»½ï¼Œä»¥é˜²ä¸‡ä¸€ã€‚</p>
<h3 id="2-å‡çº§çš„å…·ä½“æ­¥éª¤"><a href="#2-å‡çº§çš„å…·ä½“æ­¥éª¤" class="headerlink" title="2. å‡çº§çš„å…·ä½“æ­¥éª¤"></a>2. å‡çº§çš„å…·ä½“æ­¥éª¤</h3><p><strong>2.1 ä¿®æ”¹Spring Bootç‰ˆæœ¬</strong></p>
<p>é¦–å…ˆï¼Œæ›´æ–°é¡¹ç›®ä¸­çš„Spring Bootç‰ˆæœ¬ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Maven --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Gradle --&gt;</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id &#x27;org.springframework.boot&#x27; version &#x27;3.2.4&#x27;</span><br><span class="line">    id &#x27;io.spring.dependency-management&#x27; version &#x27;1.1.4&#x27;</span><br><span class="line">    // å…¶ä»–æ’ä»¶</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.2 å¤„ç†javaxåˆ°jakartaçš„åŒ…åå˜æ›´</strong></p>
<p>è¿™æ˜¯å‡çº§è¿‡ç¨‹ä¸­æœ€ç¹çä½†ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—§ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> jakarta.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> jakarta.validation.constraints.NotNull;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥ä½¿ç”¨IDEçš„æ‰¹é‡æ›¿æ¢åŠŸèƒ½æ¥åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œä½†è¦æ³¨æ„ä»”ç»†æ£€æŸ¥ï¼Œé¿å…æ›¿æ¢é”™è¯¯ã€‚</p>
<p><strong>2.3 æ›´æ–°Spring Cloudç‰ˆæœ¬ï¼ˆå¦‚æœä½¿ç”¨ï¼‰</strong></p>
<p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº†Spring Cloudï¼Œéœ€è¦å°†å…¶æ›´æ–°åˆ°ä¸Spring Boot 3.xå…¼å®¹çš„ç‰ˆæœ¬ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">spring-cloud.version</span>&gt;</span>2023.0.0<span class="tag">&lt;/<span class="name">spring-cloud.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.4 ä¿®å¤å·²å¼ƒç”¨çš„APIå’Œé…ç½®</strong></p>
<p>Spring Boot 3.xç§»é™¤äº†è®¸å¤šåœ¨2.xä¸­å·²å¼ƒç”¨çš„APIå’Œé…ç½®é¡¹ã€‚ä½¿ç”¨IDEçš„è­¦å‘ŠåŠŸèƒ½æˆ–é™æ€ä»£ç åˆ†æå·¥å…·æ¥è¯†åˆ«å¹¶ä¿®å¤è¿™äº›é—®é¢˜ã€‚</p>
<p><strong>2.5 è¿è¡Œæµ‹è¯•å¹¶è¿›è¡Œå¿…è¦çš„è°ƒæ•´</strong></p>
<p>åœ¨å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œè¿è¡Œé¡¹ç›®çš„æµ‹è¯•å¥—ä»¶ï¼Œå¹¶æ ¹æ®æµ‹è¯•ç»“æœè¿›è¡Œå¿…è¦çš„è°ƒæ•´ã€‚ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>è‡ªåŠ¨é…ç½®è¡Œä¸ºçš„å˜åŒ–</li>
<li>ä¾èµ–åº“çš„å…¼å®¹æ€§é—®é¢˜</li>
<li>é…ç½®å±æ€§çš„å˜åŒ–</li>
</ul>
<h3 id="3-å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#3-å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="3. å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>3. å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3><p>åœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹å¸¸è§é—®é¢˜ï¼š</p>
<p><strong>3.1 ç¬¬ä¸‰æ–¹åº“å…¼å®¹æ€§é—®é¢˜</strong></p>
<p><strong>é—®é¢˜</strong>ï¼šæŸäº›ç¬¬ä¸‰æ–¹åº“å°šæœªæ”¯æŒSpring Boot 3.xæˆ–Jakarta EE 10ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥åº“çš„æœ€æ–°ç‰ˆæœ¬æ˜¯å¦æ”¯æŒSpring Boot 3.x</li>
<li>å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆæˆ–ä¸´æ—¶è§£å†³æ–¹æ¡ˆ</li>
<li>å¦‚æœæ˜¯å¼€æºåº“ï¼Œå¯ä»¥è€ƒè™‘è´¡çŒ®ä»£ç å¸®åŠ©å…¶æ”¯æŒSpring Boot 3.x</li>
</ul>
<p><strong>3.2 é…ç½®å±æ€§å˜åŒ–</strong></p>
<p><strong>é—®é¢˜</strong>ï¼šä¸€äº›é…ç½®å±æ€§çš„åç§°æˆ–é»˜è®¤å€¼å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>spring-boot-properties-migrator</code>ä¾èµ–æ¥å¸®åŠ©è¯†åˆ«å’Œè¿ç§»é…ç½®å±æ€§</li>
<li>æŸ¥é˜…Spring Boot 3.xçš„å®˜æ–¹æ–‡æ¡£ï¼Œäº†è§£é…ç½®å±æ€§çš„å˜åŒ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-properties-migrator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3.3 æµ‹è¯•å¤±è´¥</strong></p>
<p><strong>é—®é¢˜</strong>ï¼šå‡çº§åï¼Œä¸€äº›æµ‹è¯•ç”¨ä¾‹å¤±è´¥ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥æµ‹è¯•ä¸­ä½¿ç”¨çš„APIæ˜¯å¦å·²è¢«ç§»é™¤æˆ–æ›´æ”¹</li>
<li>æ›´æ–°æµ‹è¯•ä¾èµ–ç‰ˆæœ¬</li>
<li>è°ƒæ•´æµ‹è¯•ç­–ç•¥ï¼Œé€‚åº”Spring Boot 3.xçš„å˜åŒ–</li>
</ul>
<h2 id="ä¸‰ã€GraalVMåŸç”Ÿé•œåƒåœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨æ¡ˆä¾‹-ğŸ­"><a href="#ä¸‰ã€GraalVMåŸç”Ÿé•œåƒåœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨æ¡ˆä¾‹-ğŸ­" class="headerlink" title="ä¸‰ã€GraalVMåŸç”Ÿé•œåƒåœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨æ¡ˆä¾‹ ğŸ­"></a>ä¸‰ã€GraalVMåŸç”Ÿé•œåƒåœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨æ¡ˆä¾‹ ğŸ­</h2><h3 id="1-GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿"><a href="#1-GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿" class="headerlink" title="1. GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿"></a>1. GraalVMåŸç”Ÿé•œåƒçš„ä¼˜åŠ¿</h3><p>GraalVMåŸç”Ÿé•œåƒä¸ºSpring Bootåº”ç”¨å¸¦æ¥äº†æ˜¾è‘—çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å¯åŠ¨æ—¶é—´æå¿«</strong>ï¼šä»æ•°åç§’å‡å°‘åˆ°æ•°ç™¾æ¯«ç§’</li>
<li><strong>å†…å­˜å ç”¨æä½</strong>ï¼šé€šå¸¸æ¯”JVMæ¨¡å¼å‡å°‘50%-80%</li>
<li><strong>å³æ—¶å°±ç»ª</strong>ï¼šå¯åŠ¨åç«‹å³è¾¾åˆ°æœ€ä½³æ€§èƒ½çŠ¶æ€</li>
<li><strong>å®¹å™¨å‹å¥½</strong>ï¼šç‰¹åˆ«é€‚åˆKuberneteså’ŒServerlessç¯å¢ƒ</li>
</ul>
<h3 id="2-æ„å»ºåŸç”Ÿé•œåƒçš„é…ç½®ä¸å®è·µ"><a href="#2-æ„å»ºåŸç”Ÿé•œåƒçš„é…ç½®ä¸å®è·µ" class="headerlink" title="2. æ„å»ºåŸç”Ÿé•œåƒçš„é…ç½®ä¸å®è·µ"></a>2. æ„å»ºåŸç”Ÿé•œåƒçš„é…ç½®ä¸å®è·µ</h3><p><strong>2.1 æ·»åŠ Spring BootåŸç”Ÿé•œåƒæ”¯æŒ</strong></p>
<p>è¦ä¸ºSpring Bootåº”ç”¨æ·»åŠ GraalVMåŸç”Ÿé•œåƒæ”¯æŒï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ–å’Œæ’ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ·»åŠ GraalVMåŸç”Ÿé•œåƒæ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>developmentOnly<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ·»åŠ åŸç”Ÿé•œåƒæ„å»ºæ’ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.graalvm.buildtools<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>native-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2.2 æ„å»ºåŸç”Ÿé•œåƒ</strong></p>
<p>ä½¿ç”¨Mavenæˆ–Gradleæ„å»ºåŸç”Ÿé•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Maven</span></span><br><span class="line">mvn -Pnative native:compile</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gradle</span></span><br><span class="line">gradle nativeCompile</span><br></pre></td></tr></table></figure>

<p><strong>2.3 å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</strong></p>
<p>åœ¨æ„å»ºå’Œè¿è¡ŒåŸç”Ÿé•œåƒæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¸¸è§é—®é¢˜ï¼š</p>
<p><strong>åå°„é—®é¢˜</strong></p>
<p>GraalVMåŸç”Ÿé•œåƒåœ¨ç¼–è¯‘æ—¶éœ€è¦çŸ¥é“æ‰€æœ‰åå°„ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•ã€‚Spring Bootçš„AOTå¤„ç†å™¨ä¼šè‡ªåŠ¨å¤„ç†å¤§éƒ¨åˆ†æƒ…å†µï¼Œä½†æœ‰äº›æƒ…å†µä¸‹ä½ å¯èƒ½éœ€è¦æ‰‹åŠ¨é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ·»åŠ åå°„é…ç½®</span></span><br><span class="line">    <span class="meta">@NativeHint(</span></span><br><span class="line"><span class="meta">        types = @TypeHint(</span></span><br><span class="line"><span class="meta">            types = &#123;com.example.MyClass.class&#125;,</span></span><br><span class="line"><span class="meta">            access = &#123;AccessBits.DECLARED_METHODS, AccessBits.DECLARED_FIELDS&#125;</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NativeConfiguration</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>èµ„æºæ–‡ä»¶è®¿é—®é—®é¢˜</strong></p>
<p>åŸç”Ÿé•œåƒé»˜è®¤ä¸ä¼šåŒ…å«æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼Œéœ€è¦æ˜¾å¼é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NativeHint(</span></span><br><span class="line"><span class="meta">    resources = @ResourceHint(</span></span><br><span class="line"><span class="meta">        patterns = &#123;&quot;static/**&quot;, &quot;templates/**&quot;, &quot;application*.properties&quot;&#125;</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>

<h3 id="3-ç”Ÿäº§ç¯å¢ƒåº”ç”¨æ¡ˆä¾‹"><a href="#3-ç”Ÿäº§ç¯å¢ƒåº”ç”¨æ¡ˆä¾‹" class="headerlink" title="3. ç”Ÿäº§ç¯å¢ƒåº”ç”¨æ¡ˆä¾‹"></a>3. ç”Ÿäº§ç¯å¢ƒåº”ç”¨æ¡ˆä¾‹</h3><p><strong>3.1 å¾®æœåŠ¡ç½‘å…³ä¼˜åŒ–</strong></p>
<p><strong>èƒŒæ™¯</strong>ï¼šæŸå…¬å¸çš„APIç½‘å…³åŸºäºSpring Cloud Gatewayæ„å»ºï¼Œåœ¨Kubernetesç¯å¢ƒä¸­éƒ¨ç½²ï¼Œéœ€è¦å¿«é€Ÿå¯åŠ¨å’Œä½å†…å­˜å ç”¨ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šå°†APIç½‘å…³è¿ç§»åˆ°GraalVMåŸç”Ÿé•œåƒ</p>
<p><strong>å®æ–½æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>å¯åŠ¨æ—¶é—´ä»45ç§’å‡å°‘åˆ°0.8ç§’</li>
<li>å†…å­˜å ç”¨ä»512MBå‡å°‘åˆ°128MB</li>
<li>è‡ªåŠ¨æ‰©ç¼©å®¹å“åº”é€Ÿåº¦æå‡äº†50å€</li>
<li>å®¹å™¨é•œåƒå¤§å°ä»250MBå‡å°‘åˆ°80MB</li>
</ul>
<p><strong>3.2 æ— æœåŠ¡å™¨å‡½æ•°ä¼˜åŒ–</strong></p>
<p><strong>èƒŒæ™¯</strong>ï¼šæŸç”µå•†å¹³å°çš„æ— æœåŠ¡å™¨å‡½æ•°åŸºäºSpring Cloud Functionæ„å»ºï¼Œå†·å¯åŠ¨æ—¶é—´é•¿å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨GraalVMåŸç”Ÿé•œåƒæ„å»ºæ— æœåŠ¡å™¨å‡½æ•°</p>
<p><strong>å®æ–½æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>å†·å¯åŠ¨æ—¶é—´ä»3-5ç§’å‡å°‘åˆ°0.3-0.5ç§’</li>
<li>å‡½æ•°æ‰§è¡Œæˆæœ¬é™ä½äº†65%</li>
<li>ç”¨æˆ·æ»¡æ„åº¦æå‡äº†40%</li>
</ul>
<h2 id="å››ã€Java-17-21ä¸Spring-Boot-3-xçš„æœ€ä½³ç»„åˆ-ğŸ¤"><a href="#å››ã€Java-17-21ä¸Spring-Boot-3-xçš„æœ€ä½³ç»„åˆ-ğŸ¤" class="headerlink" title="å››ã€Java 17/21ä¸Spring Boot 3.xçš„æœ€ä½³ç»„åˆ ğŸ¤"></a>å››ã€Java 17/21ä¸Spring Boot 3.xçš„æœ€ä½³ç»„åˆ ğŸ¤</h2><h3 id="1-Java-17-vs-Java-21"><a href="#1-Java-17-vs-Java-21" class="headerlink" title="1. Java 17 vs Java 21"></a>1. Java 17 vs Java 21</h3><p>Spring Boot 3.xæ”¯æŒJava 17åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè€ŒJava 21ä½œä¸ºæœ€æ–°çš„é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼ˆLTSï¼‰ï¼Œæä¾›äº†æ›´å¤šçš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>Java 17</th>
<th>Java 21</th>
</tr>
</thead>
<tbody><tr>
<td>å¯†å°ç±»</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td>æ¨¡å¼åŒ¹é…</td>
<td>âœ…</td>
<td>âœ…ï¼ˆå¢å¼ºï¼‰</td>
</tr>
<tr>
<td>è™šæ‹Ÿçº¿ç¨‹</td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td>ç»“æ„åŒ–å¹¶å‘</td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²æ¨¡æ¿</td>
<td>âŒ</td>
<td>âœ…ï¼ˆé¢„è§ˆï¼‰</td>
</tr>
<tr>
<td>è®°å½•æ¨¡å¼</td>
<td>âŒ</td>
<td>âœ…ï¼ˆé¢„è§ˆï¼‰</td>
</tr>
</tbody></table>
<h3 id="2-æ€§èƒ½å¯¹æ¯”"><a href="#2-æ€§èƒ½å¯¹æ¯”" class="headerlink" title="2. æ€§èƒ½å¯¹æ¯”"></a>2. æ€§èƒ½å¯¹æ¯”</h3><p>Java 21åœ¨æ€§èƒ½æ–¹é¢æœ‰æ˜¾è‘—æå‡ï¼Œç‰¹åˆ«æ˜¯åœ¨åƒåœ¾æ”¶é›†å’Œå†…å­˜ç®¡ç†æ–¹é¢ï¼š</p>
<table>
<thead>
<tr>
<th>æ€§èƒ½æŒ‡æ ‡</th>
<th>Java 17</th>
<th>Java 21</th>
<th>æå‡å¹…åº¦</th>
</tr>
</thead>
<tbody><tr>
<td>å¯åŠ¨æ—¶é—´</td>
<td>åŸºå‡†</td>
<td>åŸºå‡†-15%</td>
<td>~15%</td>
</tr>
<tr>
<td>å†…å­˜å ç”¨</td>
<td>åŸºå‡†</td>
<td>åŸºå‡†-20%</td>
<td>~20%</td>
</tr>
<tr>
<td>ååé‡</td>
<td>åŸºå‡†</td>
<td>åŸºå‡†+10%</td>
<td>~10%</td>
</tr>
<tr>
<td>GCæš‚åœæ—¶é—´</td>
<td>åŸºå‡†</td>
<td>åŸºå‡†-30%</td>
<td>~30%</td>
</tr>
</tbody></table>
<h3 id="3-æœ€ä½³å®è·µå»ºè®®"><a href="#3-æœ€ä½³å®è·µå»ºè®®" class="headerlink" title="3. æœ€ä½³å®è·µå»ºè®®"></a>3. æœ€ä½³å®è·µå»ºè®®</h3><p>åŸºäºæˆ‘çš„å®è·µç»éªŒï¼Œæˆ‘æ¨èä»¥ä¸‹æœ€ä½³ç»„åˆç­–ç•¥ï¼š</p>
<p><strong>3.1 æ–°é¡¹ç›®</strong></p>
<p>å¯¹äºæ–°é¡¹ç›®ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨<strong>Spring Boot 3.2+å’ŒJava 21</strong>ï¼Œè¿™æ ·å¯ä»¥å……åˆ†åˆ©ç”¨æœ€æ–°çš„ç‰¹æ€§å’Œæ€§èƒ½æ”¹è¿›ã€‚</p>
<p><strong>3.2 ç°æœ‰é¡¹ç›®</strong></p>
<p>å¯¹äºç°æœ‰é¡¹ç›®ï¼š</p>
<ul>
<li>å¦‚æœæ­£åœ¨ä½¿ç”¨Java 11æˆ–æ›´æ—©ç‰ˆæœ¬ï¼Œå»ºè®®å…ˆå‡çº§åˆ°Java 17ï¼Œç„¶åå†å‡çº§åˆ°Spring Boot 3.x</li>
<li>å¦‚æœå·²ç»åœ¨ä½¿ç”¨Java 17ï¼Œå¯ä»¥ç›´æ¥å‡çº§åˆ°Spring Boot 3.x</li>
<li>åœ¨ç¨³å®šè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå†è€ƒè™‘å‡çº§åˆ°Java 21</li>
</ul>
<p><strong>3.3 é…ç½®ä¼˜åŒ–å»ºè®®</strong></p>
<p>ä¸ºäº†å……åˆ†å‘æŒ¥Java 17/21å’ŒSpring Boot 3.xçš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›é…ç½®ä¼˜åŒ–å»ºè®®ï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># JVMå‚æ•°ä¼˜åŒ–</span></span><br><span class="line"><span class="meta">-XX</span>:<span class="string">+UseG1GC</span></span><br><span class="line"><span class="meta">-XX</span>:<span class="string">+ParallelRefProcEnabled</span></span><br><span class="line"><span class="meta">-XX</span>:<span class="string">+UseStringDeduplication</span></span><br><span class="line"><span class="meta">-XX</span>:<span class="string">+UnlockExperimentalVMOptions</span></span><br><span class="line"><span class="meta">-XX</span>:<span class="string">G1NewSizePercent=20</span></span><br><span class="line"><span class="meta">-XX</span>:<span class="string">MaxGCPauseMillis=200</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Spring Booté…ç½®ä¼˜åŒ–</span></span><br><span class="line"><span class="meta">spring.main.lazy-initialization</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">spring.jackson.serialization.fail-on-empty-beans</span>=<span class="string">false</span></span><br><span class="line"><span class="meta">server.tomcat.connection-timeout</span>=<span class="string">30000</span></span><br><span class="line"><span class="meta">server.tomcat.max-threads</span>=<span class="string">200</span></span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€æ€»ç»“ä¸å±•æœ›-ğŸ”®"><a href="#äº”ã€æ€»ç»“ä¸å±•æœ›-ğŸ”®" class="headerlink" title="äº”ã€æ€»ç»“ä¸å±•æœ› ğŸ”®"></a>äº”ã€æ€»ç»“ä¸å±•æœ› ğŸ”®</h2><p>Spring Boot 3.xçš„å‘å¸ƒæ ‡å¿—ç€Springç”Ÿæ€ç³»ç»Ÿçš„ä¸€æ¬¡é‡å¤§é£è·ƒï¼Œå®ƒä¸ä»…å¸¦æ¥äº†è®¸å¤šä»¤äººæ¿€åŠ¨çš„æ–°ç‰¹æ€§ï¼Œè¿˜æ˜¾è‘—æå‡äº†æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚é€šè¿‡æœ¬æ–‡åˆ†äº«çš„å‡çº§ç»éªŒå’Œæœ€ä½³å®è·µï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©å¤§å®¶é¡ºåˆ©å®Œæˆä»Spring Boot 2.xåˆ°3.xçš„è¿‡æ¸¡ã€‚</p>
<p>ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯GraalVMåŸç”Ÿé•œåƒæ”¯æŒï¼Œå®ƒä¸ºSpring Bootåº”ç”¨å¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å®¹å™¨åŒ–å’ŒServerlessç¯å¢ƒä¸­ã€‚éšç€Java 21æˆä¸ºæ–°çš„LTSç‰ˆæœ¬ï¼Œè™šæ‹Ÿçº¿ç¨‹ç­‰ç‰¹æ€§å°†è¿›ä¸€æ­¥æå‡Spring Bootåº”ç”¨çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p>
<p>å‡çº§åˆ°Spring Boot 3.xä¸ä»…ä»…æ˜¯ç‰ˆæœ¬çš„æ›´æ–°ï¼Œæ›´æ˜¯ä¸€æ¬¡æŠ€æœ¯æ ˆçš„ç°ä»£åŒ–å‡çº§ã€‚å®ƒä¸ºæˆ‘ä»¬æ„å»ºæ›´é«˜æ•ˆã€æ›´å¯é ã€æ›´å…·å¯æ‰©å±•æ€§çš„åº”ç”¨æä¾›äº†æ›´å¼ºå¤§çš„å·¥å…·å’Œæ¡†æ¶ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ±Spring Boot 3.xå¸¦æ¥çš„æ–°æœºé‡ï¼</p>
<p>å¦‚æœä½ åœ¨å‡çº§è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜æˆ–ç»éªŒåˆ†äº«ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼ğŸ˜Š</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://blog.zhuyizhuo.online/2024/05/18/ai/2024-ai-platforms-tools-comparison/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/assets/img/avatar.png">
      <meta itemprop="name" content="ä¸€å“">
      <meta itemprop="description" content="å¹´è½»æ— ä¸ºï¼Œå–ç ä¸ºç”Ÿã€‚<br>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ä¸€å“çš„ä¸ªäººåšå®¢">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/05/18/ai/2024-ai-platforms-tools-comparison/" class="post-title-link" itemprop="url">2024å¹´AIå¹³å°åŠå·¥å…·å…¨æ™¯å›¾ï¼šåŠŸèƒ½ã€å¯¹æ¯”ä¸å…è´¹æ–¹æ¡ˆ</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2024-05-18 00:00:00" itemprop="dateCreated datePublished" datetime="2024-05-18T00:00:00+08:00">2024-05-18</time>
    </span>

  
    <span id="/2024/05/18/ai/2024-ai-platforms-tools-comparison/" class="post-meta-item leancloud_visitors" data-flag-title="2024å¹´AIå¹³å°åŠå·¥å…·å…¨æ™¯å›¾ï¼šåŠŸèƒ½ã€å¯¹æ¯”ä¸å…è´¹æ–¹æ¡ˆ" title="é˜…è¯»æ¬¡æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span class="leancloud-visitors-count"></span>
    </span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>4.6k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>4 åˆ†é’Ÿ</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="2024å¹´AIå¹³å°åŠå·¥å…·å…¨æ™¯å›¾ï¼šåŠŸèƒ½ã€å¯¹æ¯”ä¸å…è´¹æ–¹æ¡ˆ-ğŸ¤–ğŸŒ"><a href="#2024å¹´AIå¹³å°åŠå·¥å…·å…¨æ™¯å›¾ï¼šåŠŸèƒ½ã€å¯¹æ¯”ä¸å…è´¹æ–¹æ¡ˆ-ğŸ¤–ğŸŒ" class="headerlink" title="2024å¹´AIå¹³å°åŠå·¥å…·å…¨æ™¯å›¾ï¼šåŠŸèƒ½ã€å¯¹æ¯”ä¸å…è´¹æ–¹æ¡ˆ ğŸ¤–ğŸŒ"></a>2024å¹´AIå¹³å°åŠå·¥å…·å…¨æ™¯å›¾ï¼šåŠŸèƒ½ã€å¯¹æ¯”ä¸å…è´¹æ–¹æ¡ˆ ğŸ¤–ğŸŒ</h1><p>å¤§å®¶å¥½ï¼ğŸ‘‹ éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„å¿«é€Ÿè¿­ä»£ï¼Œå¸‚é¢ä¸Šæ¶Œç°å‡ºäº†å¤§é‡AIå¹³å°å’Œå·¥å…·ï¼Œè®©äººçœ¼èŠ±ç¼­ä¹±ã€‚ä»Šå¤©ï¼Œæˆ‘å°†ä¸ºå¤§å®¶ç³»ç»Ÿæ¢³ç†2024å¹´ä¸»æµçš„AIå¹³å°åŠå·¥å…·ï¼Œä»å¤šä¸ªç»´åº¦è¿›è¡Œå¯¹æ¯”åˆ†æï¼Œå¸®åŠ©ä½ æ‰¾åˆ°æœ€é€‚åˆè‡ªå·±éœ€æ±‚çš„AIè§£å†³æ–¹æ¡ˆï¼ğŸš€</p>
<h2 id="ä¸€ã€AIç¼–ç¨‹åŠ©æ‰‹ï¼šæå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨-ğŸ’»"><a href="#ä¸€ã€AIç¼–ç¨‹åŠ©æ‰‹ï¼šæå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨-ğŸ’»" class="headerlink" title="ä¸€ã€AIç¼–ç¨‹åŠ©æ‰‹ï¼šæå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨ ğŸ’»"></a>ä¸€ã€AIç¼–ç¨‹åŠ©æ‰‹ï¼šæå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨ ğŸ’»</h2><p>AIç¼–ç¨‹åŠ©æ‰‹å·²ç»æˆä¸ºå¼€å‘è€…çš„æ ‡é…å·¥å…·ï¼Œå®ƒä»¬èƒ½æ˜¾è‘—æå‡ç¼–ç æ•ˆç‡ã€æ”¹å–„ä»£ç è´¨é‡ã€‚</p>
<h3 id="ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹å¯¹æ¯”è¡¨"><a href="#ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹å¯¹æ¯”è¡¨" class="headerlink" title="ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹å¯¹æ¯”è¡¨"></a>ä¸»æµAIç¼–ç¨‹åŠ©æ‰‹å¯¹æ¯”è¡¨</h3><table>
<thead>
<tr>
<th>å¹³å°/å·¥å…·</th>
<th>æ ¸å¿ƒåŠŸèƒ½</th>
<th>æ”¯æŒè¯­è¨€</th>
<th>æ˜¯å¦å…è´¹</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>GitHub Copilot</strong></td>
<td>ä»£ç ç”Ÿæˆã€æ³¨é‡Šç”Ÿæˆã€ä¸Šä¸‹æ–‡ç†è§£</td>
<td>å¤šè¯­è¨€</td>
<td>æ”¶è´¹ï¼ˆ10ç¾å…ƒ/æœˆï¼‰</td>
<td>å…¨æ ˆå¼€å‘ã€å¿«é€ŸåŸå‹</td>
</tr>
<tr>
<td><strong>TabNine</strong></td>
<td>æ™ºèƒ½ä»£ç è¡¥å…¨ã€å›¢é˜Ÿä»£ç é£æ ¼åŒ¹é…</td>
<td>å¤šè¯­è¨€</td>
<td>åŸºç¡€ç‰ˆå…è´¹ï¼Œä¸“ä¸šç‰ˆæ”¶è´¹</td>
<td>æ—¥å¸¸ç¼–ç ã€æ–°æ‰‹å­¦ä¹ </td>
</tr>
<tr>
<td><strong>CodeWhisperer</strong></td>
<td>äº‘æœåŠ¡ä»£ç ç”Ÿæˆã€å®‰å…¨æ‰«æ</td>
<td>å¤šè¯­è¨€</td>
<td>ä¸ªäººå…è´¹ï¼Œä¼ä¸šæ”¶è´¹</td>
<td>AWSäº‘å¼€å‘ã€å®‰å…¨ç¼–ç </td>
</tr>
<tr>
<td><strong>ChatGPT/GPT-4</strong></td>
<td>ä»£ç ç”Ÿæˆã€è§£é‡Šã€è°ƒè¯•</td>
<td>å¤šè¯­è¨€</td>
<td>åŸºç¡€ç‰ˆå…è´¹ï¼Œé«˜çº§åŠŸèƒ½æ”¶è´¹</td>
<td>ä»£ç å­¦ä¹ ã€é—®é¢˜è§£å†³</td>
</tr>
<tr>
<td><strong>Claude 3</strong></td>
<td>é•¿ä»£ç ç†è§£ã€ä»£ç ä¼˜åŒ–å»ºè®®</td>
<td>å¤šè¯­è¨€</td>
<td>æœ‰é™å…è´¹ï¼Œè¶…å‡ºè®¡è´¹</td>
<td>å¤æ‚ç³»ç»Ÿé‡æ„ã€ä»£ç å®¡æŸ¥</td>
</tr>
</tbody></table>
<h3 id="å®è·µæ¡ˆä¾‹ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Ÿ"><a href="#å®è·µæ¡ˆä¾‹ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Ÿ" class="headerlink" title="å®è·µæ¡ˆä¾‹ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Ÿ"></a>å®è·µæ¡ˆä¾‹ï¼šå¦‚ä½•é€‰æ‹©åˆé€‚çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Ÿ</h3><ul>
<li>å¦‚æœä½ æ˜¯ä¸ªäººå¼€å‘è€…æˆ–å°å›¢é˜Ÿï¼Œå¯ä»¥è€ƒè™‘ <strong>GitHub Copilot</strong> æˆ– <strong>TabNine</strong>ï¼Œå®ƒä»¬æä¾›äº†å…¨é¢çš„ç¼–ç è¾…åŠ©åŠŸèƒ½ã€‚</li>
<li>å¦‚æœä½ ä¸»è¦åœ¨AWSäº‘ä¸Šå¼€å‘ï¼Œ<strong>CodeWhisperer</strong> çš„äº‘æœåŠ¡é›†æˆä¼šæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚</li>
<li>å¯¹äºå­¦ç”Ÿå’Œæ–°æ‰‹ï¼Œ<strong>TabNineåŸºç¡€ç‰ˆ</strong> å’Œ <strong>ChatGPTå…è´¹ç‰ˆ</strong> æ˜¯ä¸é”™çš„å…¥é—¨é€‰æ‹©ã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨AIç¼–ç¨‹åŠ©æ‰‹ç”Ÿæˆæ•°æ®å¤„ç†ä»£ç </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_data</span>(<span class="params">df, column_name, operation</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ ¹æ®æŒ‡å®šæ“ä½œå¤„ç†DataFrameä¸­çš„ç‰¹å®šåˆ—</span></span><br><span class="line"><span class="string">    å‚æ•°:</span></span><br><span class="line"><span class="string">        df: pandas DataFrame</span></span><br><span class="line"><span class="string">        column_name: è¦å¤„ç†çš„åˆ—å</span></span><br><span class="line"><span class="string">        operation: å¤„ç†æ“ä½œ (&#x27;normalize&#x27;, &#x27;standardize&#x27;, &#x27;log_transform&#x27;)</span></span><br><span class="line"><span class="string">    è¿”å›:</span></span><br><span class="line"><span class="string">        å¤„ç†åçš„DataFrame</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">    <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">    </span><br><span class="line">    result_df = df.copy()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> operation == <span class="string">&#x27;normalize&#x27;</span>:</span><br><span class="line">        min_val = result_df[column_name].<span class="built_in">min</span>()</span><br><span class="line">        max_val = result_df[column_name].<span class="built_in">max</span>()</span><br><span class="line">        result_df[<span class="string">f&#x27;<span class="subst">&#123;column_name&#125;</span>_normalized&#x27;</span>] = \</span><br><span class="line">            (result_df[column_name] - min_val) / (max_val - min_val)</span><br><span class="line">    <span class="keyword">elif</span> operation == <span class="string">&#x27;standardize&#x27;</span>:</span><br><span class="line">        mean_val = result_df[column_name].mean()</span><br><span class="line">        std_val = result_df[column_name].std()</span><br><span class="line">        result_df[<span class="string">f&#x27;<span class="subst">&#123;column_name&#125;</span>_standardized&#x27;</span>] = \</span><br><span class="line">            (result_df[column_name] - mean_val) / std_val</span><br><span class="line">    <span class="keyword">elif</span> operation == <span class="string">&#x27;log_transform&#x27;</span>:</span><br><span class="line">        result_df[<span class="string">f&#x27;<span class="subst">&#123;column_name&#125;</span>_log&#x27;</span>] = np.log1p(result_df[column_name])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result_df</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å¤§è¯­è¨€æ¨¡å‹å¹³å°ï¼šä¼ä¸šçº§AIåº”ç”¨çš„åŸºç¡€-ğŸ§ "><a href="#äºŒã€å¤§è¯­è¨€æ¨¡å‹å¹³å°ï¼šä¼ä¸šçº§AIåº”ç”¨çš„åŸºç¡€-ğŸ§ " class="headerlink" title="äºŒã€å¤§è¯­è¨€æ¨¡å‹å¹³å°ï¼šä¼ä¸šçº§AIåº”ç”¨çš„åŸºç¡€ ğŸ§ "></a>äºŒã€å¤§è¯­è¨€æ¨¡å‹å¹³å°ï¼šä¼ä¸šçº§AIåº”ç”¨çš„åŸºç¡€ ğŸ§ </h2><p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å·²ç»æˆä¸ºä¼ä¸šAIåº”ç”¨çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œä¸åŒç±»å‹çš„æ¨¡å‹é€‚ç”¨äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h3 id="å¤§è¯­è¨€æ¨¡å‹ç±»å‹ä¸åº”ç”¨åœºæ™¯"><a href="#å¤§è¯­è¨€æ¨¡å‹ç±»å‹ä¸åº”ç”¨åœºæ™¯" class="headerlink" title="å¤§è¯­è¨€æ¨¡å‹ç±»å‹ä¸åº”ç”¨åœºæ™¯"></a>å¤§è¯­è¨€æ¨¡å‹ç±»å‹ä¸åº”ç”¨åœºæ™¯</h3><table>
<thead>
<tr>
<th>æ¨¡å‹ç±»å‹</th>
<th>ä»£è¡¨äº§å“</th>
<th>ä¸»è¦ä¼˜åŠ¿</th>
<th>å…è´¹æ–¹æ¡ˆ</th>
<th>ä¼ä¸šåº”ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é€šç”¨å¤§æ¨¡å‹</strong></td>
<td>GPT-4oã€Claude 3ã€Gemini 1.5</td>
<td>åŠŸèƒ½å…¨é¢ã€é€‚åº”æ€§å¼º</td>
<td>éƒ¨åˆ†å…è´¹é¢åº¦ï¼Œè¶…å‡ºè®¡è´¹</td>
<td>å†…å®¹ç”Ÿæˆã€å®¢æœæ”¯æŒ</td>
</tr>
<tr>
<td><strong>è¡Œä¸šå¤§æ¨¡å‹</strong></td>
<td>åŒ»ç–—GPTã€é‡‘èBERTã€æ³•å¾‹LLM</td>
<td>è¡Œä¸šçŸ¥è¯†ä¸°å¯Œã€ä¸“ä¸šæ€§å¼º</td>
<td>éƒ¨åˆ†æä¾›å…è´¹è¯•ç”¨</td>
<td>åŒ»ç–—è¯Šæ–­è¾…åŠ©ã€é‡‘èåˆ†æ</td>
</tr>
<tr>
<td><strong>ä¼ä¸šå®šåˆ¶æ¨¡å‹</strong></td>
<td>ç§æœ‰GPTã€ä¼ä¸šä¸“å±Claude</td>
<td>æ•°æ®å®‰å…¨ã€å®šåˆ¶åŒ–ç¨‹åº¦é«˜</td>
<td>é€šå¸¸æ— å…è´¹æ–¹æ¡ˆ</td>
<td>å†…éƒ¨çŸ¥è¯†ç®¡ç†ã€æ•æ„Ÿæ•°æ®å¤„ç†</td>
</tr>
</tbody></table>
<h3 id="ä¼ä¸šåº”ç”¨å®è·µï¼šå¦‚ä½•é€‰æ‹©å¤§è¯­è¨€æ¨¡å‹ï¼Ÿ"><a href="#ä¼ä¸šåº”ç”¨å®è·µï¼šå¦‚ä½•é€‰æ‹©å¤§è¯­è¨€æ¨¡å‹ï¼Ÿ" class="headerlink" title="ä¼ä¸šåº”ç”¨å®è·µï¼šå¦‚ä½•é€‰æ‹©å¤§è¯­è¨€æ¨¡å‹ï¼Ÿ"></a>ä¼ä¸šåº”ç”¨å®è·µï¼šå¦‚ä½•é€‰æ‹©å¤§è¯­è¨€æ¨¡å‹ï¼Ÿ</h3><ol>
<li><strong>é€šç”¨åœºæ™¯</strong>ï¼šé€‰æ‹© <strong>GPT-4o</strong> æˆ– <strong>Claude 3 Sonnet</strong>ï¼Œå®ƒä»¬æä¾›äº†æœ€å…¨é¢çš„åŠŸèƒ½å’Œè‰¯å¥½çš„æ€§ä»·æ¯”ã€‚</li>
<li><strong>ä¸“ä¸šé¢†åŸŸ</strong>ï¼šè€ƒè™‘å‚ç›´é¢†åŸŸçš„ä¸“ä¸šå¤§æ¨¡å‹ï¼Œå¦‚åŒ»ç–—é¢†åŸŸçš„ <strong>IBM Watson Health</strong>ã€‚</li>
<li><strong>æ•°æ®æ•æ„Ÿåœºæ™¯</strong>ï¼šå¿…é¡»é‡‡ç”¨ç§æœ‰åŒ–éƒ¨ç½²æˆ–ä¼ä¸šå®šåˆ¶æ¨¡å‹ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚</li>
</ol>
<h2 id="ä¸‰ã€AIå†…å®¹åˆ›ä½œå·¥å…·ï¼šé‡Šæ”¾åˆ›æ„æ½œèƒ½-âœï¸"><a href="#ä¸‰ã€AIå†…å®¹åˆ›ä½œå·¥å…·ï¼šé‡Šæ”¾åˆ›æ„æ½œèƒ½-âœï¸" class="headerlink" title="ä¸‰ã€AIå†…å®¹åˆ›ä½œå·¥å…·ï¼šé‡Šæ”¾åˆ›æ„æ½œèƒ½ âœï¸"></a>ä¸‰ã€AIå†…å®¹åˆ›ä½œå·¥å…·ï¼šé‡Šæ”¾åˆ›æ„æ½œèƒ½ âœï¸</h2><p>AIå†…å®¹åˆ›ä½œå·¥å…·æ­£åœ¨æ”¹å˜å†…å®¹ç”Ÿäº§æ–¹å¼ï¼Œä»æ–‡ç« æ’°å†™åˆ°å›¾åƒå¤„ç†ï¼Œéƒ½èƒ½æ˜¾è‘—æå‡æ•ˆç‡ã€‚</p>
<h3 id="ä¸»æµAIå†…å®¹åˆ›ä½œå·¥å…·å¯¹æ¯”"><a href="#ä¸»æµAIå†…å®¹åˆ›ä½œå·¥å…·å¯¹æ¯”" class="headerlink" title="ä¸»æµAIå†…å®¹åˆ›ä½œå·¥å…·å¯¹æ¯”"></a>ä¸»æµAIå†…å®¹åˆ›ä½œå·¥å…·å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>å·¥å…·åç§°</th>
<th>æ ¸å¿ƒåŠŸèƒ½</th>
<th>å…è´¹æ–¹æ¡ˆ</th>
<th>ä»˜è´¹ä»·æ ¼</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ChatGPT/GPT-4</strong></td>
<td>æ–‡æœ¬ç”Ÿæˆã€æ”¹å†™ã€æ€»ç»“</td>
<td>åŸºç¡€ç‰ˆå…è´¹</td>
<td>20-40ç¾å…ƒ/æœˆ</td>
<td>æ–‡ç« æ’°å†™ã€é‚®ä»¶ç”Ÿæˆ</td>
</tr>
<tr>
<td><strong>Midjourney</strong></td>
<td>å›¾åƒç”Ÿæˆã€è‰ºæœ¯åˆ›ä½œ</td>
<td>æ— å…è´¹ç‰ˆ</td>
<td>10-60ç¾å…ƒ/æœˆ</td>
<td>æ’å›¾è®¾è®¡ã€æ¦‚å¿µåˆ›ä½œ</td>
</tr>
<tr>
<td><strong>DALL-E 3</strong></td>
<td>å›¾åƒç”Ÿæˆã€ç¼–è¾‘</td>
<td>æœ‰é™å…è´¹é¢åº¦</td>
<td>æŒ‰ç”Ÿæˆæ¬¡æ•°è®¡è´¹</td>
<td>å“ç‰Œè®¾è®¡ã€å†…å®¹é…å›¾</td>
</tr>
<tr>
<td><strong>Runway Gen-2</strong></td>
<td>è§†é¢‘ç”Ÿæˆä¸ç¼–è¾‘</td>
<td>éƒ¨åˆ†å…è´¹åŠŸèƒ½</td>
<td>12-60ç¾å…ƒ/æœˆ</td>
<td>è§†é¢‘å†…å®¹åˆ›ä½œã€ç‰¹æ•ˆç”Ÿæˆ</td>
</tr>
<tr>
<td><strong>Copy.ai</strong></td>
<td>è¥é”€æ–‡æ¡ˆã€ç¤¾äº¤åª’ä½“å†…å®¹</td>
<td>7å¤©å…è´¹è¯•ç”¨</td>
<td>49-369ç¾å…ƒ/æœˆ</td>
<td>è¥é”€æ¨å¹¿ã€å¹¿å‘Šåˆ›ä½œ</td>
</tr>
</tbody></table>
<h3 id="å†…å®¹åˆ›ä½œæœ€ä½³å®è·µ"><a href="#å†…å®¹åˆ›ä½œæœ€ä½³å®è·µ" class="headerlink" title="å†…å®¹åˆ›ä½œæœ€ä½³å®è·µ"></a>å†…å®¹åˆ›ä½œæœ€ä½³å®è·µ</h3><ul>
<li>ç»“åˆå¤šä¸ªå·¥å…·ä½¿ç”¨ï¼šç”¨ <strong>ChatGPT</strong> ç”Ÿæˆæ–‡æ¡ˆï¼Œç”¨ <strong>Midjourney</strong> æˆ– <strong>DALL-E 3</strong> ç”Ÿæˆé…å›¾ã€‚</li>
<li>åˆ©ç”¨æç¤ºå·¥ç¨‹æŠ€å·§ï¼šæä¾›è¯¦ç»†çš„ä¸Šä¸‹æ–‡å’Œè¦æ±‚ï¼Œè·å¾—æ›´ç²¾å‡†çš„ç”Ÿæˆç»“æœã€‚</li>
<li>å§‹ç»ˆä¿æŒäººå·¥å®¡æ ¸ï¼šç¡®ä¿AIç”Ÿæˆå†…å®¹ç¬¦åˆå“ç‰Œè°ƒæ€§å’Œå‡†ç¡®æ€§è¦æ±‚ã€‚</li>
</ul>
<h2 id="å››ã€AIæ•°æ®åˆ†æå·¥å…·ï¼šæ•°æ®é©±åŠ¨å†³ç­–çš„åŠ é€Ÿå™¨-ğŸ“Š"><a href="#å››ã€AIæ•°æ®åˆ†æå·¥å…·ï¼šæ•°æ®é©±åŠ¨å†³ç­–çš„åŠ é€Ÿå™¨-ğŸ“Š" class="headerlink" title="å››ã€AIæ•°æ®åˆ†æå·¥å…·ï¼šæ•°æ®é©±åŠ¨å†³ç­–çš„åŠ é€Ÿå™¨ ğŸ“Š"></a>å››ã€AIæ•°æ®åˆ†æå·¥å…·ï¼šæ•°æ®é©±åŠ¨å†³ç­–çš„åŠ é€Ÿå™¨ ğŸ“Š</h2><p>AIæ•°æ®åˆ†æå·¥å…·æ­£åœ¨æ”¹å˜ä¼ ç»Ÿçš„æ•°æ®åˆ†ææ–¹å¼ï¼Œè®©éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½ä»æ•°æ®ä¸­è·å–æ´è§ã€‚</p>
<h3 id="çƒ­é—¨AIæ•°æ®åˆ†æå·¥å…·ä¸€è§ˆ"><a href="#çƒ­é—¨AIæ•°æ®åˆ†æå·¥å…·ä¸€è§ˆ" class="headerlink" title="çƒ­é—¨AIæ•°æ®åˆ†æå·¥å…·ä¸€è§ˆ"></a>çƒ­é—¨AIæ•°æ®åˆ†æå·¥å…·ä¸€è§ˆ</h3><table>
<thead>
<tr>
<th>å·¥å…·åç§°</th>
<th>æ ¸å¿ƒåŠŸèƒ½</th>
<th>æ˜¯å¦å…è´¹</th>
<th>é€‚ç”¨ç”¨æˆ·</th>
<th>ä¸»è¦ä¼˜åŠ¿</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Tableau AI</strong></td>
<td>è‡ªç„¶è¯­è¨€æŸ¥è¯¢ã€æ™ºèƒ½æ´å¯Ÿ</td>
<td>æ”¶è´¹</td>
<td>æ•°æ®åˆ†æäººå‘˜</td>
<td>å¯è§†åŒ–èƒ½åŠ›å¼ºã€æ˜“äºäº¤äº’</td>
</tr>
<tr>
<td><strong>Power BI Copilot</strong></td>
<td>æ•°æ®æ¢ç´¢ã€æŠ¥å‘Šç”Ÿæˆ</td>
<td>æ”¶è´¹</td>
<td>ä¸šåŠ¡åˆ†æå¸ˆ</td>
<td>å¾®è½¯ç”Ÿæ€é›†æˆã€ä¼ä¸šçº§æ”¯æŒ</td>
</tr>
<tr>
<td><strong>DataRobot</strong></td>
<td>è‡ªåŠ¨æœºå™¨å­¦ä¹ ã€é¢„æµ‹åˆ†æ</td>
<td>æ”¶è´¹</td>
<td>æ•°æ®ç§‘å­¦å®¶</td>
<td>è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ã€æ¨¡å‹ä¸°å¯Œ</td>
</tr>
<tr>
<td><strong>Google Analytics AI</strong></td>
<td>ç”¨æˆ·è¡Œä¸ºåˆ†æã€è¶‹åŠ¿é¢„æµ‹</td>
<td>åŸºç¡€ç‰ˆå…è´¹</td>
<td>å¸‚åœºäººå‘˜</td>
<td>Googleç”Ÿæ€ã€æ˜“ç”¨æ€§å¼º</td>
</tr>
<tr>
<td><strong>Pandas AI</strong></td>
<td>å¢å¼ºç‰ˆæ•°æ®åˆ†æåº“</td>
<td>å¼€æºå…è´¹</td>
<td>æ•°æ®åˆ†æå¸ˆã€å¼€å‘è€…</td>
<td>Pythoné›†æˆã€è‡ªå®šä¹‰çµæ´»</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ï¼šä½¿ç”¨Pandas AIè¿›è¡Œæ•°æ®åˆ†æ</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandasai <span class="keyword">import</span> PandasAI</span><br><span class="line"><span class="keyword">from</span> pandasai.llm.openai <span class="keyword">import</span> OpenAI</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–Pandas AI</span></span><br><span class="line">llm = OpenAI(api_key=<span class="string">&quot;your_api_key&quot;</span>)</span><br><span class="line">pandas_ai = PandasAI(llm)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®</span></span><br><span class="line">df = pd.DataFrame(&#123;</span><br><span class="line">    <span class="string">&quot;äº§å“&quot;</span>: [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>],</span><br><span class="line">    <span class="string">&quot;é”€é‡&quot;</span>: [<span class="number">100</span>, <span class="number">150</span>, <span class="number">200</span>, <span class="number">80</span>, <span class="number">120</span>],</span><br><span class="line">    <span class="string">&quot;åˆ©æ¶¦&quot;</span>: [<span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>, <span class="number">1600</span>, <span class="number">2400</span>],</span><br><span class="line">    <span class="string">&quot;åŒºåŸŸ&quot;</span>: [<span class="string">&quot;åä¸œ&quot;</span>, <span class="string">&quot;åå—&quot;</span>, <span class="string">&quot;ååŒ—&quot;</span>, <span class="string">&quot;è¥¿å—&quot;</span>, <span class="string">&quot;ä¸œåŒ—&quot;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨è‡ªç„¶è¯­è¨€æé—®</span></span><br><span class="line">result = pandas_ai(df, prompt=<span class="string">&quot;åˆ†æå“ªä¸ªäº§å“çš„åˆ©æ¶¦ç‡æœ€é«˜ï¼Œå¹¶ç»™å‡ºå»ºè®®&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€AIå­¦ä¹ ä¸æ•™è‚²å¹³å°ï¼šä¸ªäººæˆé•¿çš„æ™ºèƒ½å¯¼å¸ˆ-ğŸ“š"><a href="#äº”ã€AIå­¦ä¹ ä¸æ•™è‚²å¹³å°ï¼šä¸ªäººæˆé•¿çš„æ™ºèƒ½å¯¼å¸ˆ-ğŸ“š" class="headerlink" title="äº”ã€AIå­¦ä¹ ä¸æ•™è‚²å¹³å°ï¼šä¸ªäººæˆé•¿çš„æ™ºèƒ½å¯¼å¸ˆ ğŸ“š"></a>äº”ã€AIå­¦ä¹ ä¸æ•™è‚²å¹³å°ï¼šä¸ªäººæˆé•¿çš„æ™ºèƒ½å¯¼å¸ˆ ğŸ“š</h2><p>AIæ•™è‚²å¹³å°æ­£åœ¨æ”¹å˜å­¦ä¹ æ–¹å¼ï¼Œæä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ ä½“éªŒå’Œæ™ºèƒ½è¾…å¯¼ã€‚</p>
<h3 id="ä¸»æµAIå­¦ä¹ å¹³å°å¯¹æ¯”"><a href="#ä¸»æµAIå­¦ä¹ å¹³å°å¯¹æ¯”" class="headerlink" title="ä¸»æµAIå­¦ä¹ å¹³å°å¯¹æ¯”"></a>ä¸»æµAIå­¦ä¹ å¹³å°å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>å¹³å°åç§°</th>
<th>æ ¸å¿ƒåŠŸèƒ½</th>
<th>æ˜¯å¦å…è´¹</th>
<th>é€‚åˆäººç¾¤</th>
<th>ç‰¹è‰²ä¼˜åŠ¿</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Coursera AIè¾…å¯¼</strong></td>
<td>è¯¾ç¨‹æ¨èã€å­¦ä¹ è·¯å¾„è§„åˆ’</td>
<td>éƒ¨åˆ†å…è´¹</td>
<td>å­¦ç”Ÿã€èŒåœºäººå£«</td>
<td>åæ ¡è¯¾ç¨‹ã€ä¸“ä¸šè®¤è¯</td>
</tr>
<tr>
<td><strong>Duolingo Max</strong></td>
<td>ä¸ªæ€§åŒ–è¯­è¨€å­¦ä¹ ã€AIå¯¹è¯ç»ƒä¹ </td>
<td>åŸºç¡€ç‰ˆå…è´¹</td>
<td>è¯­è¨€å­¦ä¹ è€…</td>
<td>æ¸¸æˆåŒ–è®¾è®¡ã€è¶£å‘³æ€§å¼º</td>
</tr>
<tr>
<td><strong>Brilliant.org AI</strong></td>
<td>äº¤äº’å¼æ•°å­¦ã€ç§‘å­¦å­¦ä¹ </td>
<td>7å¤©å…è´¹è¯•ç”¨</td>
<td>STEMå­¦ä¹ è€…</td>
<td>äº’åŠ¨å¼è¯¾ç¨‹ã€æ€ç»´è®­ç»ƒ</td>
</tr>
<tr>
<td><strong>Khanmigo</strong></td>
<td>ä¸ªæ€§åŒ–è¾…å¯¼ã€æ¦‚å¿µè§£é‡Š</td>
<td>éƒ¨åˆ†å…è´¹</td>
<td>K12å­¦ç”Ÿ</td>
<td>å› ææ–½æ•™ã€è€å¿ƒè®²è§£</td>
</tr>
<tr>
<td><strong>ChatGPT Learn</strong></td>
<td>çŸ¥è¯†é—®ç­”ã€æ¦‚å¿µè§£é‡Šã€ç»ƒä¹ ç”Ÿæˆ</td>
<td>åŸºç¡€ç‰ˆå…è´¹</td>
<td>å…¨å¹´é¾„æ®µå­¦ä¹ è€…</td>
<td>é€‚åº”æ€§å¼ºã€è¦†ç›–å¹¿æ³›</td>
</tr>
</tbody></table>
<h2 id="å…­ã€AIå¼€æºå·¥å…·ä¸ç¤¾åŒºï¼šåˆ›æ–°çš„æºæ³‰-ğŸŒ±"><a href="#å…­ã€AIå¼€æºå·¥å…·ä¸ç¤¾åŒºï¼šåˆ›æ–°çš„æºæ³‰-ğŸŒ±" class="headerlink" title="å…­ã€AIå¼€æºå·¥å…·ä¸ç¤¾åŒºï¼šåˆ›æ–°çš„æºæ³‰ ğŸŒ±"></a>å…­ã€AIå¼€æºå·¥å…·ä¸ç¤¾åŒºï¼šåˆ›æ–°çš„æºæ³‰ ğŸŒ±</h2><p>å¼€æºAIå·¥å…·å’Œç¤¾åŒºæ˜¯AIæŠ€æœ¯å‘å±•çš„é‡è¦æ¨åŠ¨åŠ›ï¼Œæä¾›äº†ä¸°å¯Œçš„å…è´¹èµ„æºã€‚</p>
<h3 id="ç²¾é€‰AIå¼€æºå·¥å…·"><a href="#ç²¾é€‰AIå¼€æºå·¥å…·" class="headerlink" title="ç²¾é€‰AIå¼€æºå·¥å…·"></a>ç²¾é€‰AIå¼€æºå·¥å…·</h3><table>
<thead>
<tr>
<th>å·¥å…·åç§°</th>
<th>åŠŸèƒ½é¢†åŸŸ</th>
<th>å¼€æºåè®®</th>
<th>ä¸»è¦ä¼˜åŠ¿</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Hugging Face Transformers</strong></td>
<td>NLPæ¨¡å‹åº“</td>
<td>Apache 2.0</td>
<td>æ¨¡å‹ä¸°å¯Œã€æ˜“äºä½¿ç”¨</td>
<td>NLPç ”ç©¶ä¸åº”ç”¨å¼€å‘</td>
</tr>
<tr>
<td><strong>LangChain</strong></td>
<td>LLMåº”ç”¨æ¡†æ¶</td>
<td>MIT</td>
<td>ç»„ä»¶åŒ–è®¾è®¡ã€æ‰©å±•æ€§å¼º</td>
<td>å¤æ‚LLMåº”ç”¨æ„å»º</td>
</tr>
<tr>
<td><strong>PyTorch</strong></td>
<td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td>
<td>BSD</td>
<td>åŠ¨æ€å›¾ã€ç ”ç©¶å‹å¥½</td>
<td>æ·±åº¦å­¦ä¹ ç ”ç©¶ä¸å¼€å‘</td>
</tr>
<tr>
<td><strong>TensorFlow</strong></td>
<td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td>
<td>Apache 2.0</td>
<td>é™æ€å›¾ã€ç”Ÿäº§å‹å¥½</td>
<td>å¤§è§„æ¨¡AIç³»ç»Ÿéƒ¨ç½²</td>
</tr>
<tr>
<td><strong>Stable Diffusion</strong></td>
<td>å›¾åƒç”Ÿæˆæ¨¡å‹</td>
<td>CreativeML Open RAIL-M</td>
<td>é«˜åº¦å¯å®šåˆ¶ã€ç¤¾åŒºæ´»è·ƒ</td>
<td>å›¾åƒç”Ÿæˆä¸ç¼–è¾‘</td>
</tr>
</tbody></table>
<h2 id="ä¸ƒã€é€‰æ‹©AIå·¥å…·çš„æ ¸å¿ƒè€ƒé‡å› ç´ -ğŸ§"><a href="#ä¸ƒã€é€‰æ‹©AIå·¥å…·çš„æ ¸å¿ƒè€ƒé‡å› ç´ -ğŸ§" class="headerlink" title="ä¸ƒã€é€‰æ‹©AIå·¥å…·çš„æ ¸å¿ƒè€ƒé‡å› ç´  ğŸ§"></a>ä¸ƒã€é€‰æ‹©AIå·¥å…·çš„æ ¸å¿ƒè€ƒé‡å› ç´  ğŸ§</h2><p>åœ¨ä¼—å¤šAIå·¥å…·ä¸­åšå‡ºé€‰æ‹©æ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å…³é”®å› ç´ ï¼š</p>
<h3 id="1-æ˜ç¡®éœ€æ±‚ä¸åœºæ™¯"><a href="#1-æ˜ç¡®éœ€æ±‚ä¸åœºæ™¯" class="headerlink" title="1. æ˜ç¡®éœ€æ±‚ä¸åœºæ™¯"></a>1. æ˜ç¡®éœ€æ±‚ä¸åœºæ™¯</h3><p>é¦–å…ˆè¦æ˜ç¡®ä½ çš„å…·ä½“éœ€æ±‚å’Œåº”ç”¨åœºæ™¯ï¼Œä¸åŒçš„å·¥å…·åœ¨ä¸åŒåœºæ™¯ä¸‹è¡¨ç°å„å¼‚ã€‚</p>
<h3 id="2-æˆæœ¬æ•ˆç›Šåˆ†æ"><a href="#2-æˆæœ¬æ•ˆç›Šåˆ†æ" class="headerlink" title="2. æˆæœ¬æ•ˆç›Šåˆ†æ"></a>2. æˆæœ¬æ•ˆç›Šåˆ†æ</h3><p>è¯„ä¼°å…è´¹ç‰ˆå’Œä»˜è´¹ç‰ˆçš„åŠŸèƒ½å·®å¼‚ï¼Œè®¡ç®—é•¿æœŸä½¿ç”¨æˆæœ¬ï¼Œé€‰æ‹©æœ€å…·æ€§ä»·æ¯”çš„æ–¹æ¡ˆã€‚</p>
<h3 id="3-æ•°æ®å®‰å…¨ä¸éšç§"><a href="#3-æ•°æ®å®‰å…¨ä¸éšç§" class="headerlink" title="3. æ•°æ®å®‰å…¨ä¸éšç§"></a>3. æ•°æ®å®‰å…¨ä¸éšç§</h3><p>ç‰¹åˆ«æ˜¯å¯¹äºä¼ä¸šç”¨æˆ·ï¼Œæ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤è‡³å…³é‡è¦ï¼Œè¦é€‰æ‹©ç¬¦åˆåˆè§„è¦æ±‚çš„å·¥å…·ã€‚</p>
<h3 id="4-æ˜“ç”¨æ€§ä¸å­¦ä¹ æ›²çº¿"><a href="#4-æ˜“ç”¨æ€§ä¸å­¦ä¹ æ›²çº¿" class="headerlink" title="4. æ˜“ç”¨æ€§ä¸å­¦ä¹ æ›²çº¿"></a>4. æ˜“ç”¨æ€§ä¸å­¦ä¹ æ›²çº¿</h3><p>è€ƒè™‘å›¢é˜Ÿçš„æŠ€æœ¯èƒ½åŠ›ï¼Œé€‰æ‹©å­¦ä¹ æˆæœ¬é€‚ä¸­çš„å·¥å…·ï¼Œç¡®ä¿èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å’Œæ¨å¹¿ã€‚</p>
<h3 id="5-ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§"><a href="#5-ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§" class="headerlink" title="5. ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§"></a>5. ç”Ÿæ€ç³»ç»Ÿä¸é›†æˆæ€§</h3><p>è¯„ä¼°å·¥å…·ä¸ç°æœ‰ç³»ç»Ÿçš„å…¼å®¹æ€§å’Œé›†æˆèƒ½åŠ›ï¼Œé¿å…äº§ç”Ÿæ•°æ®å­¤å²›ã€‚</p>
<h2 id="å…«ã€æœªæ¥å±•æœ›ï¼šAIå·¥å…·çš„å‘å±•è¶‹åŠ¿-ğŸ”®"><a href="#å…«ã€æœªæ¥å±•æœ›ï¼šAIå·¥å…·çš„å‘å±•è¶‹åŠ¿-ğŸ”®" class="headerlink" title="å…«ã€æœªæ¥å±•æœ›ï¼šAIå·¥å…·çš„å‘å±•è¶‹åŠ¿ ğŸ”®"></a>å…«ã€æœªæ¥å±•æœ›ï¼šAIå·¥å…·çš„å‘å±•è¶‹åŠ¿ ğŸ”®</h2><p>éšç€AIæŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œæœªæ¥çš„AIå·¥å…·å°†å‘ˆç°ä»¥ä¸‹å‘å±•è¶‹åŠ¿ï¼š</p>
<h3 id="1-å¤šæ¨¡æ€èåˆ"><a href="#1-å¤šæ¨¡æ€èåˆ" class="headerlink" title="1. å¤šæ¨¡æ€èåˆ"></a>1. å¤šæ¨¡æ€èåˆ</h3><p>AIå·¥å…·å°†è¶Šæ¥è¶Šå¤šåœ°æ”¯æŒæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ç­‰å¤šç§æ•°æ®ç±»å‹çš„å¤„ç†å’Œç†è§£ã€‚</p>
<h3 id="2-ä¸ªæ€§åŒ–å®šåˆ¶"><a href="#2-ä¸ªæ€§åŒ–å®šåˆ¶" class="headerlink" title="2. ä¸ªæ€§åŒ–å®šåˆ¶"></a>2. ä¸ªæ€§åŒ–å®šåˆ¶</h3><p>å·¥å…·å°†æ›´åŠ äº†è§£ç”¨æˆ·çš„åå¥½å’Œä¹ æƒ¯ï¼Œæä¾›æ›´åŠ ä¸ªæ€§åŒ–çš„æœåŠ¡å’Œä½“éªŒã€‚</p>
<h3 id="3-è¾¹ç¼˜è®¡ç®—éƒ¨ç½²"><a href="#3-è¾¹ç¼˜è®¡ç®—éƒ¨ç½²" class="headerlink" title="3. è¾¹ç¼˜è®¡ç®—éƒ¨ç½²"></a>3. è¾¹ç¼˜è®¡ç®—éƒ¨ç½²</h3><p>ä¸ºäº†ä¿æŠ¤æ•°æ®éšç§å’Œæé«˜å“åº”é€Ÿåº¦ï¼Œæ›´å¤šAIå·¥å…·å°†æ”¯æŒåœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šè¿è¡Œã€‚</p>
<h3 id="4-è‡ªä¸»å­¦ä¹ ä¸è¿›åŒ–"><a href="#4-è‡ªä¸»å­¦ä¹ ä¸è¿›åŒ–" class="headerlink" title="4. è‡ªä¸»å­¦ä¹ ä¸è¿›åŒ–"></a>4. è‡ªä¸»å­¦ä¹ ä¸è¿›åŒ–</h3><p>å·¥å…·å°†å…·å¤‡æ›´å¼ºçš„è‡ªä¸»å­¦ä¹ èƒ½åŠ›ï¼Œèƒ½å¤Ÿä»ç”¨æˆ·åé¦ˆä¸­ä¸æ–­è¿›åŒ–å’Œä¼˜åŒ–ã€‚</p>
<h3 id="5-è·¨å¹³å°ä¸åä½œ"><a href="#5-è·¨å¹³å°ä¸åä½œ" class="headerlink" title="5. è·¨å¹³å°ä¸åä½œ"></a>5. è·¨å¹³å°ä¸åä½œ</h3><p>AIå·¥å…·å°†æ›´å¥½åœ°æ”¯æŒå›¢é˜Ÿåä½œï¼Œå®ç°è·¨å¹³å°çš„æ•°æ®å…±äº«å’Œæ— ç¼åä½œã€‚</p>
<h2 id="å†™åœ¨æœ€åï¼šä¸AIå…±èˆï¼Œæ‹¥æŠ±æ™ºèƒ½æœªæ¥-ğŸ’ƒ"><a href="#å†™åœ¨æœ€åï¼šä¸AIå…±èˆï¼Œæ‹¥æŠ±æ™ºèƒ½æœªæ¥-ğŸ’ƒ" class="headerlink" title="å†™åœ¨æœ€åï¼šä¸AIå…±èˆï¼Œæ‹¥æŠ±æ™ºèƒ½æœªæ¥ ğŸ’ƒ"></a>å†™åœ¨æœ€åï¼šä¸AIå…±èˆï¼Œæ‹¥æŠ±æ™ºèƒ½æœªæ¥ ğŸ’ƒ</h2><p>AIå·¥å…·æ­£åœ¨ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦æ”¹å˜æˆ‘ä»¬çš„å·¥ä½œå’Œç”Ÿæ´»æ–¹å¼ã€‚é¢å¯¹è¿™ä¸€æŠ€æœ¯å˜é©ï¼Œæˆ‘ä»¬åº”è¯¥ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œç§¯æå­¦ä¹ å’Œé€‚åº”æ–°å·¥å…·ï¼ŒåŒæ—¶ä¹Ÿè¦ä¿æŒç†æ€§ï¼Œè®¤è¯†åˆ°AIåªæ˜¯æˆ‘ä»¬çš„åŠ©æ‰‹ï¼Œè€Œéæ›¿ä»£è€…ã€‚</p>
<p>é€‰æ‹©åˆé€‚çš„AIå·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æå‡æ•ˆç‡ã€é‡Šæ”¾åˆ›é€ åŠ›ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºæ›´æœ‰ä»·å€¼çš„å·¥ä½œã€‚å¸Œæœ›æœ¬æ–‡çš„å¯¹æ¯”åˆ†æèƒ½å¤Ÿå¸®åŠ©ä½ æ‰¾åˆ°æœ€é€‚åˆè‡ªå·±éœ€æ±‚çš„AIè§£å†³æ–¹æ¡ˆï¼</p>
<p>ä½ ä½¿ç”¨è¿‡å“ªäº›AIå·¥å…·ï¼Ÿæœ‰ä»€ä¹ˆå®è´µçš„ä½¿ç”¨ç»éªŒï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€åˆ†äº«ï¼</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ‹¥æŠ±æ™ºèƒ½æœªæ¥ï¼ğŸ¤–âœ¨</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">äº¬ICPå¤‡2021031644å·-1 </span>
      <img src="/assets/img/gongan.png" alt=""><span class="exturl" data-url="aHR0cDovL3d3dy5iZWlhbi5nb3YuY24vcG9ydGFsL3JlZ2lzdGVyU3lzdGVtSW5mbz9yZWNvcmRjb2RlPTExMDExNTAyMDM4NDMx">äº¬å…¬ç½‘å®‰å¤‡11011502038431 </span>
  </div>

<div class="copyright">
  &copy; 2021 â€“ 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ä¸€å“</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">359k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">5:26</span>
  </span>
</div>
  <div class="powered-by">ç”± <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9waXNjZXMv">NexT.Pisces</span> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>




  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"AWYESEbou6tCGQivun349qMS-gzGzoHsz","app_key":"39iQA2ICeAJJdL8qkQCUUeKk","server_url":null,"security":true,"custom_uv":false,"custom_pv":false}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://blog.zhuyizhuo.online/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
